function jS(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Hr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ay(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function jW(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var $S={exports:{}},Rf={},zS={exports:{}},we={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rc=Symbol.for("react.element"),SN=Symbol.for("react.portal"),CN=Symbol.for("react.fragment"),RN=Symbol.for("react.strict_mode"),PN=Symbol.for("react.profiler"),AN=Symbol.for("react.provider"),kN=Symbol.for("react.context"),bN=Symbol.for("react.forward_ref"),NN=Symbol.for("react.suspense"),xN=Symbol.for("react.memo"),DN=Symbol.for("react.lazy"),xE=Symbol.iterator;function ON(t){return t===null||typeof t!="object"?null:(t=xE&&t[xE]||t["@@iterator"],typeof t=="function"?t:null)}var WS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},HS=Object.assign,qS={};function rl(t,e,n){this.props=t,this.context=e,this.refs=qS,this.updater=n||WS}rl.prototype.isReactComponent={};rl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};rl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function KS(){}KS.prototype=rl.prototype;function ly(t,e,n){this.props=t,this.context=e,this.refs=qS,this.updater=n||WS}var uy=ly.prototype=new KS;uy.constructor=ly;HS(uy,rl.prototype);uy.isPureReactComponent=!0;var DE=Array.isArray,GS=Object.prototype.hasOwnProperty,cy={current:null},QS={key:!0,ref:!0,__self:!0,__source:!0};function YS(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)GS.call(e,r)&&!QS.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Rc,type:t,key:s,ref:o,props:i,_owner:cy.current}}function LN(t,e){return{$$typeof:Rc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function hy(t){return typeof t=="object"&&t!==null&&t.$$typeof===Rc}function MN(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var OE=/\/+/g;function ng(t,e){return typeof t=="object"&&t!==null&&t.key!=null?MN(""+t.key):e.toString(36)}function $h(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Rc:case SN:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+ng(o,0):r,DE(i)?(n="",t!=null&&(n=t.replace(OE,"$&/")+"/"),$h(i,e,n,"",function(c){return c})):i!=null&&(hy(i)&&(i=LN(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(OE,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",DE(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+ng(s,a);o+=$h(s,e,n,l,i)}else if(l=ON(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+ng(s,a++),o+=$h(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function dh(t,e,n){if(t==null)return t;var r=[],i=0;return $h(t,r,"","",function(s){return e.call(n,s,i++)}),r}function VN(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var _n={current:null},zh={transition:null},FN={ReactCurrentDispatcher:_n,ReactCurrentBatchConfig:zh,ReactCurrentOwner:cy};function JS(){throw Error("act(...) is not supported in production builds of React.")}we.Children={map:dh,forEach:function(t,e,n){dh(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return dh(t,function(){e++}),e},toArray:function(t){return dh(t,function(e){return e})||[]},only:function(t){if(!hy(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};we.Component=rl;we.Fragment=CN;we.Profiler=PN;we.PureComponent=ly;we.StrictMode=RN;we.Suspense=NN;we.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FN;we.act=JS;we.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=HS({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=cy.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)GS.call(e,l)&&!QS.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Rc,type:t.type,key:i,ref:s,props:r,_owner:o}};we.createContext=function(t){return t={$$typeof:kN,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:AN,_context:t},t.Consumer=t};we.createElement=YS;we.createFactory=function(t){var e=YS.bind(null,t);return e.type=t,e};we.createRef=function(){return{current:null}};we.forwardRef=function(t){return{$$typeof:bN,render:t}};we.isValidElement=hy;we.lazy=function(t){return{$$typeof:DN,_payload:{_status:-1,_result:t},_init:VN}};we.memo=function(t,e){return{$$typeof:xN,type:t,compare:e===void 0?null:e}};we.startTransition=function(t){var e=zh.transition;zh.transition={};try{t()}finally{zh.transition=e}};we.unstable_act=JS;we.useCallback=function(t,e){return _n.current.useCallback(t,e)};we.useContext=function(t){return _n.current.useContext(t)};we.useDebugValue=function(){};we.useDeferredValue=function(t){return _n.current.useDeferredValue(t)};we.useEffect=function(t,e){return _n.current.useEffect(t,e)};we.useId=function(){return _n.current.useId()};we.useImperativeHandle=function(t,e,n){return _n.current.useImperativeHandle(t,e,n)};we.useInsertionEffect=function(t,e){return _n.current.useInsertionEffect(t,e)};we.useLayoutEffect=function(t,e){return _n.current.useLayoutEffect(t,e)};we.useMemo=function(t,e){return _n.current.useMemo(t,e)};we.useReducer=function(t,e,n){return _n.current.useReducer(t,e,n)};we.useRef=function(t){return _n.current.useRef(t)};we.useState=function(t){return _n.current.useState(t)};we.useSyncExternalStore=function(t,e,n){return _n.current.useSyncExternalStore(t,e,n)};we.useTransition=function(){return _n.current.useTransition()};we.version="18.3.1";zS.exports=we;var F=zS.exports;const qe=ay(F),UN=jS({__proto__:null,default:qe},[F]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BN=F,jN=Symbol.for("react.element"),$N=Symbol.for("react.fragment"),zN=Object.prototype.hasOwnProperty,WN=BN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,HN={key:!0,ref:!0,__self:!0,__source:!0};function XS(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)zN.call(e,r)&&!HN.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:jN,type:t,key:s,ref:o,props:i,_owner:WN.current}}Rf.Fragment=$N;Rf.jsx=XS;Rf.jsxs=XS;$S.exports=Rf;var Ct=$S.exports,gm={},ZS={exports:{}},Gn={},eC={exports:{}},tC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,J){var se=$.length;$.push(J);e:for(;0<se;){var Ee=se-1>>>1,Pe=$[Ee];if(0<i(Pe,J))$[Ee]=J,$[se]=Pe,se=Ee;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var J=$[0],se=$.pop();if(se!==J){$[0]=se;e:for(var Ee=0,Pe=$.length,ze=Pe>>>1;Ee<ze;){var At=2*(Ee+1)-1,Ft=$[At],Ut=At+1,Yn=$[Ut];if(0>i(Ft,se))Ut<Pe&&0>i(Yn,Ft)?($[Ee]=Yn,$[Ut]=se,Ee=Ut):($[Ee]=Ft,$[At]=se,Ee=At);else if(Ut<Pe&&0>i(Yn,se))$[Ee]=Yn,$[Ut]=se,Ee=Ut;else break e}}return J}function i($,J){var se=$.sortIndex-J.sortIndex;return se!==0?se:$.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,d=null,f=3,m=!1,_=!1,T=!1,I=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R($){for(var J=n(c);J!==null;){if(J.callback===null)r(c);else if(J.startTime<=$)r(c),J.sortIndex=J.expirationTime,e(l,J);else break;J=n(c)}}function N($){if(T=!1,R($),!_)if(n(l)!==null)_=!0,Me(M);else{var J=n(c);J!==null&&de(N,J.startTime-$)}}function M($,J){_=!1,T&&(T=!1,v(w),w=-1),m=!0;var se=f;try{for(R(J),d=n(l);d!==null&&(!(d.expirationTime>J)||$&&!b());){var Ee=d.callback;if(typeof Ee=="function"){d.callback=null,f=d.priorityLevel;var Pe=Ee(d.expirationTime<=J);J=t.unstable_now(),typeof Pe=="function"?d.callback=Pe:d===n(l)&&r(l),R(J)}else r(l);d=n(l)}if(d!==null)var ze=!0;else{var At=n(c);At!==null&&de(N,At.startTime-J),ze=!1}return ze}finally{d=null,f=se,m=!1}}var k=!1,S=null,w=-1,C=5,A=-1;function b(){return!(t.unstable_now()-A<C)}function D(){if(S!==null){var $=t.unstable_now();A=$;var J=!0;try{J=S(!0,$)}finally{J?P():(k=!1,S=null)}}else k=!1}var P;if(typeof y=="function")P=function(){y(D)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,Be=oe.port2;oe.port1.onmessage=D,P=function(){Be.postMessage(null)}}else P=function(){I(D,0)};function Me($){S=$,k||(k=!0,P())}function de($,J){w=I(function(){$(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){_||m||(_=!0,Me(M))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function($){switch(f){case 1:case 2:case 3:var J=3;break;default:J=f}var se=f;f=J;try{return $()}finally{f=se}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,J){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var se=f;f=$;try{return J()}finally{f=se}},t.unstable_scheduleCallback=function($,J,se){var Ee=t.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?Ee+se:Ee):se=Ee,$){case 1:var Pe=-1;break;case 2:Pe=250;break;case 5:Pe=1073741823;break;case 4:Pe=1e4;break;default:Pe=5e3}return Pe=se+Pe,$={id:h++,callback:J,priorityLevel:$,startTime:se,expirationTime:Pe,sortIndex:-1},se>Ee?($.sortIndex=se,e(c,$),n(l)===null&&$===n(c)&&(T?(v(w),w=-1):T=!0,de(N,se-Ee))):($.sortIndex=Pe,e(l,$),_||m||(_=!0,Me(M))),$},t.unstable_shouldYield=b,t.unstable_wrapCallback=function($){var J=f;return function(){var se=f;f=J;try{return $.apply(this,arguments)}finally{f=se}}}})(tC);eC.exports=tC;var qN=eC.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KN=F,Wn=qN;function W(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var nC=new Set,Mu={};function So(t,e){Aa(t,e),Aa(t+"Capture",e)}function Aa(t,e){for(Mu[t]=e,t=0;t<e.length;t++)nC.add(e[t])}var vi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),mm=Object.prototype.hasOwnProperty,GN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,LE={},ME={};function QN(t){return mm.call(ME,t)?!0:mm.call(LE,t)?!1:GN.test(t)?ME[t]=!0:(LE[t]=!0,!1)}function YN(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function JN(t,e,n,r){if(e===null||typeof e>"u"||YN(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function yn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Kt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Kt[t]=new yn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Kt[e]=new yn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Kt[t]=new yn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Kt[t]=new yn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Kt[t]=new yn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Kt[t]=new yn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Kt[t]=new yn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Kt[t]=new yn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Kt[t]=new yn(t,5,!1,t.toLowerCase(),null,!1,!1)});var dy=/[\-:]([a-z])/g;function fy(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(dy,fy);Kt[e]=new yn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(dy,fy);Kt[e]=new yn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(dy,fy);Kt[e]=new yn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Kt[t]=new yn(t,1,!1,t.toLowerCase(),null,!1,!1)});Kt.xlinkHref=new yn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Kt[t]=new yn(t,1,!1,t.toLowerCase(),null,!0,!0)});function py(t,e,n,r){var i=Kt.hasOwnProperty(e)?Kt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(JN(e,n,i,r)&&(n=null),r||i===null?QN(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var bi=KN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fh=Symbol.for("react.element"),Zo=Symbol.for("react.portal"),ea=Symbol.for("react.fragment"),gy=Symbol.for("react.strict_mode"),_m=Symbol.for("react.profiler"),rC=Symbol.for("react.provider"),iC=Symbol.for("react.context"),my=Symbol.for("react.forward_ref"),ym=Symbol.for("react.suspense"),vm=Symbol.for("react.suspense_list"),_y=Symbol.for("react.memo"),zi=Symbol.for("react.lazy"),sC=Symbol.for("react.offscreen"),VE=Symbol.iterator;function Ml(t){return t===null||typeof t!="object"?null:(t=VE&&t[VE]||t["@@iterator"],typeof t=="function"?t:null)}var ht=Object.assign,rg;function eu(t){if(rg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);rg=e&&e[1]||""}return`
`+rg+t}var ig=!1;function sg(t,e){if(!t||ig)return"";ig=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{ig=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?eu(t):""}function XN(t){switch(t.tag){case 5:return eu(t.type);case 16:return eu("Lazy");case 13:return eu("Suspense");case 19:return eu("SuspenseList");case 0:case 2:case 15:return t=sg(t.type,!1),t;case 11:return t=sg(t.type.render,!1),t;case 1:return t=sg(t.type,!0),t;default:return""}}function wm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ea:return"Fragment";case Zo:return"Portal";case _m:return"Profiler";case gy:return"StrictMode";case ym:return"Suspense";case vm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case iC:return(t.displayName||"Context")+".Consumer";case rC:return(t._context.displayName||"Context")+".Provider";case my:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case _y:return e=t.displayName||null,e!==null?e:wm(t.type)||"Memo";case zi:e=t._payload,t=t._init;try{return wm(t(e))}catch{}}return null}function ZN(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return wm(e);case 8:return e===gy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ps(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function oC(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ex(t){var e=oC(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ph(t){t._valueTracker||(t._valueTracker=ex(t))}function aC(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=oC(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function dd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Em(t,e){var n=e.checked;return ht({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function FE(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ps(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function lC(t,e){e=e.checked,e!=null&&py(t,"checked",e,!1)}function Tm(t,e){lC(t,e);var n=ps(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Im(t,e.type,n):e.hasOwnProperty("defaultValue")&&Im(t,e.type,ps(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function UE(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Im(t,e,n){(e!=="number"||dd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var tu=Array.isArray;function fa(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ps(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Sm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return ht({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function BE(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(W(92));if(tu(n)){if(1<n.length)throw Error(W(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ps(n)}}function uC(t,e){var n=ps(e.value),r=ps(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function jE(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function cC(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Cm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?cC(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var gh,hC=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(gh=gh||document.createElement("div"),gh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=gh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Vu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var fu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tx=["Webkit","ms","Moz","O"];Object.keys(fu).forEach(function(t){tx.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),fu[e]=fu[t]})});function dC(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||fu.hasOwnProperty(t)&&fu[t]?(""+e).trim():e+"px"}function fC(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=dC(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var nx=ht({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Rm(t,e){if(e){if(nx[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function Pm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Am=null;function yy(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var km=null,pa=null,ga=null;function $E(t){if(t=kc(t)){if(typeof km!="function")throw Error(W(280));var e=t.stateNode;e&&(e=Nf(e),km(t.stateNode,t.type,e))}}function pC(t){pa?ga?ga.push(t):ga=[t]:pa=t}function gC(){if(pa){var t=pa,e=ga;if(ga=pa=null,$E(t),e)for(t=0;t<e.length;t++)$E(e[t])}}function mC(t,e){return t(e)}function _C(){}var og=!1;function yC(t,e,n){if(og)return t(e,n);og=!0;try{return mC(t,e,n)}finally{og=!1,(pa!==null||ga!==null)&&(_C(),gC())}}function Fu(t,e){var n=t.stateNode;if(n===null)return null;var r=Nf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(W(231,e,typeof n));return n}var bm=!1;if(vi)try{var Vl={};Object.defineProperty(Vl,"passive",{get:function(){bm=!0}}),window.addEventListener("test",Vl,Vl),window.removeEventListener("test",Vl,Vl)}catch{bm=!1}function rx(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var pu=!1,fd=null,pd=!1,Nm=null,ix={onError:function(t){pu=!0,fd=t}};function sx(t,e,n,r,i,s,o,a,l){pu=!1,fd=null,rx.apply(ix,arguments)}function ox(t,e,n,r,i,s,o,a,l){if(sx.apply(this,arguments),pu){if(pu){var c=fd;pu=!1,fd=null}else throw Error(W(198));pd||(pd=!0,Nm=c)}}function Co(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function vC(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function zE(t){if(Co(t)!==t)throw Error(W(188))}function ax(t){var e=t.alternate;if(!e){if(e=Co(t),e===null)throw Error(W(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return zE(i),t;if(s===r)return zE(i),e;s=s.sibling}throw Error(W(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(W(189))}}if(n.alternate!==r)throw Error(W(190))}if(n.tag!==3)throw Error(W(188));return n.stateNode.current===n?t:e}function wC(t){return t=ax(t),t!==null?EC(t):null}function EC(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=EC(t);if(e!==null)return e;t=t.sibling}return null}var TC=Wn.unstable_scheduleCallback,WE=Wn.unstable_cancelCallback,lx=Wn.unstable_shouldYield,ux=Wn.unstable_requestPaint,_t=Wn.unstable_now,cx=Wn.unstable_getCurrentPriorityLevel,vy=Wn.unstable_ImmediatePriority,IC=Wn.unstable_UserBlockingPriority,gd=Wn.unstable_NormalPriority,hx=Wn.unstable_LowPriority,SC=Wn.unstable_IdlePriority,Pf=null,jr=null;function dx(t){if(jr&&typeof jr.onCommitFiberRoot=="function")try{jr.onCommitFiberRoot(Pf,t,void 0,(t.current.flags&128)===128)}catch{}}var wr=Math.clz32?Math.clz32:gx,fx=Math.log,px=Math.LN2;function gx(t){return t>>>=0,t===0?32:31-(fx(t)/px|0)|0}var mh=64,_h=4194304;function nu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function md(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=nu(a):(s&=o,s!==0&&(r=nu(s)))}else o=n&~i,o!==0?r=nu(o):s!==0&&(r=nu(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-wr(e),i=1<<n,r|=t[n],e&=~i;return r}function mx(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _x(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-wr(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=mx(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function xm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function CC(){var t=mh;return mh<<=1,!(mh&4194240)&&(mh=64),t}function ag(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Pc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-wr(e),t[e]=n}function yx(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-wr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function wy(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-wr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Fe=0;function RC(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var PC,Ey,AC,kC,bC,Dm=!1,yh=[],ns=null,rs=null,is=null,Uu=new Map,Bu=new Map,Hi=[],vx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function HE(t,e){switch(t){case"focusin":case"focusout":ns=null;break;case"dragenter":case"dragleave":rs=null;break;case"mouseover":case"mouseout":is=null;break;case"pointerover":case"pointerout":Uu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bu.delete(e.pointerId)}}function Fl(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=kc(e),e!==null&&Ey(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function wx(t,e,n,r,i){switch(e){case"focusin":return ns=Fl(ns,t,e,n,r,i),!0;case"dragenter":return rs=Fl(rs,t,e,n,r,i),!0;case"mouseover":return is=Fl(is,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Uu.set(s,Fl(Uu.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Bu.set(s,Fl(Bu.get(s)||null,t,e,n,r,i)),!0}return!1}function NC(t){var e=$s(t.target);if(e!==null){var n=Co(e);if(n!==null){if(e=n.tag,e===13){if(e=vC(n),e!==null){t.blockedOn=e,bC(t.priority,function(){AC(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Wh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Om(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Am=r,n.target.dispatchEvent(r),Am=null}else return e=kc(n),e!==null&&Ey(e),t.blockedOn=n,!1;e.shift()}return!0}function qE(t,e,n){Wh(t)&&n.delete(e)}function Ex(){Dm=!1,ns!==null&&Wh(ns)&&(ns=null),rs!==null&&Wh(rs)&&(rs=null),is!==null&&Wh(is)&&(is=null),Uu.forEach(qE),Bu.forEach(qE)}function Ul(t,e){t.blockedOn===e&&(t.blockedOn=null,Dm||(Dm=!0,Wn.unstable_scheduleCallback(Wn.unstable_NormalPriority,Ex)))}function ju(t){function e(i){return Ul(i,t)}if(0<yh.length){Ul(yh[0],t);for(var n=1;n<yh.length;n++){var r=yh[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ns!==null&&Ul(ns,t),rs!==null&&Ul(rs,t),is!==null&&Ul(is,t),Uu.forEach(e),Bu.forEach(e),n=0;n<Hi.length;n++)r=Hi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Hi.length&&(n=Hi[0],n.blockedOn===null);)NC(n),n.blockedOn===null&&Hi.shift()}var ma=bi.ReactCurrentBatchConfig,_d=!0;function Tx(t,e,n,r){var i=Fe,s=ma.transition;ma.transition=null;try{Fe=1,Ty(t,e,n,r)}finally{Fe=i,ma.transition=s}}function Ix(t,e,n,r){var i=Fe,s=ma.transition;ma.transition=null;try{Fe=4,Ty(t,e,n,r)}finally{Fe=i,ma.transition=s}}function Ty(t,e,n,r){if(_d){var i=Om(t,e,n,r);if(i===null)_g(t,e,r,yd,n),HE(t,r);else if(wx(i,t,e,n,r))r.stopPropagation();else if(HE(t,r),e&4&&-1<vx.indexOf(t)){for(;i!==null;){var s=kc(i);if(s!==null&&PC(s),s=Om(t,e,n,r),s===null&&_g(t,e,r,yd,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else _g(t,e,r,null,n)}}var yd=null;function Om(t,e,n,r){if(yd=null,t=yy(r),t=$s(t),t!==null)if(e=Co(t),e===null)t=null;else if(n=e.tag,n===13){if(t=vC(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return yd=t,null}function xC(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(cx()){case vy:return 1;case IC:return 4;case gd:case hx:return 16;case SC:return 536870912;default:return 16}default:return 16}}var Xi=null,Iy=null,Hh=null;function DC(){if(Hh)return Hh;var t,e=Iy,n=e.length,r,i="value"in Xi?Xi.value:Xi.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Hh=i.slice(t,1<r?1-r:void 0)}function qh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function vh(){return!0}function KE(){return!1}function Qn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?vh:KE,this.isPropagationStopped=KE,this}return ht(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=vh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=vh)},persist:function(){},isPersistent:vh}),e}var il={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sy=Qn(il),Ac=ht({},il,{view:0,detail:0}),Sx=Qn(Ac),lg,ug,Bl,Af=ht({},Ac,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Bl&&(Bl&&t.type==="mousemove"?(lg=t.screenX-Bl.screenX,ug=t.screenY-Bl.screenY):ug=lg=0,Bl=t),lg)},movementY:function(t){return"movementY"in t?t.movementY:ug}}),GE=Qn(Af),Cx=ht({},Af,{dataTransfer:0}),Rx=Qn(Cx),Px=ht({},Ac,{relatedTarget:0}),cg=Qn(Px),Ax=ht({},il,{animationName:0,elapsedTime:0,pseudoElement:0}),kx=Qn(Ax),bx=ht({},il,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Nx=Qn(bx),xx=ht({},il,{data:0}),QE=Qn(xx),Dx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ox={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Lx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mx(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Lx[t])?!!e[t]:!1}function Cy(){return Mx}var Vx=ht({},Ac,{key:function(t){if(t.key){var e=Dx[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=qh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ox[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cy,charCode:function(t){return t.type==="keypress"?qh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?qh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Fx=Qn(Vx),Ux=ht({},Af,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),YE=Qn(Ux),Bx=ht({},Ac,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cy}),jx=Qn(Bx),$x=ht({},il,{propertyName:0,elapsedTime:0,pseudoElement:0}),zx=Qn($x),Wx=ht({},Af,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Hx=Qn(Wx),qx=[9,13,27,32],Ry=vi&&"CompositionEvent"in window,gu=null;vi&&"documentMode"in document&&(gu=document.documentMode);var Kx=vi&&"TextEvent"in window&&!gu,OC=vi&&(!Ry||gu&&8<gu&&11>=gu),JE=String.fromCharCode(32),XE=!1;function LC(t,e){switch(t){case"keyup":return qx.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function MC(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ta=!1;function Gx(t,e){switch(t){case"compositionend":return MC(e);case"keypress":return e.which!==32?null:(XE=!0,JE);case"textInput":return t=e.data,t===JE&&XE?null:t;default:return null}}function Qx(t,e){if(ta)return t==="compositionend"||!Ry&&LC(t,e)?(t=DC(),Hh=Iy=Xi=null,ta=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return OC&&e.locale!=="ko"?null:e.data;default:return null}}var Yx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ZE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Yx[t.type]:e==="textarea"}function VC(t,e,n,r){pC(r),e=vd(e,"onChange"),0<e.length&&(n=new Sy("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var mu=null,$u=null;function Jx(t){GC(t,0)}function kf(t){var e=ia(t);if(aC(e))return t}function Xx(t,e){if(t==="change")return e}var FC=!1;if(vi){var hg;if(vi){var dg="oninput"in document;if(!dg){var e0=document.createElement("div");e0.setAttribute("oninput","return;"),dg=typeof e0.oninput=="function"}hg=dg}else hg=!1;FC=hg&&(!document.documentMode||9<document.documentMode)}function t0(){mu&&(mu.detachEvent("onpropertychange",UC),$u=mu=null)}function UC(t){if(t.propertyName==="value"&&kf($u)){var e=[];VC(e,$u,t,yy(t)),yC(Jx,e)}}function Zx(t,e,n){t==="focusin"?(t0(),mu=e,$u=n,mu.attachEvent("onpropertychange",UC)):t==="focusout"&&t0()}function eD(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return kf($u)}function tD(t,e){if(t==="click")return kf(e)}function nD(t,e){if(t==="input"||t==="change")return kf(e)}function rD(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ir=typeof Object.is=="function"?Object.is:rD;function zu(t,e){if(Ir(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!mm.call(e,i)||!Ir(t[i],e[i]))return!1}return!0}function n0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function r0(t,e){var n=n0(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=n0(n)}}function BC(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?BC(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function jC(){for(var t=window,e=dd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=dd(t.document)}return e}function Py(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function iD(t){var e=jC(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&BC(n.ownerDocument.documentElement,n)){if(r!==null&&Py(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=r0(n,s);var o=r0(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var sD=vi&&"documentMode"in document&&11>=document.documentMode,na=null,Lm=null,_u=null,Mm=!1;function i0(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Mm||na==null||na!==dd(r)||(r=na,"selectionStart"in r&&Py(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),_u&&zu(_u,r)||(_u=r,r=vd(Lm,"onSelect"),0<r.length&&(e=new Sy("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=na)))}function wh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ra={animationend:wh("Animation","AnimationEnd"),animationiteration:wh("Animation","AnimationIteration"),animationstart:wh("Animation","AnimationStart"),transitionend:wh("Transition","TransitionEnd")},fg={},$C={};vi&&($C=document.createElement("div").style,"AnimationEvent"in window||(delete ra.animationend.animation,delete ra.animationiteration.animation,delete ra.animationstart.animation),"TransitionEvent"in window||delete ra.transitionend.transition);function bf(t){if(fg[t])return fg[t];if(!ra[t])return t;var e=ra[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in $C)return fg[t]=e[n];return t}var zC=bf("animationend"),WC=bf("animationiteration"),HC=bf("animationstart"),qC=bf("transitionend"),KC=new Map,s0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Es(t,e){KC.set(t,e),So(e,[t])}for(var pg=0;pg<s0.length;pg++){var gg=s0[pg],oD=gg.toLowerCase(),aD=gg[0].toUpperCase()+gg.slice(1);Es(oD,"on"+aD)}Es(zC,"onAnimationEnd");Es(WC,"onAnimationIteration");Es(HC,"onAnimationStart");Es("dblclick","onDoubleClick");Es("focusin","onFocus");Es("focusout","onBlur");Es(qC,"onTransitionEnd");Aa("onMouseEnter",["mouseout","mouseover"]);Aa("onMouseLeave",["mouseout","mouseover"]);Aa("onPointerEnter",["pointerout","pointerover"]);Aa("onPointerLeave",["pointerout","pointerover"]);So("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));So("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));So("onBeforeInput",["compositionend","keypress","textInput","paste"]);So("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));So("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));So("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ru="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lD=new Set("cancel close invalid load scroll toggle".split(" ").concat(ru));function o0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,ox(r,e,void 0,t),t.currentTarget=null}function GC(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;o0(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;o0(i,a,c),s=l}}}if(pd)throw t=Nm,pd=!1,Nm=null,t}function Ze(t,e){var n=e[jm];n===void 0&&(n=e[jm]=new Set);var r=t+"__bubble";n.has(r)||(QC(e,t,2,!1),n.add(r))}function mg(t,e,n){var r=0;e&&(r|=4),QC(n,t,r,e)}var Eh="_reactListening"+Math.random().toString(36).slice(2);function Wu(t){if(!t[Eh]){t[Eh]=!0,nC.forEach(function(n){n!=="selectionchange"&&(lD.has(n)||mg(n,!1,t),mg(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Eh]||(e[Eh]=!0,mg("selectionchange",!1,e))}}function QC(t,e,n,r){switch(xC(e)){case 1:var i=Tx;break;case 4:i=Ix;break;default:i=Ty}n=i.bind(null,e,n,t),i=void 0,!bm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function _g(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=$s(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}yC(function(){var c=s,h=yy(n),d=[];e:{var f=KC.get(t);if(f!==void 0){var m=Sy,_=t;switch(t){case"keypress":if(qh(n)===0)break e;case"keydown":case"keyup":m=Fx;break;case"focusin":_="focus",m=cg;break;case"focusout":_="blur",m=cg;break;case"beforeblur":case"afterblur":m=cg;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=GE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=Rx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=jx;break;case zC:case WC:case HC:m=kx;break;case qC:m=zx;break;case"scroll":m=Sx;break;case"wheel":m=Hx;break;case"copy":case"cut":case"paste":m=Nx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=YE}var T=(e&4)!==0,I=!T&&t==="scroll",v=T?f!==null?f+"Capture":null:f;T=[];for(var y=c,R;y!==null;){R=y;var N=R.stateNode;if(R.tag===5&&N!==null&&(R=N,v!==null&&(N=Fu(y,v),N!=null&&T.push(Hu(y,N,R)))),I)break;y=y.return}0<T.length&&(f=new m(f,_,null,n,h),d.push({event:f,listeners:T}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==Am&&(_=n.relatedTarget||n.fromElement)&&($s(_)||_[wi]))break e;if((m||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,m?(_=n.relatedTarget||n.toElement,m=c,_=_?$s(_):null,_!==null&&(I=Co(_),_!==I||_.tag!==5&&_.tag!==6)&&(_=null)):(m=null,_=c),m!==_)){if(T=GE,N="onMouseLeave",v="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(T=YE,N="onPointerLeave",v="onPointerEnter",y="pointer"),I=m==null?f:ia(m),R=_==null?f:ia(_),f=new T(N,y+"leave",m,n,h),f.target=I,f.relatedTarget=R,N=null,$s(h)===c&&(T=new T(v,y+"enter",_,n,h),T.target=R,T.relatedTarget=I,N=T),I=N,m&&_)t:{for(T=m,v=_,y=0,R=T;R;R=Wo(R))y++;for(R=0,N=v;N;N=Wo(N))R++;for(;0<y-R;)T=Wo(T),y--;for(;0<R-y;)v=Wo(v),R--;for(;y--;){if(T===v||v!==null&&T===v.alternate)break t;T=Wo(T),v=Wo(v)}T=null}else T=null;m!==null&&a0(d,f,m,T,!1),_!==null&&I!==null&&a0(d,I,_,T,!0)}}e:{if(f=c?ia(c):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var M=Xx;else if(ZE(f))if(FC)M=nD;else{M=eD;var k=Zx}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(M=tD);if(M&&(M=M(t,c))){VC(d,M,n,h);break e}k&&k(t,f,c),t==="focusout"&&(k=f._wrapperState)&&k.controlled&&f.type==="number"&&Im(f,"number",f.value)}switch(k=c?ia(c):window,t){case"focusin":(ZE(k)||k.contentEditable==="true")&&(na=k,Lm=c,_u=null);break;case"focusout":_u=Lm=na=null;break;case"mousedown":Mm=!0;break;case"contextmenu":case"mouseup":case"dragend":Mm=!1,i0(d,n,h);break;case"selectionchange":if(sD)break;case"keydown":case"keyup":i0(d,n,h)}var S;if(Ry)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else ta?LC(t,n)&&(w="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(w="onCompositionStart");w&&(OC&&n.locale!=="ko"&&(ta||w!=="onCompositionStart"?w==="onCompositionEnd"&&ta&&(S=DC()):(Xi=h,Iy="value"in Xi?Xi.value:Xi.textContent,ta=!0)),k=vd(c,w),0<k.length&&(w=new QE(w,t,null,n,h),d.push({event:w,listeners:k}),S?w.data=S:(S=MC(n),S!==null&&(w.data=S)))),(S=Kx?Gx(t,n):Qx(t,n))&&(c=vd(c,"onBeforeInput"),0<c.length&&(h=new QE("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:c}),h.data=S))}GC(d,e)})}function Hu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function vd(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Fu(t,n),s!=null&&r.unshift(Hu(t,s,i)),s=Fu(t,e),s!=null&&r.push(Hu(t,s,i))),t=t.return}return r}function Wo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function a0(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Fu(n,s),l!=null&&o.unshift(Hu(n,l,a))):i||(l=Fu(n,s),l!=null&&o.push(Hu(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var uD=/\r\n?/g,cD=/\u0000|\uFFFD/g;function l0(t){return(typeof t=="string"?t:""+t).replace(uD,`
`).replace(cD,"")}function Th(t,e,n){if(e=l0(e),l0(t)!==e&&n)throw Error(W(425))}function wd(){}var Vm=null,Fm=null;function Um(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Bm=typeof setTimeout=="function"?setTimeout:void 0,hD=typeof clearTimeout=="function"?clearTimeout:void 0,u0=typeof Promise=="function"?Promise:void 0,dD=typeof queueMicrotask=="function"?queueMicrotask:typeof u0<"u"?function(t){return u0.resolve(null).then(t).catch(fD)}:Bm;function fD(t){setTimeout(function(){throw t})}function yg(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),ju(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ju(e)}function ss(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function c0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var sl=Math.random().toString(36).slice(2),Vr="__reactFiber$"+sl,qu="__reactProps$"+sl,wi="__reactContainer$"+sl,jm="__reactEvents$"+sl,pD="__reactListeners$"+sl,gD="__reactHandles$"+sl;function $s(t){var e=t[Vr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[wi]||n[Vr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=c0(t);t!==null;){if(n=t[Vr])return n;t=c0(t)}return e}t=n,n=t.parentNode}return null}function kc(t){return t=t[Vr]||t[wi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ia(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(W(33))}function Nf(t){return t[qu]||null}var $m=[],sa=-1;function Ts(t){return{current:t}}function tt(t){0>sa||(t.current=$m[sa],$m[sa]=null,sa--)}function Ye(t,e){sa++,$m[sa]=t.current,t.current=e}var gs={},un=Ts(gs),Pn=Ts(!1),no=gs;function ka(t,e){var n=t.type.contextTypes;if(!n)return gs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function An(t){return t=t.childContextTypes,t!=null}function Ed(){tt(Pn),tt(un)}function h0(t,e,n){if(un.current!==gs)throw Error(W(168));Ye(un,e),Ye(Pn,n)}function YC(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(W(108,ZN(t)||"Unknown",i));return ht({},n,r)}function Td(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||gs,no=un.current,Ye(un,t),Ye(Pn,Pn.current),!0}function d0(t,e,n){var r=t.stateNode;if(!r)throw Error(W(169));n?(t=YC(t,e,no),r.__reactInternalMemoizedMergedChildContext=t,tt(Pn),tt(un),Ye(un,t)):tt(Pn),Ye(Pn,n)}var ri=null,xf=!1,vg=!1;function JC(t){ri===null?ri=[t]:ri.push(t)}function mD(t){xf=!0,JC(t)}function Is(){if(!vg&&ri!==null){vg=!0;var t=0,e=Fe;try{var n=ri;for(Fe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ri=null,xf=!1}catch(i){throw ri!==null&&(ri=ri.slice(t+1)),TC(vy,Is),i}finally{Fe=e,vg=!1}}return null}var oa=[],aa=0,Id=null,Sd=0,er=[],tr=0,ro=null,oi=1,ai="";function Ds(t,e){oa[aa++]=Sd,oa[aa++]=Id,Id=t,Sd=e}function XC(t,e,n){er[tr++]=oi,er[tr++]=ai,er[tr++]=ro,ro=t;var r=oi;t=ai;var i=32-wr(r)-1;r&=~(1<<i),n+=1;var s=32-wr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,oi=1<<32-wr(e)+i|n<<i|r,ai=s+t}else oi=1<<s|n<<i|r,ai=t}function Ay(t){t.return!==null&&(Ds(t,1),XC(t,1,0))}function ky(t){for(;t===Id;)Id=oa[--aa],oa[aa]=null,Sd=oa[--aa],oa[aa]=null;for(;t===ro;)ro=er[--tr],er[tr]=null,ai=er[--tr],er[tr]=null,oi=er[--tr],er[tr]=null}var jn=null,Fn=null,ot=!1,mr=null;function ZC(t,e){var n=nr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function f0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,jn=t,Fn=ss(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,jn=t,Fn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ro!==null?{id:oi,overflow:ai}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=nr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,jn=t,Fn=null,!0):!1;default:return!1}}function zm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Wm(t){if(ot){var e=Fn;if(e){var n=e;if(!f0(t,e)){if(zm(t))throw Error(W(418));e=ss(n.nextSibling);var r=jn;e&&f0(t,e)?ZC(r,n):(t.flags=t.flags&-4097|2,ot=!1,jn=t)}}else{if(zm(t))throw Error(W(418));t.flags=t.flags&-4097|2,ot=!1,jn=t}}}function p0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;jn=t}function Ih(t){if(t!==jn)return!1;if(!ot)return p0(t),ot=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Um(t.type,t.memoizedProps)),e&&(e=Fn)){if(zm(t))throw e1(),Error(W(418));for(;e;)ZC(t,e),e=ss(e.nextSibling)}if(p0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(W(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Fn=ss(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Fn=null}}else Fn=jn?ss(t.stateNode.nextSibling):null;return!0}function e1(){for(var t=Fn;t;)t=ss(t.nextSibling)}function ba(){Fn=jn=null,ot=!1}function by(t){mr===null?mr=[t]:mr.push(t)}var _D=bi.ReactCurrentBatchConfig;function jl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(W(309));var r=n.stateNode}if(!r)throw Error(W(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(W(284));if(!n._owner)throw Error(W(290,t))}return t}function Sh(t,e){throw t=Object.prototype.toString.call(e),Error(W(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function g0(t){var e=t._init;return e(t._payload)}function t1(t){function e(v,y){if(t){var R=v.deletions;R===null?(v.deletions=[y],v.flags|=16):R.push(y)}}function n(v,y){if(!t)return null;for(;y!==null;)e(v,y),y=y.sibling;return null}function r(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function i(v,y){return v=us(v,y),v.index=0,v.sibling=null,v}function s(v,y,R){return v.index=R,t?(R=v.alternate,R!==null?(R=R.index,R<y?(v.flags|=2,y):R):(v.flags|=2,y)):(v.flags|=1048576,y)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,y,R,N){return y===null||y.tag!==6?(y=Rg(R,v.mode,N),y.return=v,y):(y=i(y,R),y.return=v,y)}function l(v,y,R,N){var M=R.type;return M===ea?h(v,y,R.props.children,N,R.key):y!==null&&(y.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===zi&&g0(M)===y.type)?(N=i(y,R.props),N.ref=jl(v,y,R),N.return=v,N):(N=Zh(R.type,R.key,R.props,null,v.mode,N),N.ref=jl(v,y,R),N.return=v,N)}function c(v,y,R,N){return y===null||y.tag!==4||y.stateNode.containerInfo!==R.containerInfo||y.stateNode.implementation!==R.implementation?(y=Pg(R,v.mode,N),y.return=v,y):(y=i(y,R.children||[]),y.return=v,y)}function h(v,y,R,N,M){return y===null||y.tag!==7?(y=Xs(R,v.mode,N,M),y.return=v,y):(y=i(y,R),y.return=v,y)}function d(v,y,R){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Rg(""+y,v.mode,R),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case fh:return R=Zh(y.type,y.key,y.props,null,v.mode,R),R.ref=jl(v,null,y),R.return=v,R;case Zo:return y=Pg(y,v.mode,R),y.return=v,y;case zi:var N=y._init;return d(v,N(y._payload),R)}if(tu(y)||Ml(y))return y=Xs(y,v.mode,R,null),y.return=v,y;Sh(v,y)}return null}function f(v,y,R,N){var M=y!==null?y.key:null;if(typeof R=="string"&&R!==""||typeof R=="number")return M!==null?null:a(v,y,""+R,N);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case fh:return R.key===M?l(v,y,R,N):null;case Zo:return R.key===M?c(v,y,R,N):null;case zi:return M=R._init,f(v,y,M(R._payload),N)}if(tu(R)||Ml(R))return M!==null?null:h(v,y,R,N,null);Sh(v,R)}return null}function m(v,y,R,N,M){if(typeof N=="string"&&N!==""||typeof N=="number")return v=v.get(R)||null,a(y,v,""+N,M);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case fh:return v=v.get(N.key===null?R:N.key)||null,l(y,v,N,M);case Zo:return v=v.get(N.key===null?R:N.key)||null,c(y,v,N,M);case zi:var k=N._init;return m(v,y,R,k(N._payload),M)}if(tu(N)||Ml(N))return v=v.get(R)||null,h(y,v,N,M,null);Sh(y,N)}return null}function _(v,y,R,N){for(var M=null,k=null,S=y,w=y=0,C=null;S!==null&&w<R.length;w++){S.index>w?(C=S,S=null):C=S.sibling;var A=f(v,S,R[w],N);if(A===null){S===null&&(S=C);break}t&&S&&A.alternate===null&&e(v,S),y=s(A,y,w),k===null?M=A:k.sibling=A,k=A,S=C}if(w===R.length)return n(v,S),ot&&Ds(v,w),M;if(S===null){for(;w<R.length;w++)S=d(v,R[w],N),S!==null&&(y=s(S,y,w),k===null?M=S:k.sibling=S,k=S);return ot&&Ds(v,w),M}for(S=r(v,S);w<R.length;w++)C=m(S,v,w,R[w],N),C!==null&&(t&&C.alternate!==null&&S.delete(C.key===null?w:C.key),y=s(C,y,w),k===null?M=C:k.sibling=C,k=C);return t&&S.forEach(function(b){return e(v,b)}),ot&&Ds(v,w),M}function T(v,y,R,N){var M=Ml(R);if(typeof M!="function")throw Error(W(150));if(R=M.call(R),R==null)throw Error(W(151));for(var k=M=null,S=y,w=y=0,C=null,A=R.next();S!==null&&!A.done;w++,A=R.next()){S.index>w?(C=S,S=null):C=S.sibling;var b=f(v,S,A.value,N);if(b===null){S===null&&(S=C);break}t&&S&&b.alternate===null&&e(v,S),y=s(b,y,w),k===null?M=b:k.sibling=b,k=b,S=C}if(A.done)return n(v,S),ot&&Ds(v,w),M;if(S===null){for(;!A.done;w++,A=R.next())A=d(v,A.value,N),A!==null&&(y=s(A,y,w),k===null?M=A:k.sibling=A,k=A);return ot&&Ds(v,w),M}for(S=r(v,S);!A.done;w++,A=R.next())A=m(S,v,w,A.value,N),A!==null&&(t&&A.alternate!==null&&S.delete(A.key===null?w:A.key),y=s(A,y,w),k===null?M=A:k.sibling=A,k=A);return t&&S.forEach(function(D){return e(v,D)}),ot&&Ds(v,w),M}function I(v,y,R,N){if(typeof R=="object"&&R!==null&&R.type===ea&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case fh:e:{for(var M=R.key,k=y;k!==null;){if(k.key===M){if(M=R.type,M===ea){if(k.tag===7){n(v,k.sibling),y=i(k,R.props.children),y.return=v,v=y;break e}}else if(k.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===zi&&g0(M)===k.type){n(v,k.sibling),y=i(k,R.props),y.ref=jl(v,k,R),y.return=v,v=y;break e}n(v,k);break}else e(v,k);k=k.sibling}R.type===ea?(y=Xs(R.props.children,v.mode,N,R.key),y.return=v,v=y):(N=Zh(R.type,R.key,R.props,null,v.mode,N),N.ref=jl(v,y,R),N.return=v,v=N)}return o(v);case Zo:e:{for(k=R.key;y!==null;){if(y.key===k)if(y.tag===4&&y.stateNode.containerInfo===R.containerInfo&&y.stateNode.implementation===R.implementation){n(v,y.sibling),y=i(y,R.children||[]),y.return=v,v=y;break e}else{n(v,y);break}else e(v,y);y=y.sibling}y=Pg(R,v.mode,N),y.return=v,v=y}return o(v);case zi:return k=R._init,I(v,y,k(R._payload),N)}if(tu(R))return _(v,y,R,N);if(Ml(R))return T(v,y,R,N);Sh(v,R)}return typeof R=="string"&&R!==""||typeof R=="number"?(R=""+R,y!==null&&y.tag===6?(n(v,y.sibling),y=i(y,R),y.return=v,v=y):(n(v,y),y=Rg(R,v.mode,N),y.return=v,v=y),o(v)):n(v,y)}return I}var Na=t1(!0),n1=t1(!1),Cd=Ts(null),Rd=null,la=null,Ny=null;function xy(){Ny=la=Rd=null}function Dy(t){var e=Cd.current;tt(Cd),t._currentValue=e}function Hm(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function _a(t,e){Rd=t,Ny=la=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Sn=!0),t.firstContext=null)}function or(t){var e=t._currentValue;if(Ny!==t)if(t={context:t,memoizedValue:e,next:null},la===null){if(Rd===null)throw Error(W(308));la=t,Rd.dependencies={lanes:0,firstContext:t}}else la=la.next=t;return e}var zs=null;function Oy(t){zs===null?zs=[t]:zs.push(t)}function r1(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Oy(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ei(t,r)}function Ei(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Wi=!1;function Ly(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function i1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function fi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function os(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,be&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ei(t,n)}return i=r.interleaved,i===null?(e.next=e,Oy(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ei(t,n)}function Kh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,wy(t,n)}}function m0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Pd(t,e,n,r){var i=t.updateQueue;Wi=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,h=c=l=null,a=s;do{var f=a.lane,m=a.eventTime;if((r&f)===f){h!==null&&(h=h.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=t,T=a;switch(f=e,m=n,T.tag){case 1:if(_=T.payload,typeof _=="function"){d=_.call(m,d,f);break e}d=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=T.payload,f=typeof _=="function"?_.call(m,d,f):_,f==null)break e;d=ht({},d,f);break e;case 2:Wi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=m,l=d):h=h.next=m,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(1);if(h===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);so|=o,t.lanes=o,t.memoizedState=d}}function _0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(W(191,i));i.call(r)}}}var bc={},$r=Ts(bc),Ku=Ts(bc),Gu=Ts(bc);function Ws(t){if(t===bc)throw Error(W(174));return t}function My(t,e){switch(Ye(Gu,e),Ye(Ku,t),Ye($r,bc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Cm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Cm(e,t)}tt($r),Ye($r,e)}function xa(){tt($r),tt(Ku),tt(Gu)}function s1(t){Ws(Gu.current);var e=Ws($r.current),n=Cm(e,t.type);e!==n&&(Ye(Ku,t),Ye($r,n))}function Vy(t){Ku.current===t&&(tt($r),tt(Ku))}var lt=Ts(0);function Ad(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var wg=[];function Fy(){for(var t=0;t<wg.length;t++)wg[t]._workInProgressVersionPrimary=null;wg.length=0}var Gh=bi.ReactCurrentDispatcher,Eg=bi.ReactCurrentBatchConfig,io=0,ct=null,kt=null,Lt=null,kd=!1,yu=!1,Qu=0,yD=0;function Xt(){throw Error(W(321))}function Uy(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ir(t[n],e[n]))return!1;return!0}function By(t,e,n,r,i,s){if(io=s,ct=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Gh.current=t===null||t.memoizedState===null?TD:ID,t=n(r,i),yu){s=0;do{if(yu=!1,Qu=0,25<=s)throw Error(W(301));s+=1,Lt=kt=null,e.updateQueue=null,Gh.current=SD,t=n(r,i)}while(yu)}if(Gh.current=bd,e=kt!==null&&kt.next!==null,io=0,Lt=kt=ct=null,kd=!1,e)throw Error(W(300));return t}function jy(){var t=Qu!==0;return Qu=0,t}function Mr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lt===null?ct.memoizedState=Lt=t:Lt=Lt.next=t,Lt}function ar(){if(kt===null){var t=ct.alternate;t=t!==null?t.memoizedState:null}else t=kt.next;var e=Lt===null?ct.memoizedState:Lt.next;if(e!==null)Lt=e,kt=t;else{if(t===null)throw Error(W(310));kt=t,t={memoizedState:kt.memoizedState,baseState:kt.baseState,baseQueue:kt.baseQueue,queue:kt.queue,next:null},Lt===null?ct.memoizedState=Lt=t:Lt=Lt.next=t}return Lt}function Yu(t,e){return typeof e=="function"?e(t):e}function Tg(t){var e=ar(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=kt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((io&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,ct.lanes|=h,so|=h}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Ir(r,e.memoizedState)||(Sn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,ct.lanes|=s,so|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ig(t){var e=ar(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Ir(s,e.memoizedState)||(Sn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function o1(){}function a1(t,e){var n=ct,r=ar(),i=e(),s=!Ir(r.memoizedState,i);if(s&&(r.memoizedState=i,Sn=!0),r=r.queue,$y(c1.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Lt!==null&&Lt.memoizedState.tag&1){if(n.flags|=2048,Ju(9,u1.bind(null,n,r,i,e),void 0,null),Vt===null)throw Error(W(349));io&30||l1(n,e,i)}return i}function l1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ct.updateQueue,e===null?(e={lastEffect:null,stores:null},ct.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function u1(t,e,n,r){e.value=n,e.getSnapshot=r,h1(e)&&d1(t)}function c1(t,e,n){return n(function(){h1(e)&&d1(t)})}function h1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ir(t,n)}catch{return!0}}function d1(t){var e=Ei(t,1);e!==null&&Er(e,t,1,-1)}function y0(t){var e=Mr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Yu,lastRenderedState:t},e.queue=t,t=t.dispatch=ED.bind(null,ct,t),[e.memoizedState,t]}function Ju(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ct.updateQueue,e===null?(e={lastEffect:null,stores:null},ct.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function f1(){return ar().memoizedState}function Qh(t,e,n,r){var i=Mr();ct.flags|=t,i.memoizedState=Ju(1|e,n,void 0,r===void 0?null:r)}function Df(t,e,n,r){var i=ar();r=r===void 0?null:r;var s=void 0;if(kt!==null){var o=kt.memoizedState;if(s=o.destroy,r!==null&&Uy(r,o.deps)){i.memoizedState=Ju(e,n,s,r);return}}ct.flags|=t,i.memoizedState=Ju(1|e,n,s,r)}function v0(t,e){return Qh(8390656,8,t,e)}function $y(t,e){return Df(2048,8,t,e)}function p1(t,e){return Df(4,2,t,e)}function g1(t,e){return Df(4,4,t,e)}function m1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function _1(t,e,n){return n=n!=null?n.concat([t]):null,Df(4,4,m1.bind(null,e,t),n)}function zy(){}function y1(t,e){var n=ar();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Uy(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function v1(t,e){var n=ar();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Uy(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function w1(t,e,n){return io&21?(Ir(n,e)||(n=CC(),ct.lanes|=n,so|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Sn=!0),t.memoizedState=n)}function vD(t,e){var n=Fe;Fe=n!==0&&4>n?n:4,t(!0);var r=Eg.transition;Eg.transition={};try{t(!1),e()}finally{Fe=n,Eg.transition=r}}function E1(){return ar().memoizedState}function wD(t,e,n){var r=ls(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},T1(t))I1(e,n);else if(n=r1(t,e,n,r),n!==null){var i=mn();Er(n,t,r,i),S1(n,e,r)}}function ED(t,e,n){var r=ls(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(T1(t))I1(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Ir(a,o)){var l=e.interleaved;l===null?(i.next=i,Oy(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=r1(t,e,i,r),n!==null&&(i=mn(),Er(n,t,r,i),S1(n,e,r))}}function T1(t){var e=t.alternate;return t===ct||e!==null&&e===ct}function I1(t,e){yu=kd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function S1(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,wy(t,n)}}var bd={readContext:or,useCallback:Xt,useContext:Xt,useEffect:Xt,useImperativeHandle:Xt,useInsertionEffect:Xt,useLayoutEffect:Xt,useMemo:Xt,useReducer:Xt,useRef:Xt,useState:Xt,useDebugValue:Xt,useDeferredValue:Xt,useTransition:Xt,useMutableSource:Xt,useSyncExternalStore:Xt,useId:Xt,unstable_isNewReconciler:!1},TD={readContext:or,useCallback:function(t,e){return Mr().memoizedState=[t,e===void 0?null:e],t},useContext:or,useEffect:v0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Qh(4194308,4,m1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Qh(4194308,4,t,e)},useInsertionEffect:function(t,e){return Qh(4,2,t,e)},useMemo:function(t,e){var n=Mr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Mr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=wD.bind(null,ct,t),[r.memoizedState,t]},useRef:function(t){var e=Mr();return t={current:t},e.memoizedState=t},useState:y0,useDebugValue:zy,useDeferredValue:function(t){return Mr().memoizedState=t},useTransition:function(){var t=y0(!1),e=t[0];return t=vD.bind(null,t[1]),Mr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ct,i=Mr();if(ot){if(n===void 0)throw Error(W(407));n=n()}else{if(n=e(),Vt===null)throw Error(W(349));io&30||l1(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,v0(c1.bind(null,r,s,t),[t]),r.flags|=2048,Ju(9,u1.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Mr(),e=Vt.identifierPrefix;if(ot){var n=ai,r=oi;n=(r&~(1<<32-wr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Qu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=yD++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ID={readContext:or,useCallback:y1,useContext:or,useEffect:$y,useImperativeHandle:_1,useInsertionEffect:p1,useLayoutEffect:g1,useMemo:v1,useReducer:Tg,useRef:f1,useState:function(){return Tg(Yu)},useDebugValue:zy,useDeferredValue:function(t){var e=ar();return w1(e,kt.memoizedState,t)},useTransition:function(){var t=Tg(Yu)[0],e=ar().memoizedState;return[t,e]},useMutableSource:o1,useSyncExternalStore:a1,useId:E1,unstable_isNewReconciler:!1},SD={readContext:or,useCallback:y1,useContext:or,useEffect:$y,useImperativeHandle:_1,useInsertionEffect:p1,useLayoutEffect:g1,useMemo:v1,useReducer:Ig,useRef:f1,useState:function(){return Ig(Yu)},useDebugValue:zy,useDeferredValue:function(t){var e=ar();return kt===null?e.memoizedState=t:w1(e,kt.memoizedState,t)},useTransition:function(){var t=Ig(Yu)[0],e=ar().memoizedState;return[t,e]},useMutableSource:o1,useSyncExternalStore:a1,useId:E1,unstable_isNewReconciler:!1};function fr(t,e){if(t&&t.defaultProps){e=ht({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function qm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ht({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Of={isMounted:function(t){return(t=t._reactInternals)?Co(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=mn(),i=ls(t),s=fi(r,i);s.payload=e,n!=null&&(s.callback=n),e=os(t,s,i),e!==null&&(Er(e,t,i,r),Kh(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=mn(),i=ls(t),s=fi(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=os(t,s,i),e!==null&&(Er(e,t,i,r),Kh(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=mn(),r=ls(t),i=fi(n,r);i.tag=2,e!=null&&(i.callback=e),e=os(t,i,r),e!==null&&(Er(e,t,r,n),Kh(e,t,r))}};function w0(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!zu(n,r)||!zu(i,s):!0}function C1(t,e,n){var r=!1,i=gs,s=e.contextType;return typeof s=="object"&&s!==null?s=or(s):(i=An(e)?no:un.current,r=e.contextTypes,s=(r=r!=null)?ka(t,i):gs),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Of,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function E0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Of.enqueueReplaceState(e,e.state,null)}function Km(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Ly(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=or(s):(s=An(e)?no:un.current,i.context=ka(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(qm(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Of.enqueueReplaceState(i,i.state,null),Pd(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Da(t,e){try{var n="",r=e;do n+=XN(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Sg(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Gm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var CD=typeof WeakMap=="function"?WeakMap:Map;function R1(t,e,n){n=fi(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){xd||(xd=!0,i_=r),Gm(t,e)},n}function P1(t,e,n){n=fi(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Gm(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Gm(t,e),typeof r!="function"&&(as===null?as=new Set([this]):as.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function T0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new CD;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=UD.bind(null,t,e,n),e.then(t,t))}function I0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function S0(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=fi(-1,1),e.tag=2,os(n,e,1))),n.lanes|=1),t)}var RD=bi.ReactCurrentOwner,Sn=!1;function gn(t,e,n,r){e.child=t===null?n1(e,null,n,r):Na(e,t.child,n,r)}function C0(t,e,n,r,i){n=n.render;var s=e.ref;return _a(e,i),r=By(t,e,n,r,s,i),n=jy(),t!==null&&!Sn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ti(t,e,i)):(ot&&n&&Ay(e),e.flags|=1,gn(t,e,r,i),e.child)}function R0(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Jy(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,A1(t,e,s,r,i)):(t=Zh(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:zu,n(o,r)&&t.ref===e.ref)return Ti(t,e,i)}return e.flags|=1,t=us(s,r),t.ref=e.ref,t.return=e,e.child=t}function A1(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(zu(s,r)&&t.ref===e.ref)if(Sn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Sn=!0);else return e.lanes=t.lanes,Ti(t,e,i)}return Qm(t,e,n,r,i)}function k1(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ye(ca,Ln),Ln|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ye(ca,Ln),Ln|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ye(ca,Ln),Ln|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ye(ca,Ln),Ln|=r;return gn(t,e,i,n),e.child}function b1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Qm(t,e,n,r,i){var s=An(n)?no:un.current;return s=ka(e,s),_a(e,i),n=By(t,e,n,r,s,i),r=jy(),t!==null&&!Sn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ti(t,e,i)):(ot&&r&&Ay(e),e.flags|=1,gn(t,e,n,i),e.child)}function P0(t,e,n,r,i){if(An(n)){var s=!0;Td(e)}else s=!1;if(_a(e,i),e.stateNode===null)Yh(t,e),C1(e,n,r),Km(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=or(c):(c=An(n)?no:un.current,c=ka(e,c));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&E0(e,o,r,c),Wi=!1;var f=e.memoizedState;o.state=f,Pd(e,r,o,i),l=e.memoizedState,a!==r||f!==l||Pn.current||Wi?(typeof h=="function"&&(qm(e,n,h,r),l=e.memoizedState),(a=Wi||w0(e,n,a,r,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,i1(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:fr(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=or(l):(l=An(n)?no:un.current,l=ka(e,l));var m=n.getDerivedStateFromProps;(h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&E0(e,o,r,l),Wi=!1,f=e.memoizedState,o.state=f,Pd(e,r,o,i);var _=e.memoizedState;a!==d||f!==_||Pn.current||Wi?(typeof m=="function"&&(qm(e,n,m,r),_=e.memoizedState),(c=Wi||w0(e,n,c,r,f,_,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),o.props=r,o.state=_,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Ym(t,e,n,r,s,i)}function Ym(t,e,n,r,i,s){b1(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&d0(e,n,!1),Ti(t,e,s);r=e.stateNode,RD.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Na(e,t.child,null,s),e.child=Na(e,null,a,s)):gn(t,e,a,s),e.memoizedState=r.state,i&&d0(e,n,!0),e.child}function N1(t){var e=t.stateNode;e.pendingContext?h0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&h0(t,e.context,!1),My(t,e.containerInfo)}function A0(t,e,n,r,i){return ba(),by(i),e.flags|=256,gn(t,e,n,r),e.child}var Jm={dehydrated:null,treeContext:null,retryLane:0};function Xm(t){return{baseLanes:t,cachePool:null,transitions:null}}function x1(t,e,n){var r=e.pendingProps,i=lt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ye(lt,i&1),t===null)return Wm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Vf(o,r,0,null),t=Xs(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Xm(n),e.memoizedState=Jm,t):Wy(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return PD(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=us(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=us(a,s):(s=Xs(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Xm(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Jm,r}return s=t.child,t=s.sibling,r=us(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Wy(t,e){return e=Vf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ch(t,e,n,r){return r!==null&&by(r),Na(e,t.child,null,n),t=Wy(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function PD(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Sg(Error(W(422))),Ch(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Vf({mode:"visible",children:r.children},i,0,null),s=Xs(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Na(e,t.child,null,o),e.child.memoizedState=Xm(o),e.memoizedState=Jm,s);if(!(e.mode&1))return Ch(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(W(419)),r=Sg(s,r,void 0),Ch(t,e,o,r)}if(a=(o&t.childLanes)!==0,Sn||a){if(r=Vt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ei(t,i),Er(r,t,i,-1))}return Yy(),r=Sg(Error(W(421))),Ch(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=BD.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Fn=ss(i.nextSibling),jn=e,ot=!0,mr=null,t!==null&&(er[tr++]=oi,er[tr++]=ai,er[tr++]=ro,oi=t.id,ai=t.overflow,ro=e),e=Wy(e,r.children),e.flags|=4096,e)}function k0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Hm(t.return,e,n)}function Cg(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function D1(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(gn(t,e,r.children,n),r=lt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&k0(t,n,e);else if(t.tag===19)k0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ye(lt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Ad(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Cg(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Ad(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Cg(e,!0,n,null,s);break;case"together":Cg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Yh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ti(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),so|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(W(153));if(e.child!==null){for(t=e.child,n=us(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=us(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function AD(t,e,n){switch(e.tag){case 3:N1(e),ba();break;case 5:s1(e);break;case 1:An(e.type)&&Td(e);break;case 4:My(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ye(Cd,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ye(lt,lt.current&1),e.flags|=128,null):n&e.child.childLanes?x1(t,e,n):(Ye(lt,lt.current&1),t=Ti(t,e,n),t!==null?t.sibling:null);Ye(lt,lt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return D1(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ye(lt,lt.current),r)break;return null;case 22:case 23:return e.lanes=0,k1(t,e,n)}return Ti(t,e,n)}var O1,Zm,L1,M1;O1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Zm=function(){};L1=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ws($r.current);var s=null;switch(n){case"input":i=Em(t,i),r=Em(t,r),s=[];break;case"select":i=ht({},i,{value:void 0}),r=ht({},r,{value:void 0}),s=[];break;case"textarea":i=Sm(t,i),r=Sm(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=wd)}Rm(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Mu.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Mu.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ze("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};M1=function(t,e,n,r){n!==r&&(e.flags|=4)};function $l(t,e){if(!ot)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Zt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function kD(t,e,n){var r=e.pendingProps;switch(ky(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zt(e),null;case 1:return An(e.type)&&Ed(),Zt(e),null;case 3:return r=e.stateNode,xa(),tt(Pn),tt(un),Fy(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ih(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,mr!==null&&(a_(mr),mr=null))),Zm(t,e),Zt(e),null;case 5:Vy(e);var i=Ws(Gu.current);if(n=e.type,t!==null&&e.stateNode!=null)L1(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(W(166));return Zt(e),null}if(t=Ws($r.current),Ih(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Vr]=e,r[qu]=s,t=(e.mode&1)!==0,n){case"dialog":Ze("cancel",r),Ze("close",r);break;case"iframe":case"object":case"embed":Ze("load",r);break;case"video":case"audio":for(i=0;i<ru.length;i++)Ze(ru[i],r);break;case"source":Ze("error",r);break;case"img":case"image":case"link":Ze("error",r),Ze("load",r);break;case"details":Ze("toggle",r);break;case"input":FE(r,s),Ze("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ze("invalid",r);break;case"textarea":BE(r,s),Ze("invalid",r)}Rm(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Th(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Th(r.textContent,a,t),i=["children",""+a]):Mu.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ze("scroll",r)}switch(n){case"input":ph(r),UE(r,s,!0);break;case"textarea":ph(r),jE(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=wd)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=cC(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Vr]=e,t[qu]=r,O1(t,e,!1,!1),e.stateNode=t;e:{switch(o=Pm(n,r),n){case"dialog":Ze("cancel",t),Ze("close",t),i=r;break;case"iframe":case"object":case"embed":Ze("load",t),i=r;break;case"video":case"audio":for(i=0;i<ru.length;i++)Ze(ru[i],t);i=r;break;case"source":Ze("error",t),i=r;break;case"img":case"image":case"link":Ze("error",t),Ze("load",t),i=r;break;case"details":Ze("toggle",t),i=r;break;case"input":FE(t,r),i=Em(t,r),Ze("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ht({},r,{value:void 0}),Ze("invalid",t);break;case"textarea":BE(t,r),i=Sm(t,r),Ze("invalid",t);break;default:i=r}Rm(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?fC(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&hC(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Vu(t,l):typeof l=="number"&&Vu(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Mu.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ze("scroll",t):l!=null&&py(t,s,l,o))}switch(n){case"input":ph(t),UE(t,r,!1);break;case"textarea":ph(t),jE(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ps(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?fa(t,!!r.multiple,s,!1):r.defaultValue!=null&&fa(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=wd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Zt(e),null;case 6:if(t&&e.stateNode!=null)M1(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(W(166));if(n=Ws(Gu.current),Ws($r.current),Ih(e)){if(r=e.stateNode,n=e.memoizedProps,r[Vr]=e,(s=r.nodeValue!==n)&&(t=jn,t!==null))switch(t.tag){case 3:Th(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Th(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Vr]=e,e.stateNode=r}return Zt(e),null;case 13:if(tt(lt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ot&&Fn!==null&&e.mode&1&&!(e.flags&128))e1(),ba(),e.flags|=98560,s=!1;else if(s=Ih(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(W(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(W(317));s[Vr]=e}else ba(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Zt(e),s=!1}else mr!==null&&(a_(mr),mr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||lt.current&1?bt===0&&(bt=3):Yy())),e.updateQueue!==null&&(e.flags|=4),Zt(e),null);case 4:return xa(),Zm(t,e),t===null&&Wu(e.stateNode.containerInfo),Zt(e),null;case 10:return Dy(e.type._context),Zt(e),null;case 17:return An(e.type)&&Ed(),Zt(e),null;case 19:if(tt(lt),s=e.memoizedState,s===null)return Zt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)$l(s,!1);else{if(bt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ad(t),o!==null){for(e.flags|=128,$l(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ye(lt,lt.current&1|2),e.child}t=t.sibling}s.tail!==null&&_t()>Oa&&(e.flags|=128,r=!0,$l(s,!1),e.lanes=4194304)}else{if(!r)if(t=Ad(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),$l(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ot)return Zt(e),null}else 2*_t()-s.renderingStartTime>Oa&&n!==1073741824&&(e.flags|=128,r=!0,$l(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=_t(),e.sibling=null,n=lt.current,Ye(lt,r?n&1|2:n&1),e):(Zt(e),null);case 22:case 23:return Qy(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ln&1073741824&&(Zt(e),e.subtreeFlags&6&&(e.flags|=8192)):Zt(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function bD(t,e){switch(ky(e),e.tag){case 1:return An(e.type)&&Ed(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return xa(),tt(Pn),tt(un),Fy(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Vy(e),null;case 13:if(tt(lt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(W(340));ba()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return tt(lt),null;case 4:return xa(),null;case 10:return Dy(e.type._context),null;case 22:case 23:return Qy(),null;case 24:return null;default:return null}}var Rh=!1,rn=!1,ND=typeof WeakSet=="function"?WeakSet:Set,Y=null;function ua(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){gt(t,e,r)}else n.current=null}function e_(t,e,n){try{n()}catch(r){gt(t,e,r)}}var b0=!1;function xD(t,e){if(Vm=_d,t=jC(),Py(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,d=t,f=null;t:for(;;){for(var m;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)f=d,d=m;for(;;){if(d===t)break t;if(f===n&&++c===i&&(a=o),f===s&&++h===r&&(l=o),(m=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Fm={focusedElem:t,selectionRange:n},_d=!1,Y=e;Y!==null;)if(e=Y,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Y=t;else for(;Y!==null;){e=Y;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var T=_.memoizedProps,I=_.memoizedState,v=e.stateNode,y=v.getSnapshotBeforeUpdate(e.elementType===e.type?T:fr(e.type,T),I);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var R=e.stateNode.containerInfo;R.nodeType===1?R.textContent="":R.nodeType===9&&R.documentElement&&R.removeChild(R.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(N){gt(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,Y=t;break}Y=e.return}return _=b0,b0=!1,_}function vu(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&e_(e,n,s)}i=i.next}while(i!==r)}}function Lf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function t_(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function V1(t){var e=t.alternate;e!==null&&(t.alternate=null,V1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Vr],delete e[qu],delete e[jm],delete e[pD],delete e[gD])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function F1(t){return t.tag===5||t.tag===3||t.tag===4}function N0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||F1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function n_(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=wd));else if(r!==4&&(t=t.child,t!==null))for(n_(t,e,n),t=t.sibling;t!==null;)n_(t,e,n),t=t.sibling}function r_(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(r_(t,e,n),t=t.sibling;t!==null;)r_(t,e,n),t=t.sibling}var jt=null,pr=!1;function Bi(t,e,n){for(n=n.child;n!==null;)U1(t,e,n),n=n.sibling}function U1(t,e,n){if(jr&&typeof jr.onCommitFiberUnmount=="function")try{jr.onCommitFiberUnmount(Pf,n)}catch{}switch(n.tag){case 5:rn||ua(n,e);case 6:var r=jt,i=pr;jt=null,Bi(t,e,n),jt=r,pr=i,jt!==null&&(pr?(t=jt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):jt.removeChild(n.stateNode));break;case 18:jt!==null&&(pr?(t=jt,n=n.stateNode,t.nodeType===8?yg(t.parentNode,n):t.nodeType===1&&yg(t,n),ju(t)):yg(jt,n.stateNode));break;case 4:r=jt,i=pr,jt=n.stateNode.containerInfo,pr=!0,Bi(t,e,n),jt=r,pr=i;break;case 0:case 11:case 14:case 15:if(!rn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&e_(n,e,o),i=i.next}while(i!==r)}Bi(t,e,n);break;case 1:if(!rn&&(ua(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){gt(n,e,a)}Bi(t,e,n);break;case 21:Bi(t,e,n);break;case 22:n.mode&1?(rn=(r=rn)||n.memoizedState!==null,Bi(t,e,n),rn=r):Bi(t,e,n);break;default:Bi(t,e,n)}}function x0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new ND),e.forEach(function(r){var i=jD.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function dr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:jt=a.stateNode,pr=!1;break e;case 3:jt=a.stateNode.containerInfo,pr=!0;break e;case 4:jt=a.stateNode.containerInfo,pr=!0;break e}a=a.return}if(jt===null)throw Error(W(160));U1(s,o,i),jt=null,pr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){gt(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)B1(e,t),e=e.sibling}function B1(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(dr(e,t),Dr(t),r&4){try{vu(3,t,t.return),Lf(3,t)}catch(T){gt(t,t.return,T)}try{vu(5,t,t.return)}catch(T){gt(t,t.return,T)}}break;case 1:dr(e,t),Dr(t),r&512&&n!==null&&ua(n,n.return);break;case 5:if(dr(e,t),Dr(t),r&512&&n!==null&&ua(n,n.return),t.flags&32){var i=t.stateNode;try{Vu(i,"")}catch(T){gt(t,t.return,T)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&lC(i,s),Pm(a,o);var c=Pm(a,s);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?fC(i,d):h==="dangerouslySetInnerHTML"?hC(i,d):h==="children"?Vu(i,d):py(i,h,d,c)}switch(a){case"input":Tm(i,s);break;case"textarea":uC(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?fa(i,!!s.multiple,m,!1):f!==!!s.multiple&&(s.defaultValue!=null?fa(i,!!s.multiple,s.defaultValue,!0):fa(i,!!s.multiple,s.multiple?[]:"",!1))}i[qu]=s}catch(T){gt(t,t.return,T)}}break;case 6:if(dr(e,t),Dr(t),r&4){if(t.stateNode===null)throw Error(W(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(T){gt(t,t.return,T)}}break;case 3:if(dr(e,t),Dr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ju(e.containerInfo)}catch(T){gt(t,t.return,T)}break;case 4:dr(e,t),Dr(t);break;case 13:dr(e,t),Dr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Ky=_t())),r&4&&x0(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(rn=(c=rn)||h,dr(e,t),rn=c):dr(e,t),Dr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(Y=t,h=t.child;h!==null;){for(d=Y=h;Y!==null;){switch(f=Y,m=f.child,f.tag){case 0:case 11:case 14:case 15:vu(4,f,f.return);break;case 1:ua(f,f.return);var _=f.stateNode;if(typeof _.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(T){gt(r,n,T)}}break;case 5:ua(f,f.return);break;case 22:if(f.memoizedState!==null){O0(d);continue}}m!==null?(m.return=f,Y=m):O0(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=dC("display",o))}catch(T){gt(t,t.return,T)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(T){gt(t,t.return,T)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:dr(e,t),Dr(t),r&4&&x0(t);break;case 21:break;default:dr(e,t),Dr(t)}}function Dr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(F1(n)){var r=n;break e}n=n.return}throw Error(W(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Vu(i,""),r.flags&=-33);var s=N0(t);r_(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=N0(t);n_(t,a,o);break;default:throw Error(W(161))}}catch(l){gt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function DD(t,e,n){Y=t,j1(t)}function j1(t,e,n){for(var r=(t.mode&1)!==0;Y!==null;){var i=Y,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Rh;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||rn;a=Rh;var c=rn;if(Rh=o,(rn=l)&&!c)for(Y=i;Y!==null;)o=Y,l=o.child,o.tag===22&&o.memoizedState!==null?L0(i):l!==null?(l.return=o,Y=l):L0(i);for(;s!==null;)Y=s,j1(s),s=s.sibling;Y=i,Rh=a,rn=c}D0(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Y=s):D0(t)}}function D0(t){for(;Y!==null;){var e=Y;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:rn||Lf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!rn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:fr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&_0(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}_0(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&ju(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}rn||e.flags&512&&t_(e)}catch(f){gt(e,e.return,f)}}if(e===t){Y=null;break}if(n=e.sibling,n!==null){n.return=e.return,Y=n;break}Y=e.return}}function O0(t){for(;Y!==null;){var e=Y;if(e===t){Y=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Y=n;break}Y=e.return}}function L0(t){for(;Y!==null;){var e=Y;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Lf(4,e)}catch(l){gt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){gt(e,i,l)}}var s=e.return;try{t_(e)}catch(l){gt(e,s,l)}break;case 5:var o=e.return;try{t_(e)}catch(l){gt(e,o,l)}}}catch(l){gt(e,e.return,l)}if(e===t){Y=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Y=a;break}Y=e.return}}var OD=Math.ceil,Nd=bi.ReactCurrentDispatcher,Hy=bi.ReactCurrentOwner,ir=bi.ReactCurrentBatchConfig,be=0,Vt=null,Rt=null,Ht=0,Ln=0,ca=Ts(0),bt=0,Xu=null,so=0,Mf=0,qy=0,wu=null,Tn=null,Ky=0,Oa=1/0,ti=null,xd=!1,i_=null,as=null,Ph=!1,Zi=null,Dd=0,Eu=0,s_=null,Jh=-1,Xh=0;function mn(){return be&6?_t():Jh!==-1?Jh:Jh=_t()}function ls(t){return t.mode&1?be&2&&Ht!==0?Ht&-Ht:_D.transition!==null?(Xh===0&&(Xh=CC()),Xh):(t=Fe,t!==0||(t=window.event,t=t===void 0?16:xC(t.type)),t):1}function Er(t,e,n,r){if(50<Eu)throw Eu=0,s_=null,Error(W(185));Pc(t,n,r),(!(be&2)||t!==Vt)&&(t===Vt&&(!(be&2)&&(Mf|=n),bt===4&&qi(t,Ht)),kn(t,r),n===1&&be===0&&!(e.mode&1)&&(Oa=_t()+500,xf&&Is()))}function kn(t,e){var n=t.callbackNode;_x(t,e);var r=md(t,t===Vt?Ht:0);if(r===0)n!==null&&WE(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&WE(n),e===1)t.tag===0?mD(M0.bind(null,t)):JC(M0.bind(null,t)),dD(function(){!(be&6)&&Is()}),n=null;else{switch(RC(r)){case 1:n=vy;break;case 4:n=IC;break;case 16:n=gd;break;case 536870912:n=SC;break;default:n=gd}n=Q1(n,$1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function $1(t,e){if(Jh=-1,Xh=0,be&6)throw Error(W(327));var n=t.callbackNode;if(ya()&&t.callbackNode!==n)return null;var r=md(t,t===Vt?Ht:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Od(t,r);else{e=r;var i=be;be|=2;var s=W1();(Vt!==t||Ht!==e)&&(ti=null,Oa=_t()+500,Js(t,e));do try{VD();break}catch(a){z1(t,a)}while(1);xy(),Nd.current=s,be=i,Rt!==null?e=0:(Vt=null,Ht=0,e=bt)}if(e!==0){if(e===2&&(i=xm(t),i!==0&&(r=i,e=o_(t,i))),e===1)throw n=Xu,Js(t,0),qi(t,r),kn(t,_t()),n;if(e===6)qi(t,r);else{if(i=t.current.alternate,!(r&30)&&!LD(i)&&(e=Od(t,r),e===2&&(s=xm(t),s!==0&&(r=s,e=o_(t,s))),e===1))throw n=Xu,Js(t,0),qi(t,r),kn(t,_t()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(W(345));case 2:Os(t,Tn,ti);break;case 3:if(qi(t,r),(r&130023424)===r&&(e=Ky+500-_t(),10<e)){if(md(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){mn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Bm(Os.bind(null,t,Tn,ti),e);break}Os(t,Tn,ti);break;case 4:if(qi(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-wr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=_t()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*OD(r/1960))-r,10<r){t.timeoutHandle=Bm(Os.bind(null,t,Tn,ti),r);break}Os(t,Tn,ti);break;case 5:Os(t,Tn,ti);break;default:throw Error(W(329))}}}return kn(t,_t()),t.callbackNode===n?$1.bind(null,t):null}function o_(t,e){var n=wu;return t.current.memoizedState.isDehydrated&&(Js(t,e).flags|=256),t=Od(t,e),t!==2&&(e=Tn,Tn=n,e!==null&&a_(e)),t}function a_(t){Tn===null?Tn=t:Tn.push.apply(Tn,t)}function LD(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Ir(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function qi(t,e){for(e&=~qy,e&=~Mf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-wr(e),r=1<<n;t[n]=-1,e&=~r}}function M0(t){if(be&6)throw Error(W(327));ya();var e=md(t,0);if(!(e&1))return kn(t,_t()),null;var n=Od(t,e);if(t.tag!==0&&n===2){var r=xm(t);r!==0&&(e=r,n=o_(t,r))}if(n===1)throw n=Xu,Js(t,0),qi(t,e),kn(t,_t()),n;if(n===6)throw Error(W(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Os(t,Tn,ti),kn(t,_t()),null}function Gy(t,e){var n=be;be|=1;try{return t(e)}finally{be=n,be===0&&(Oa=_t()+500,xf&&Is())}}function oo(t){Zi!==null&&Zi.tag===0&&!(be&6)&&ya();var e=be;be|=1;var n=ir.transition,r=Fe;try{if(ir.transition=null,Fe=1,t)return t()}finally{Fe=r,ir.transition=n,be=e,!(be&6)&&Is()}}function Qy(){Ln=ca.current,tt(ca)}function Js(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,hD(n)),Rt!==null)for(n=Rt.return;n!==null;){var r=n;switch(ky(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ed();break;case 3:xa(),tt(Pn),tt(un),Fy();break;case 5:Vy(r);break;case 4:xa();break;case 13:tt(lt);break;case 19:tt(lt);break;case 10:Dy(r.type._context);break;case 22:case 23:Qy()}n=n.return}if(Vt=t,Rt=t=us(t.current,null),Ht=Ln=e,bt=0,Xu=null,qy=Mf=so=0,Tn=wu=null,zs!==null){for(e=0;e<zs.length;e++)if(n=zs[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}zs=null}return t}function z1(t,e){do{var n=Rt;try{if(xy(),Gh.current=bd,kd){for(var r=ct.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}kd=!1}if(io=0,Lt=kt=ct=null,yu=!1,Qu=0,Hy.current=null,n===null||n.return===null){bt=1,Xu=e,Rt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Ht,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=I0(o);if(m!==null){m.flags&=-257,S0(m,o,a,s,e),m.mode&1&&T0(s,c,e),e=m,l=c;var _=e.updateQueue;if(_===null){var T=new Set;T.add(l),e.updateQueue=T}else _.add(l);break e}else{if(!(e&1)){T0(s,c,e),Yy();break e}l=Error(W(426))}}else if(ot&&a.mode&1){var I=I0(o);if(I!==null){!(I.flags&65536)&&(I.flags|=256),S0(I,o,a,s,e),by(Da(l,a));break e}}s=l=Da(l,a),bt!==4&&(bt=2),wu===null?wu=[s]:wu.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=R1(s,l,e);m0(s,v);break e;case 1:a=l;var y=s.type,R=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(as===null||!as.has(R)))){s.flags|=65536,e&=-e,s.lanes|=e;var N=P1(s,a,e);m0(s,N);break e}}s=s.return}while(s!==null)}q1(n)}catch(M){e=M,Rt===n&&n!==null&&(Rt=n=n.return);continue}break}while(1)}function W1(){var t=Nd.current;return Nd.current=bd,t===null?bd:t}function Yy(){(bt===0||bt===3||bt===2)&&(bt=4),Vt===null||!(so&268435455)&&!(Mf&268435455)||qi(Vt,Ht)}function Od(t,e){var n=be;be|=2;var r=W1();(Vt!==t||Ht!==e)&&(ti=null,Js(t,e));do try{MD();break}catch(i){z1(t,i)}while(1);if(xy(),be=n,Nd.current=r,Rt!==null)throw Error(W(261));return Vt=null,Ht=0,bt}function MD(){for(;Rt!==null;)H1(Rt)}function VD(){for(;Rt!==null&&!lx();)H1(Rt)}function H1(t){var e=G1(t.alternate,t,Ln);t.memoizedProps=t.pendingProps,e===null?q1(t):Rt=e,Hy.current=null}function q1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=bD(n,e),n!==null){n.flags&=32767,Rt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{bt=6,Rt=null;return}}else if(n=kD(n,e,Ln),n!==null){Rt=n;return}if(e=e.sibling,e!==null){Rt=e;return}Rt=e=t}while(e!==null);bt===0&&(bt=5)}function Os(t,e,n){var r=Fe,i=ir.transition;try{ir.transition=null,Fe=1,FD(t,e,n,r)}finally{ir.transition=i,Fe=r}return null}function FD(t,e,n,r){do ya();while(Zi!==null);if(be&6)throw Error(W(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(W(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(yx(t,s),t===Vt&&(Rt=Vt=null,Ht=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ph||(Ph=!0,Q1(gd,function(){return ya(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=ir.transition,ir.transition=null;var o=Fe;Fe=1;var a=be;be|=4,Hy.current=null,xD(t,n),B1(n,t),iD(Fm),_d=!!Vm,Fm=Vm=null,t.current=n,DD(n),ux(),be=a,Fe=o,ir.transition=s}else t.current=n;if(Ph&&(Ph=!1,Zi=t,Dd=i),s=t.pendingLanes,s===0&&(as=null),dx(n.stateNode),kn(t,_t()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(xd)throw xd=!1,t=i_,i_=null,t;return Dd&1&&t.tag!==0&&ya(),s=t.pendingLanes,s&1?t===s_?Eu++:(Eu=0,s_=t):Eu=0,Is(),null}function ya(){if(Zi!==null){var t=RC(Dd),e=ir.transition,n=Fe;try{if(ir.transition=null,Fe=16>t?16:t,Zi===null)var r=!1;else{if(t=Zi,Zi=null,Dd=0,be&6)throw Error(W(331));var i=be;for(be|=4,Y=t.current;Y!==null;){var s=Y,o=s.child;if(Y.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Y=c;Y!==null;){var h=Y;switch(h.tag){case 0:case 11:case 15:vu(8,h,s)}var d=h.child;if(d!==null)d.return=h,Y=d;else for(;Y!==null;){h=Y;var f=h.sibling,m=h.return;if(V1(h),h===c){Y=null;break}if(f!==null){f.return=m,Y=f;break}Y=m}}}var _=s.alternate;if(_!==null){var T=_.child;if(T!==null){_.child=null;do{var I=T.sibling;T.sibling=null,T=I}while(T!==null)}}Y=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Y=o;else e:for(;Y!==null;){if(s=Y,s.flags&2048)switch(s.tag){case 0:case 11:case 15:vu(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,Y=v;break e}Y=s.return}}var y=t.current;for(Y=y;Y!==null;){o=Y;var R=o.child;if(o.subtreeFlags&2064&&R!==null)R.return=o,Y=R;else e:for(o=y;Y!==null;){if(a=Y,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Lf(9,a)}}catch(M){gt(a,a.return,M)}if(a===o){Y=null;break e}var N=a.sibling;if(N!==null){N.return=a.return,Y=N;break e}Y=a.return}}if(be=i,Is(),jr&&typeof jr.onPostCommitFiberRoot=="function")try{jr.onPostCommitFiberRoot(Pf,t)}catch{}r=!0}return r}finally{Fe=n,ir.transition=e}}return!1}function V0(t,e,n){e=Da(n,e),e=R1(t,e,1),t=os(t,e,1),e=mn(),t!==null&&(Pc(t,1,e),kn(t,e))}function gt(t,e,n){if(t.tag===3)V0(t,t,n);else for(;e!==null;){if(e.tag===3){V0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(as===null||!as.has(r))){t=Da(n,t),t=P1(e,t,1),e=os(e,t,1),t=mn(),e!==null&&(Pc(e,1,t),kn(e,t));break}}e=e.return}}function UD(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=mn(),t.pingedLanes|=t.suspendedLanes&n,Vt===t&&(Ht&n)===n&&(bt===4||bt===3&&(Ht&130023424)===Ht&&500>_t()-Ky?Js(t,0):qy|=n),kn(t,e)}function K1(t,e){e===0&&(t.mode&1?(e=_h,_h<<=1,!(_h&130023424)&&(_h=4194304)):e=1);var n=mn();t=Ei(t,e),t!==null&&(Pc(t,e,n),kn(t,n))}function BD(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),K1(t,n)}function jD(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(W(314))}r!==null&&r.delete(e),K1(t,n)}var G1;G1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Pn.current)Sn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Sn=!1,AD(t,e,n);Sn=!!(t.flags&131072)}else Sn=!1,ot&&e.flags&1048576&&XC(e,Sd,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Yh(t,e),t=e.pendingProps;var i=ka(e,un.current);_a(e,n),i=By(null,e,r,t,i,n);var s=jy();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,An(r)?(s=!0,Td(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Ly(e),i.updater=Of,e.stateNode=i,i._reactInternals=e,Km(e,r,t,n),e=Ym(null,e,r,!0,s,n)):(e.tag=0,ot&&s&&Ay(e),gn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Yh(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=zD(r),t=fr(r,t),i){case 0:e=Qm(null,e,r,t,n);break e;case 1:e=P0(null,e,r,t,n);break e;case 11:e=C0(null,e,r,t,n);break e;case 14:e=R0(null,e,r,fr(r.type,t),n);break e}throw Error(W(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:fr(r,i),Qm(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:fr(r,i),P0(t,e,r,i,n);case 3:e:{if(N1(e),t===null)throw Error(W(387));r=e.pendingProps,s=e.memoizedState,i=s.element,i1(t,e),Pd(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Da(Error(W(423)),e),e=A0(t,e,r,n,i);break e}else if(r!==i){i=Da(Error(W(424)),e),e=A0(t,e,r,n,i);break e}else for(Fn=ss(e.stateNode.containerInfo.firstChild),jn=e,ot=!0,mr=null,n=n1(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ba(),r===i){e=Ti(t,e,n);break e}gn(t,e,r,n)}e=e.child}return e;case 5:return s1(e),t===null&&Wm(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Um(r,i)?o=null:s!==null&&Um(r,s)&&(e.flags|=32),b1(t,e),gn(t,e,o,n),e.child;case 6:return t===null&&Wm(e),null;case 13:return x1(t,e,n);case 4:return My(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Na(e,null,r,n):gn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:fr(r,i),C0(t,e,r,i,n);case 7:return gn(t,e,e.pendingProps,n),e.child;case 8:return gn(t,e,e.pendingProps.children,n),e.child;case 12:return gn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ye(Cd,r._currentValue),r._currentValue=o,s!==null)if(Ir(s.value,o)){if(s.children===i.children&&!Pn.current){e=Ti(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=fi(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Hm(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(W(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Hm(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}gn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,_a(e,n),i=or(i),r=r(i),e.flags|=1,gn(t,e,r,n),e.child;case 14:return r=e.type,i=fr(r,e.pendingProps),i=fr(r.type,i),R0(t,e,r,i,n);case 15:return A1(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:fr(r,i),Yh(t,e),e.tag=1,An(r)?(t=!0,Td(e)):t=!1,_a(e,n),C1(e,r,i),Km(e,r,i,n),Ym(null,e,r,!0,t,n);case 19:return D1(t,e,n);case 22:return k1(t,e,n)}throw Error(W(156,e.tag))};function Q1(t,e){return TC(t,e)}function $D(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nr(t,e,n,r){return new $D(t,e,n,r)}function Jy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function zD(t){if(typeof t=="function")return Jy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===my)return 11;if(t===_y)return 14}return 2}function us(t,e){var n=t.alternate;return n===null?(n=nr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Zh(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Jy(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ea:return Xs(n.children,i,s,e);case gy:o=8,i|=8;break;case _m:return t=nr(12,n,e,i|2),t.elementType=_m,t.lanes=s,t;case ym:return t=nr(13,n,e,i),t.elementType=ym,t.lanes=s,t;case vm:return t=nr(19,n,e,i),t.elementType=vm,t.lanes=s,t;case sC:return Vf(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case rC:o=10;break e;case iC:o=9;break e;case my:o=11;break e;case _y:o=14;break e;case zi:o=16,r=null;break e}throw Error(W(130,t==null?t:typeof t,""))}return e=nr(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Xs(t,e,n,r){return t=nr(7,t,r,e),t.lanes=n,t}function Vf(t,e,n,r){return t=nr(22,t,r,e),t.elementType=sC,t.lanes=n,t.stateNode={isHidden:!1},t}function Rg(t,e,n){return t=nr(6,t,null,e),t.lanes=n,t}function Pg(t,e,n){return e=nr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function WD(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ag(0),this.expirationTimes=ag(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ag(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Xy(t,e,n,r,i,s,o,a,l){return t=new WD(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=nr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ly(s),t}function HD(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Zo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Y1(t){if(!t)return gs;t=t._reactInternals;e:{if(Co(t)!==t||t.tag!==1)throw Error(W(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(An(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(t.tag===1){var n=t.type;if(An(n))return YC(t,n,e)}return e}function J1(t,e,n,r,i,s,o,a,l){return t=Xy(n,r,!0,t,i,s,o,a,l),t.context=Y1(null),n=t.current,r=mn(),i=ls(n),s=fi(r,i),s.callback=e??null,os(n,s,i),t.current.lanes=i,Pc(t,i,r),kn(t,r),t}function Ff(t,e,n,r){var i=e.current,s=mn(),o=ls(i);return n=Y1(n),e.context===null?e.context=n:e.pendingContext=n,e=fi(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=os(i,e,o),t!==null&&(Er(t,i,o,s),Kh(t,i,o)),o}function Ld(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function F0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Zy(t,e){F0(t,e),(t=t.alternate)&&F0(t,e)}function qD(){return null}var X1=typeof reportError=="function"?reportError:function(t){console.error(t)};function ev(t){this._internalRoot=t}Uf.prototype.render=ev.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(W(409));Ff(t,e,null,null)};Uf.prototype.unmount=ev.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;oo(function(){Ff(null,t,null,null)}),e[wi]=null}};function Uf(t){this._internalRoot=t}Uf.prototype.unstable_scheduleHydration=function(t){if(t){var e=kC();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Hi.length&&e!==0&&e<Hi[n].priority;n++);Hi.splice(n,0,t),n===0&&NC(t)}};function tv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Bf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function U0(){}function KD(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Ld(o);s.call(c)}}var o=J1(e,r,t,0,null,!1,!1,"",U0);return t._reactRootContainer=o,t[wi]=o.current,Wu(t.nodeType===8?t.parentNode:t),oo(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Ld(l);a.call(c)}}var l=Xy(t,0,!1,null,null,!1,!1,"",U0);return t._reactRootContainer=l,t[wi]=l.current,Wu(t.nodeType===8?t.parentNode:t),oo(function(){Ff(e,l,n,r)}),l}function jf(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Ld(o);a.call(l)}}Ff(e,o,t,i)}else o=KD(n,e,t,i,r);return Ld(o)}PC=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=nu(e.pendingLanes);n!==0&&(wy(e,n|1),kn(e,_t()),!(be&6)&&(Oa=_t()+500,Is()))}break;case 13:oo(function(){var r=Ei(t,1);if(r!==null){var i=mn();Er(r,t,1,i)}}),Zy(t,1)}};Ey=function(t){if(t.tag===13){var e=Ei(t,134217728);if(e!==null){var n=mn();Er(e,t,134217728,n)}Zy(t,134217728)}};AC=function(t){if(t.tag===13){var e=ls(t),n=Ei(t,e);if(n!==null){var r=mn();Er(n,t,e,r)}Zy(t,e)}};kC=function(){return Fe};bC=function(t,e){var n=Fe;try{return Fe=t,e()}finally{Fe=n}};km=function(t,e,n){switch(e){case"input":if(Tm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Nf(r);if(!i)throw Error(W(90));aC(r),Tm(r,i)}}}break;case"textarea":uC(t,n);break;case"select":e=n.value,e!=null&&fa(t,!!n.multiple,e,!1)}};mC=Gy;_C=oo;var GD={usingClientEntryPoint:!1,Events:[kc,ia,Nf,pC,gC,Gy]},zl={findFiberByHostInstance:$s,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},QD={bundleType:zl.bundleType,version:zl.version,rendererPackageName:zl.rendererPackageName,rendererConfig:zl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:bi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=wC(t),t===null?null:t.stateNode},findFiberByHostInstance:zl.findFiberByHostInstance||qD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ah=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ah.isDisabled&&Ah.supportsFiber)try{Pf=Ah.inject(QD),jr=Ah}catch{}}Gn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=GD;Gn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tv(e))throw Error(W(200));return HD(t,e,null,n)};Gn.createRoot=function(t,e){if(!tv(t))throw Error(W(299));var n=!1,r="",i=X1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Xy(t,1,!1,null,null,n,!1,r,i),t[wi]=e.current,Wu(t.nodeType===8?t.parentNode:t),new ev(e)};Gn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(W(188)):(t=Object.keys(t).join(","),Error(W(268,t)));return t=wC(e),t=t===null?null:t.stateNode,t};Gn.flushSync=function(t){return oo(t)};Gn.hydrate=function(t,e,n){if(!Bf(e))throw Error(W(200));return jf(null,t,e,!0,n)};Gn.hydrateRoot=function(t,e,n){if(!tv(t))throw Error(W(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=X1;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=J1(e,null,t,1,n??null,i,!1,s,o),t[wi]=e.current,Wu(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Uf(e)};Gn.render=function(t,e,n){if(!Bf(e))throw Error(W(200));return jf(null,t,e,!1,n)};Gn.unmountComponentAtNode=function(t){if(!Bf(t))throw Error(W(40));return t._reactRootContainer?(oo(function(){jf(null,null,t,!1,function(){t._reactRootContainer=null,t[wi]=null})}),!0):!1};Gn.unstable_batchedUpdates=Gy;Gn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Bf(n))throw Error(W(200));if(t==null||t._reactInternals===void 0)throw Error(W(38));return jf(t,e,n,!1,r)};Gn.version="18.3.1-next-f1338f8080-20240426";function Z1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Z1)}catch(t){console.error(t)}}Z1(),ZS.exports=Gn;var nv=ZS.exports;const YD=ay(nv),JD=jS({__proto__:null,default:YD},[nv]);var B0=nv;gm.createRoot=B0.createRoot,gm.hydrateRoot=B0.hydrateRoot;function eR(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=eR(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function es(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=eR(t))&&(r&&(r+=" "),r+=e);return r}const Tu=t=>typeof t=="number"&&!isNaN(t),ao=t=>typeof t=="string",Cn=t=>typeof t=="function",ed=t=>ao(t)||Cn(t)?t:null,Ag=t=>F.isValidElement(t)||ao(t)||Cn(t)||Tu(t);function XD(t,e,n){n===void 0&&(n=300);const{scrollHeight:r,style:i}=t;requestAnimationFrame(()=>{i.minHeight="initial",i.height=r+"px",i.transition=`all ${n}ms`,requestAnimationFrame(()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(e,n)})})}function $f(t){let{enter:e,exit:n,appendPosition:r=!1,collapse:i=!0,collapseDuration:s=300}=t;return function(o){let{children:a,position:l,preventExitTransition:c,done:h,nodeRef:d,isIn:f}=o;const m=r?`${e}--${l}`:e,_=r?`${n}--${l}`:n,T=F.useRef(0);return F.useLayoutEffect(()=>{const I=d.current,v=m.split(" "),y=R=>{R.target===d.current&&(I.dispatchEvent(new Event("d")),I.removeEventListener("animationend",y),I.removeEventListener("animationcancel",y),T.current===0&&R.type!=="animationcancel"&&I.classList.remove(...v))};I.classList.add(...v),I.addEventListener("animationend",y),I.addEventListener("animationcancel",y)},[]),F.useEffect(()=>{const I=d.current,v=()=>{I.removeEventListener("animationend",v),i?XD(I,h,s):h()};f||(c?v():(T.current=1,I.className+=` ${_}`,I.addEventListener("animationend",v)))},[f]),qe.createElement(qe.Fragment,null,a)}}function j0(t,e){return t!=null?{content:t.content,containerId:t.props.containerId,id:t.props.toastId,theme:t.props.theme,type:t.props.type,data:t.props.data||{},isLoading:t.props.isLoading,icon:t.props.icon,status:e}:{}}const Zn={list:new Map,emitQueue:new Map,on(t,e){return this.list.has(t)||this.list.set(t,[]),this.list.get(t).push(e),this},off(t,e){if(e){const n=this.list.get(t).filter(r=>r!==e);return this.list.set(t,n),this}return this.list.delete(t),this},cancelEmit(t){const e=this.emitQueue.get(t);return e&&(e.forEach(clearTimeout),this.emitQueue.delete(t)),this},emit(t){this.list.has(t)&&this.list.get(t).forEach(e=>{const n=setTimeout(()=>{e(...[].slice.call(arguments,1))},0);this.emitQueue.has(t)||this.emitQueue.set(t,[]),this.emitQueue.get(t).push(n)})}},kh=t=>{let{theme:e,type:n,...r}=t;return qe.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${n})`,...r})},kg={info:function(t){return qe.createElement(kh,{...t},qe.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(t){return qe.createElement(kh,{...t},qe.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(t){return qe.createElement(kh,{...t},qe.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(t){return qe.createElement(kh,{...t},qe.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return qe.createElement("div",{className:"Toastify__spinner"})}};function ZD(t){const[,e]=F.useReducer(m=>m+1,0),[n,r]=F.useState([]),i=F.useRef(null),s=F.useRef(new Map).current,o=m=>n.indexOf(m)!==-1,a=F.useRef({toastKey:1,displayedToast:0,count:0,queue:[],props:t,containerId:null,isToastActive:o,getToast:m=>s.get(m)}).current;function l(m){let{containerId:_}=m;const{limit:T}=a.props;!T||_&&a.containerId!==_||(a.count-=a.queue.length,a.queue=[])}function c(m){r(_=>m==null?[]:_.filter(T=>T!==m))}function h(){const{toastContent:m,toastProps:_,staleId:T}=a.queue.shift();f(m,_,T)}function d(m,_){let{delay:T,staleId:I,...v}=_;if(!Ag(m)||function(D){return!i.current||a.props.enableMultiContainer&&D.containerId!==a.props.containerId||s.has(D.toastId)&&D.updateId==null}(v))return;const{toastId:y,updateId:R,data:N}=v,{props:M}=a,k=()=>c(y),S=R==null;S&&a.count++;const w={...M,style:M.toastStyle,key:a.toastKey++,...Object.fromEntries(Object.entries(v).filter(D=>{let[P,oe]=D;return oe!=null})),toastId:y,updateId:R,data:N,closeToast:k,isIn:!1,className:ed(v.className||M.toastClassName),bodyClassName:ed(v.bodyClassName||M.bodyClassName),progressClassName:ed(v.progressClassName||M.progressClassName),autoClose:!v.isLoading&&(C=v.autoClose,A=M.autoClose,C===!1||Tu(C)&&C>0?C:A),deleteToast(){const D=j0(s.get(y),"removed");s.delete(y),Zn.emit(4,D);const P=a.queue.length;if(a.count=y==null?a.count-a.displayedToast:a.count-1,a.count<0&&(a.count=0),P>0){const oe=y==null?a.props.limit:1;if(P===1||oe===1)a.displayedToast++,h();else{const Be=oe>P?P:oe;a.displayedToast=Be;for(let Me=0;Me<Be;Me++)h()}}else e()}};var C,A;w.iconOut=function(D){let{theme:P,type:oe,isLoading:Be,icon:Me}=D,de=null;const $={theme:P,type:oe};return Me===!1||(Cn(Me)?de=Me($):F.isValidElement(Me)?de=F.cloneElement(Me,$):ao(Me)||Tu(Me)?de=Me:Be?de=kg.spinner():(J=>J in kg)(oe)&&(de=kg[oe]($))),de}(w),Cn(v.onOpen)&&(w.onOpen=v.onOpen),Cn(v.onClose)&&(w.onClose=v.onClose),w.closeButton=M.closeButton,v.closeButton===!1||Ag(v.closeButton)?w.closeButton=v.closeButton:v.closeButton===!0&&(w.closeButton=!Ag(M.closeButton)||M.closeButton);let b=m;F.isValidElement(m)&&!ao(m.type)?b=F.cloneElement(m,{closeToast:k,toastProps:w,data:N}):Cn(m)&&(b=m({closeToast:k,toastProps:w,data:N})),M.limit&&M.limit>0&&a.count>M.limit&&S?a.queue.push({toastContent:b,toastProps:w,staleId:I}):Tu(T)?setTimeout(()=>{f(b,w,I)},T):f(b,w,I)}function f(m,_,T){const{toastId:I}=_;T&&s.delete(T);const v={content:m,props:_};s.set(I,v),r(y=>[...y,I].filter(R=>R!==T)),Zn.emit(4,j0(v,v.props.updateId==null?"added":"updated"))}return F.useEffect(()=>(a.containerId=t.containerId,Zn.cancelEmit(3).on(0,d).on(1,m=>i.current&&c(m)).on(5,l).emit(2,a),()=>{s.clear(),Zn.emit(3,a)}),[]),F.useEffect(()=>{a.props=t,a.isToastActive=o,a.displayedToast=n.length}),{getToastToRender:function(m){const _=new Map,T=Array.from(s.values());return t.newestOnTop&&T.reverse(),T.forEach(I=>{const{position:v}=I.props;_.has(v)||_.set(v,[]),_.get(v).push(I)}),Array.from(_,I=>m(I[0],I[1]))},containerRef:i,isToastActive:o}}function $0(t){return t.targetTouches&&t.targetTouches.length>=1?t.targetTouches[0].clientX:t.clientX}function z0(t){return t.targetTouches&&t.targetTouches.length>=1?t.targetTouches[0].clientY:t.clientY}function eO(t){const[e,n]=F.useState(!1),[r,i]=F.useState(!1),s=F.useRef(null),o=F.useRef({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null,didMove:!1}).current,a=F.useRef(t),{autoClose:l,pauseOnHover:c,closeToast:h,onClick:d,closeOnClick:f}=t;function m(N){if(t.draggable){N.nativeEvent.type==="touchstart"&&N.nativeEvent.preventDefault(),o.didMove=!1,document.addEventListener("mousemove",v),document.addEventListener("mouseup",y),document.addEventListener("touchmove",v),document.addEventListener("touchend",y);const M=s.current;o.canCloseOnClick=!0,o.canDrag=!0,o.boundingRect=M.getBoundingClientRect(),M.style.transition="",o.x=$0(N.nativeEvent),o.y=z0(N.nativeEvent),t.draggableDirection==="x"?(o.start=o.x,o.removalDistance=M.offsetWidth*(t.draggablePercent/100)):(o.start=o.y,o.removalDistance=M.offsetHeight*(t.draggablePercent===80?1.5*t.draggablePercent:t.draggablePercent/100))}}function _(N){if(o.boundingRect){const{top:M,bottom:k,left:S,right:w}=o.boundingRect;N.nativeEvent.type!=="touchend"&&t.pauseOnHover&&o.x>=S&&o.x<=w&&o.y>=M&&o.y<=k?I():T()}}function T(){n(!0)}function I(){n(!1)}function v(N){const M=s.current;o.canDrag&&M&&(o.didMove=!0,e&&I(),o.x=$0(N),o.y=z0(N),o.delta=t.draggableDirection==="x"?o.x-o.start:o.y-o.start,o.start!==o.x&&(o.canCloseOnClick=!1),M.style.transform=`translate${t.draggableDirection}(${o.delta}px)`,M.style.opacity=""+(1-Math.abs(o.delta/o.removalDistance)))}function y(){document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",y),document.removeEventListener("touchmove",v),document.removeEventListener("touchend",y);const N=s.current;if(o.canDrag&&o.didMove&&N){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance)return i(!0),void t.closeToast();N.style.transition="transform 0.2s, opacity 0.2s",N.style.transform=`translate${t.draggableDirection}(0)`,N.style.opacity="1"}}F.useEffect(()=>{a.current=t}),F.useEffect(()=>(s.current&&s.current.addEventListener("d",T,{once:!0}),Cn(t.onOpen)&&t.onOpen(F.isValidElement(t.children)&&t.children.props),()=>{const N=a.current;Cn(N.onClose)&&N.onClose(F.isValidElement(N.children)&&N.children.props)}),[]),F.useEffect(()=>(t.pauseOnFocusLoss&&(document.hasFocus()||I(),window.addEventListener("focus",T),window.addEventListener("blur",I)),()=>{t.pauseOnFocusLoss&&(window.removeEventListener("focus",T),window.removeEventListener("blur",I))}),[t.pauseOnFocusLoss]);const R={onMouseDown:m,onTouchStart:m,onMouseUp:_,onTouchEnd:_};return l&&c&&(R.onMouseEnter=I,R.onMouseLeave=T),f&&(R.onClick=N=>{d&&d(N),o.canCloseOnClick&&h()}),{playToast:T,pauseToast:I,isRunning:e,preventExitTransition:r,toastRef:s,eventHandlers:R}}function tR(t){let{closeToast:e,theme:n,ariaLabel:r="close"}=t;return qe.createElement("button",{className:`Toastify__close-button Toastify__close-button--${n}`,type:"button",onClick:i=>{i.stopPropagation(),e(i)},"aria-label":r},qe.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},qe.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function tO(t){let{delay:e,isRunning:n,closeToast:r,type:i="default",hide:s,className:o,style:a,controlledProgress:l,progress:c,rtl:h,isIn:d,theme:f}=t;const m=s||l&&c===0,_={...a,animationDuration:`${e}ms`,animationPlayState:n?"running":"paused",opacity:m?0:1};l&&(_.transform=`scaleX(${c})`);const T=es("Toastify__progress-bar",l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${f}`,`Toastify__progress-bar--${i}`,{"Toastify__progress-bar--rtl":h}),I=Cn(o)?o({rtl:h,type:i,defaultClassName:T}):es(T,o);return qe.createElement("div",{role:"progressbar","aria-hidden":m?"true":"false","aria-label":"notification timer",className:I,style:_,[l&&c>=1?"onTransitionEnd":"onAnimationEnd"]:l&&c<1?null:()=>{d&&r()}})}const nO=t=>{const{isRunning:e,preventExitTransition:n,toastRef:r,eventHandlers:i}=eO(t),{closeButton:s,children:o,autoClose:a,onClick:l,type:c,hideProgressBar:h,closeToast:d,transition:f,position:m,className:_,style:T,bodyClassName:I,bodyStyle:v,progressClassName:y,progressStyle:R,updateId:N,role:M,progress:k,rtl:S,toastId:w,deleteToast:C,isIn:A,isLoading:b,iconOut:D,closeOnClick:P,theme:oe}=t,Be=es("Toastify__toast",`Toastify__toast-theme--${oe}`,`Toastify__toast--${c}`,{"Toastify__toast--rtl":S},{"Toastify__toast--close-on-click":P}),Me=Cn(_)?_({rtl:S,position:m,type:c,defaultClassName:Be}):es(Be,_),de=!!k||!a,$={closeToast:d,type:c,theme:oe};let J=null;return s===!1||(J=Cn(s)?s($):F.isValidElement(s)?F.cloneElement(s,$):tR($)),qe.createElement(f,{isIn:A,done:C,position:m,preventExitTransition:n,nodeRef:r},qe.createElement("div",{id:w,onClick:l,className:Me,...i,style:T,ref:r},qe.createElement("div",{...A&&{role:M},className:Cn(I)?I({type:c}):es("Toastify__toast-body",I),style:v},D!=null&&qe.createElement("div",{className:es("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!b})},D),qe.createElement("div",null,o)),J,qe.createElement(tO,{...N&&!de?{key:`pb-${N}`}:{},rtl:S,theme:oe,delay:a,isRunning:e,isIn:A,closeToast:d,hide:h,type:c,style:R,className:y,controlledProgress:de,progress:k||0})))},zf=function(t,e){return e===void 0&&(e=!1),{enter:`Toastify--animate Toastify__${t}-enter`,exit:`Toastify--animate Toastify__${t}-exit`,appendPosition:e}},rO=$f(zf("bounce",!0));$f(zf("slide",!0));$f(zf("zoom"));$f(zf("flip"));const l_=F.forwardRef((t,e)=>{const{getToastToRender:n,containerRef:r,isToastActive:i}=ZD(t),{className:s,style:o,rtl:a,containerId:l}=t;function c(h){const d=es("Toastify__toast-container",`Toastify__toast-container--${h}`,{"Toastify__toast-container--rtl":a});return Cn(s)?s({position:h,rtl:a,defaultClassName:d}):es(d,ed(s))}return F.useEffect(()=>{e&&(e.current=r.current)},[]),qe.createElement("div",{ref:r,className:"Toastify",id:l},n((h,d)=>{const f=d.length?{...o}:{...o,pointerEvents:"none"};return qe.createElement("div",{className:c(h),style:f,key:`container-${h}`},d.map((m,_)=>{let{content:T,props:I}=m;return qe.createElement(nO,{...I,isIn:i(I.toastId),style:{...I.style,"--nth":_+1,"--len":d.length},key:`toast-${I.key}`},T)}))}))});l_.displayName="ToastContainer",l_.defaultProps={position:"top-right",transition:rO,autoClose:5e3,closeButton:tR,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};let bg,Ls=new Map,iu=[],iO=1;function nR(){return""+iO++}function sO(t){return t&&(ao(t.toastId)||Tu(t.toastId))?t.toastId:nR()}function Iu(t,e){return Ls.size>0?Zn.emit(0,t,e):iu.push({content:t,options:e}),e.toastId}function Md(t,e){return{...e,type:e&&e.type||t,toastId:sO(e)}}function bh(t){return(e,n)=>Iu(e,Md(t,n))}function He(t,e){return Iu(t,Md("default",e))}He.loading=(t,e)=>Iu(t,Md("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e})),He.promise=function(t,e,n){let r,{pending:i,error:s,success:o}=e;i&&(r=ao(i)?He.loading(i,n):He.loading(i.render,{...n,...i}));const a={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(h,d,f)=>{if(d==null)return void He.dismiss(r);const m={type:h,...a,...n,data:f},_=ao(d)?{render:d}:d;return r?He.update(r,{...m,..._}):He(_.render,{...m,..._}),f},c=Cn(t)?t():t;return c.then(h=>l("success",o,h)).catch(h=>l("error",s,h)),c},He.success=bh("success"),He.info=bh("info"),He.error=bh("error"),He.warning=bh("warning"),He.warn=He.warning,He.dark=(t,e)=>Iu(t,Md("default",{theme:"dark",...e})),He.dismiss=t=>{Ls.size>0?Zn.emit(1,t):iu=iu.filter(e=>t!=null&&e.options.toastId!==t)},He.clearWaitingQueue=function(t){return t===void 0&&(t={}),Zn.emit(5,t)},He.isActive=t=>{let e=!1;return Ls.forEach(n=>{n.isToastActive&&n.isToastActive(t)&&(e=!0)}),e},He.update=function(t,e){e===void 0&&(e={}),setTimeout(()=>{const n=function(r,i){let{containerId:s}=i;const o=Ls.get(s||bg);return o&&o.getToast(r)}(t,e);if(n){const{props:r,content:i}=n,s={delay:100,...r,...e,toastId:e.toastId||t,updateId:nR()};s.toastId!==t&&(s.staleId=t);const o=s.render||i;delete s.render,Iu(o,s)}},0)},He.done=t=>{He.update(t,{progress:1})},He.onChange=t=>(Zn.on(4,t),()=>{Zn.off(4,t)}),He.POSITION={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},He.TYPE={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"},Zn.on(2,t=>{bg=t.containerId||t,Ls.set(bg,t),iu.forEach(e=>{Zn.emit(0,e.content,e.options)}),iu=[]}).on(3,t=>{Ls.delete(t.containerId||t),Ls.size===0&&Zn.off(0).off(1).off(5)});const oO="modulepreload",aO=function(t){return"/react-web/"+t},W0={},rv=function(e,n,r){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=aO(s),s in W0)return;W0[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let h=i.length-1;h>=0;h--){const d=i[h];if(d.href===s&&(!o||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":oO,o||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),o)return new Promise((h,d)=>{c.addEventListener("load",h),c.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};/**
 * @remix-run/router v1.17.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function at(){return at=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},at.apply(this,arguments)}var mt;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(mt||(mt={}));const H0="popstate";function lO(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return Zu("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:lo(i)}return cO(e,n,null,t)}function ge(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function La(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function uO(){return Math.random().toString(36).substr(2,8)}function q0(t,e){return{usr:t.state,key:t.key,idx:e}}function Zu(t,e,n,r){return n===void 0&&(n=null),at({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ni(e):e,{state:n,key:e&&e.key||r||uO()})}function lo(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ni(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function cO(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=mt.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(at({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=mt.Pop;let I=h(),v=I==null?null:I-c;c=I,l&&l({action:a,location:T.location,delta:v})}function f(I,v){a=mt.Push;let y=Zu(T.location,I,v);n&&n(y,I),c=h()+1;let R=q0(y,c),N=T.createHref(y);try{o.pushState(R,"",N)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;i.location.assign(N)}s&&l&&l({action:a,location:T.location,delta:1})}function m(I,v){a=mt.Replace;let y=Zu(T.location,I,v);n&&n(y,I),c=h();let R=q0(y,c),N=T.createHref(y);o.replaceState(R,"",N),s&&l&&l({action:a,location:T.location,delta:0})}function _(I){let v=i.location.origin!=="null"?i.location.origin:i.location.href,y=typeof I=="string"?I:lo(I);return y=y.replace(/ $/,"%20"),ge(v,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,v)}let T={get action(){return a},get location(){return t(i,o)},listen(I){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(H0,d),l=I,()=>{i.removeEventListener(H0,d),l=null}},createHref(I){return e(i,I)},createURL:_,encodeLocation(I){let v=_(I);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:m,go(I){return o.go(I)}};return T}var Ge;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Ge||(Ge={}));const hO=new Set(["lazy","caseSensitive","path","id","index","children"]);function dO(t){return t.index===!0}function ec(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,s)=>{let o=[...n,String(s)],a=typeof i.id=="string"?i.id:o.join("-");if(ge(i.index!==!0||!i.children,"Cannot specify children on an index route"),ge(!r[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),dO(i)){let l=at({},i,e(i),{id:a});return r[a]=l,l}else{let l=at({},i,e(i),{id:a,children:void 0});return r[a]=l,i.children&&(l.children=ec(i.children,e,o,r)),l}})}function js(t,e,n){return n===void 0&&(n="/"),td(t,e,n,!1)}function td(t,e,n,r){let i=typeof e=="string"?Ni(e):e,s=ol(i.pathname||"/",n);if(s==null)return null;let o=rR(t);pO(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=CO(s);a=IO(o[l],c,r)}return a}function fO(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function rR(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(ge(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=pi([r,l.relativePath]),h=n.concat(l);s.children&&s.children.length>0&&(ge(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),rR(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:EO(c,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of iR(s.path))i(s,o,l)}),e}function iR(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=iR(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function pO(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:TO(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const gO=/^:[\w-]+$/,mO=3,_O=2,yO=1,vO=10,wO=-2,K0=t=>t==="*";function EO(t,e){let n=t.split("/"),r=n.length;return n.some(K0)&&(r+=wO),e&&(r+=_O),n.filter(i=>!K0(i)).reduce((i,s)=>i+(gO.test(s)?mO:s===""?yO:vO),r)}function TO(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function IO(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",d=G0({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),f=l.route;if(!d&&c&&n&&!r[r.length-1].route.index&&(d=G0({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:pi([s,d.pathname]),pathnameBase:AO(pi([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=pi([s,d.pathnameBase]))}return o}function G0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=SO(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,h,d)=>{let{paramName:f,isOptional:m}=h;if(f==="*"){let T=a[d]||"";o=s.slice(0,s.length-T.length).replace(/(.)\/+$/,"$1")}const _=a[d];return m&&!_?c[f]=void 0:c[f]=(_||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function SO(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),La(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function CO(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return La(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ol(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function RO(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Ni(t):t;return{pathname:n?n.startsWith("/")?n:PO(n,e):e,search:kO(r),hash:bO(i)}}function PO(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Ng(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function sR(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Wf(t,e){let n=sR(t);return e?n.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Hf(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Ni(t):(i=at({},t),ge(!i.pathname||!i.pathname.includes("?"),Ng("?","pathname","search",i)),ge(!i.pathname||!i.pathname.includes("#"),Ng("#","pathname","hash",i)),ge(!i.search||!i.search.includes("#"),Ng("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=RO(i,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const pi=t=>t.join("/").replace(/\/\/+/g,"/"),AO=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),kO=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,bO=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class iv{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function qf(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const oR=["post","put","patch","delete"],NO=new Set(oR),xO=["get",...oR],DO=new Set(xO),OO=new Set([301,302,303,307,308]),LO=new Set([307,308]),xg={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},MO={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Wl={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},sv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,VO=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),aR="remix-router-transitions";function FO(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;ge(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let x=t.detectErrorBoundary;i=O=>({hasErrorBoundary:x(O)})}else i=VO;let s={},o=ec(t.routes,i,void 0,s),a,l=t.basename||"/",c=t.unstable_dataStrategy||zO,h=t.unstable_patchRoutesOnMiss,d=at({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,unstable_skipActionErrorRevalidation:!1},t.future),f=null,m=new Set,_=null,T=null,I=null,v=t.hydrationData!=null,y=js(o,t.history.location,l),R=null;if(y==null&&!h){let x=pn(404,{pathname:t.history.location.pathname}),{matches:O,route:V}=iT(o);y=O,R={[V.id]:x}}let N;if(!y)N=!1,y=[];else if(y.some(x=>x.route.lazy))N=!1;else if(!y.some(x=>x.route.loader))N=!0;else if(d.v7_partialHydration){let x=t.hydrationData?t.hydrationData.loaderData:null,O=t.hydrationData?t.hydrationData.errors:null,V=B=>B.route.loader?typeof B.route.loader=="function"&&B.route.loader.hydrate===!0?!1:x&&x[B.route.id]!==void 0||O&&O[B.route.id]!==void 0:!0;if(O){let B=y.findIndex(Q=>O[Q.route.id]!==void 0);N=y.slice(0,B+1).every(V)}else N=y.every(V)}else N=t.hydrationData!=null;let M,k={historyAction:t.history.action,location:t.history.location,matches:y,initialized:N,navigation:xg,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||R,fetchers:new Map,blockers:new Map},S=mt.Pop,w=!1,C,A=!1,b=new Map,D=null,P=!1,oe=!1,Be=[],Me=[],de=new Map,$=0,J=-1,se=new Map,Ee=new Set,Pe=new Map,ze=new Map,At=new Set,Ft=new Map,Ut=new Map,Yn=new Map,_l=!1;function qp(){if(f=t.history.listen(x=>{let{action:O,location:V,delta:B}=x;if(_l){_l=!1;return}La(Ut.size===0||B!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Q=Sl({currentLocation:k.location,nextLocation:V,historyAction:O});if(Q&&B!=null){_l=!0,t.history.go(B*-1),Li(Q,{state:"blocked",location:V,proceed(){Li(Q,{state:"proceeding",proceed:void 0,reset:void 0,location:V}),t.history.go(B)},reset(){let te=new Map(k.blockers);te.set(Q,Wl),xt({blockers:te})}});return}return Ar(O,V)}),n){nL(e,b);let x=()=>rL(e,b);e.addEventListener("pagehide",x),D=()=>e.removeEventListener("pagehide",x)}return k.initialized||Ar(mt.Pop,k.location,{initialHydration:!0}),M}function Oo(){f&&f(),D&&D(),m.clear(),C&&C.abort(),k.fetchers.forEach((x,O)=>As(O)),k.blockers.forEach((x,O)=>Zc(O))}function Lo(x){return m.add(x),()=>m.delete(x)}function xt(x,O){O===void 0&&(O={}),k=at({},k,x);let V=[],B=[];d.v7_fetcherPersist&&k.fetchers.forEach((Q,te)=>{Q.state==="idle"&&(At.has(te)?B.push(te):V.push(te))}),[...m].forEach(Q=>Q(k,{deletedFetchers:B,unstable_viewTransitionOpts:O.viewTransitionOpts,unstable_flushSync:O.flushSync===!0})),d.v7_fetcherPersist&&(V.forEach(Q=>k.fetchers.delete(Q)),B.forEach(Q=>As(Q)))}function Pr(x,O,V){var B,Q;let{flushSync:te}=V===void 0?{}:V,ne=k.actionData!=null&&k.navigation.formMethod!=null&&gr(k.navigation.formMethod)&&k.navigation.state==="loading"&&((B=x.state)==null?void 0:B._isRedirect)!==!0,K;O.actionData?Object.keys(O.actionData).length>0?K=O.actionData:K=null:ne?K=k.actionData:K=null;let ue=O.loaderData?nT(k.loaderData,O.loaderData,O.matches||[],O.errors):k.loaderData,X=k.blockers;X.size>0&&(X=new Map(X),X.forEach((Te,Ie)=>X.set(Ie,Wl)));let ce=w===!0||k.navigation.formMethod!=null&&gr(k.navigation.formMethod)&&((Q=x.state)==null?void 0:Q._isRedirect)!==!0;a&&(o=a,a=void 0),P||S===mt.Pop||(S===mt.Push?t.history.push(x,x.state):S===mt.Replace&&t.history.replace(x,x.state));let Ne;if(S===mt.Pop){let Te=b.get(k.location.pathname);Te&&Te.has(x.pathname)?Ne={currentLocation:k.location,nextLocation:x}:b.has(x.pathname)&&(Ne={currentLocation:x,nextLocation:k.location})}else if(A){let Te=b.get(k.location.pathname);Te?Te.add(x.pathname):(Te=new Set([x.pathname]),b.set(k.location.pathname,Te)),Ne={currentLocation:k.location,nextLocation:x}}xt(at({},O,{actionData:K,loaderData:ue,historyAction:S,location:x,initialized:!0,navigation:xg,revalidation:"idle",restoreScrollPosition:bs(x,O.matches||k.matches),preventScrollReset:ce,blockers:X}),{viewTransitionOpts:Ne,flushSync:te===!0}),S=mt.Pop,w=!1,A=!1,P=!1,oe=!1,Be=[],Me=[]}async function Mo(x,O){if(typeof x=="number"){t.history.go(x);return}let V=u_(k.location,k.matches,l,d.v7_prependBasename,x,d.v7_relativeSplatPath,O==null?void 0:O.fromRouteId,O==null?void 0:O.relative),{path:B,submission:Q,error:te}=Q0(d.v7_normalizeFormMethod,!1,V,O),ne=k.location,K=Zu(k.location,B,O&&O.state);K=at({},K,t.history.encodeLocation(K));let ue=O&&O.replace!=null?O.replace:void 0,X=mt.Push;ue===!0?X=mt.Replace:ue===!1||Q!=null&&gr(Q.formMethod)&&Q.formAction===k.location.pathname+k.location.search&&(X=mt.Replace);let ce=O&&"preventScrollReset"in O?O.preventScrollReset===!0:void 0,Ne=(O&&O.unstable_flushSync)===!0,Te=Sl({currentLocation:ne,nextLocation:K,historyAction:X});if(Te){Li(Te,{state:"blocked",location:K,proceed(){Li(Te,{state:"proceeding",proceed:void 0,reset:void 0,location:K}),Mo(x,O)},reset(){let Ie=new Map(k.blockers);Ie.set(Te,Wl),xt({blockers:Ie})}});return}return await Ar(X,K,{submission:Q,pendingError:te,preventScrollReset:ce,replace:O&&O.replace,enableViewTransition:O&&O.unstable_viewTransition,flushSync:Ne})}function yl(){if(vt(),xt({revalidation:"loading"}),k.navigation.state!=="submitting"){if(k.navigation.state==="idle"){Ar(k.historyAction,k.location,{startUninterruptedRevalidation:!0});return}Ar(S||k.historyAction,k.navigation.location,{overrideNavigation:k.navigation})}}async function Ar(x,O,V){C&&C.abort(),C=null,S=x,P=(V&&V.startUninterruptedRevalidation)===!0,eh(k.location,k.matches),w=(V&&V.preventScrollReset)===!0,A=(V&&V.enableViewTransition)===!0;let B=a||o,Q=V&&V.overrideNavigation,te=js(B,O,l),ne=(V&&V.flushSync)===!0,K=Rl(te,B,O.pathname);if(K.active&&K.matches&&(te=K.matches),!te){let{error:ke,notFoundMatches:wt,route:it}=Uo(O.pathname);Pr(O,{matches:wt,loaderData:{},errors:{[it.id]:ke}},{flushSync:ne});return}if(k.initialized&&!oe&&QO(k.location,O)&&!(V&&V.submission&&gr(V.submission.formMethod))){Pr(O,{matches:te},{flushSync:ne});return}C=new AbortController;let ue=Ho(t.history,O,C.signal,V&&V.submission),X;if(V&&V.pendingError)X=[Su(te).route.id,{type:Ge.error,error:V.pendingError}];else if(V&&V.submission&&gr(V.submission.formMethod)){let ke=await Yc(ue,O,V.submission,te,K.active,{replace:V.replace,flushSync:ne});if(ke.shortCircuited)return;if(ke.pendingActionResult){let[wt,it]=ke.pendingActionResult;if(Vn(it)&&qf(it.error)&&it.error.status===404){C=null,Pr(O,{matches:ke.matches,loaderData:{},errors:{[wt]:it.error}});return}}te=ke.matches||te,X=ke.pendingActionResult,Q=Dg(O,V.submission),ne=!1,K.active=!1,ue=Ho(t.history,ue.url,ue.signal)}let{shortCircuited:ce,matches:Ne,loaderData:Te,errors:Ie}=await Kp(ue,O,te,K.active,Q,V&&V.submission,V&&V.fetcherSubmission,V&&V.replace,V&&V.initialHydration===!0,ne,X);ce||(C=null,Pr(O,at({matches:Ne||te},rT(X),{loaderData:Te,errors:Ie})))}async function Yc(x,O,V,B,Q,te){te===void 0&&(te={}),vt();let ne=eL(O,V);if(xt({navigation:ne},{flushSync:te.flushSync===!0}),Q){let X=await Nr(B,O.pathname,x.signal);if(X.type==="aborted")return{shortCircuited:!0};if(X.type==="error"){let{error:ce,notFoundMatches:Ne,route:Te}=kr(O.pathname,X);return{matches:Ne,pendingActionResult:[Te.id,{type:Ge.error,error:ce}]}}else if(X.matches)B=X.matches;else{let{notFoundMatches:ce,error:Ne,route:Te}=Uo(O.pathname);return{matches:ce,pendingActionResult:[Te.id,{type:Ge.error,error:Ne}]}}}let K,ue=su(B,O);if(!ue.route.action&&!ue.route.lazy)K={type:Ge.error,error:pn(405,{method:x.method,pathname:O.pathname,routeId:ue.route.id})};else if(K=(await Yr("action",x,[ue],B))[0],x.signal.aborted)return{shortCircuited:!0};if(qs(K)){let X;return te&&te.replace!=null?X=te.replace:X=Z0(K.response.headers.get("Location"),new URL(x.url),l)===k.location.pathname+k.location.search,await Qr(x,K,{submission:V,replace:X}),{shortCircuited:!0}}if(Hs(K))throw pn(400,{type:"defer-action"});if(Vn(K)){let X=Su(B,ue.route.id);return(te&&te.replace)!==!0&&(S=mt.Push),{matches:B,pendingActionResult:[X.route.id,K]}}return{matches:B,pendingActionResult:[ue.route.id,K]}}async function Kp(x,O,V,B,Q,te,ne,K,ue,X,ce){let Ne=Q||Dg(O,te),Te=te||ne||aT(Ne),Ie=!P&&(!d.v7_partialHydration||!ue);if(B){if(Ie){let st=vl(ce);xt(at({navigation:Ne},st!==void 0?{actionData:st}:{}),{flushSync:X})}let fe=await Nr(V,O.pathname,x.signal);if(fe.type==="aborted")return{shortCircuited:!0};if(fe.type==="error"){let{error:st,notFoundMatches:Qt,route:Ve}=kr(O.pathname,fe);return{matches:Qt,loaderData:{},errors:{[Ve.id]:st}}}else if(fe.matches)V=fe.matches;else{let{error:st,notFoundMatches:Qt,route:Ve}=Uo(O.pathname);return{matches:Qt,loaderData:{},errors:{[Ve.id]:st}}}}let ke=a||o,[wt,it]=Y0(t.history,k,V,Te,O,d.v7_partialHydration&&ue===!0,d.unstable_skipActionErrorRevalidation,oe,Be,Me,At,Pe,Ee,ke,l,ce);if(ks(fe=>!(V&&V.some(st=>st.route.id===fe))||wt&&wt.some(st=>st.route.id===fe)),J=++$,wt.length===0&&it.length===0){let fe=Il();return Pr(O,at({matches:V,loaderData:{},errors:ce&&Vn(ce[1])?{[ce[0]]:ce[1].error}:null},rT(ce),fe?{fetchers:new Map(k.fetchers)}:{}),{flushSync:X}),{shortCircuited:!0}}if(Ie){let fe={};if(!B){fe.navigation=Ne;let st=vl(ce);st!==void 0&&(fe.actionData=st)}it.length>0&&(fe.fetchers=Jc(it)),xt(fe,{flushSync:X})}it.forEach(fe=>{de.has(fe.key)&&wn(fe.key),fe.controller&&de.set(fe.key,fe.controller)});let Jr=()=>it.forEach(fe=>wn(fe.key));C&&C.signal.addEventListener("abort",Jr);let{loaderResults:ur,fetcherResults:Xr}=await Vo(k.matches,V,wt,it,x);if(x.signal.aborted)return{shortCircuited:!0};C&&C.signal.removeEventListener("abort",Jr),it.forEach(fe=>de.delete(fe.key));let Mi=sT([...ur,...Xr]);if(Mi){if(Mi.idx>=wt.length){let fe=it[Mi.idx-wt.length].key;Ee.add(fe)}return await Qr(x,Mi.result,{replace:K}),{shortCircuited:!0}}let{loaderData:cr,errors:xn}=tT(k,V,wt,ur,ce,it,Xr,Ft);Ft.forEach((fe,st)=>{fe.subscribe(Qt=>{(Qt||fe.done)&&Ft.delete(st)})}),d.v7_partialHydration&&ue&&k.errors&&Object.entries(k.errors).filter(fe=>{let[st]=fe;return!wt.some(Qt=>Qt.route.id===st)}).forEach(fe=>{let[st,Qt]=fe;xn=Object.assign(xn||{},{[st]:Qt})});let Vi=Il(),xr=Fo(J),Jn=Vi||xr||it.length>0;return at({matches:V,loaderData:cr,errors:xn},Jn?{fetchers:new Map(k.fetchers)}:{})}function vl(x){if(x&&!Vn(x[1]))return{[x[0]]:x[1].data};if(k.actionData)return Object.keys(k.actionData).length===0?null:k.actionData}function Jc(x){return x.forEach(O=>{let V=k.fetchers.get(O.key),B=Hl(void 0,V?V.data:void 0);k.fetchers.set(O.key,B)}),new Map(k.fetchers)}function wl(x,O,V,B){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");de.has(x)&&wn(x);let Q=(B&&B.unstable_flushSync)===!0,te=a||o,ne=u_(k.location,k.matches,l,d.v7_prependBasename,V,d.v7_relativeSplatPath,O,B==null?void 0:B.relative),K=js(te,ne,l),ue=Rl(K,te,ne);if(ue.active&&ue.matches&&(K=ue.matches),!K){vn(x,O,pn(404,{pathname:ne}),{flushSync:Q});return}let{path:X,submission:ce,error:Ne}=Q0(d.v7_normalizeFormMethod,!0,ne,B);if(Ne){vn(x,O,Ne,{flushSync:Q});return}let Te=su(K,X);if(w=(B&&B.preventScrollReset)===!0,ce&&gr(ce.formMethod)){Xc(x,O,X,Te,K,ue.active,Q,ce);return}Pe.set(x,{routeId:O,path:X}),Gp(x,O,X,Te,K,ue.active,Q,ce)}async function Xc(x,O,V,B,Q,te,ne,K){vt(),Pe.delete(x);function ue(Ve){if(!Ve.route.action&&!Ve.route.lazy){let Xn=pn(405,{method:K.formMethod,pathname:V,routeId:O});return vn(x,O,Xn,{flushSync:ne}),!0}return!1}if(!te&&ue(B))return;let X=k.fetchers.get(x);rt(x,tL(K,X),{flushSync:ne});let ce=new AbortController,Ne=Ho(t.history,V,ce.signal,K);if(te){let Ve=await Nr(Q,V,Ne.signal);if(Ve.type==="aborted")return;if(Ve.type==="error"){let{error:Xn}=kr(V,Ve);vn(x,O,Xn,{flushSync:ne});return}else if(Ve.matches){if(Q=Ve.matches,B=su(Q,V),ue(B))return}else{vn(x,O,pn(404,{pathname:V}),{flushSync:ne});return}}de.set(x,ce);let Te=$,ke=(await Yr("action",Ne,[B],Q))[0];if(Ne.signal.aborted){de.get(x)===ce&&de.delete(x);return}if(d.v7_fetcherPersist&&At.has(x)){if(qs(ke)||Vn(ke)){rt(x,$i(void 0));return}}else{if(qs(ke))if(de.delete(x),J>Te){rt(x,$i(void 0));return}else return Ee.add(x),rt(x,Hl(K)),Qr(Ne,ke,{fetcherSubmission:K});if(Vn(ke)){vn(x,O,ke.error);return}}if(Hs(ke))throw pn(400,{type:"defer-action"});let wt=k.navigation.location||k.location,it=Ho(t.history,wt,ce.signal),Jr=a||o,ur=k.navigation.state!=="idle"?js(Jr,k.navigation.location,l):k.matches;ge(ur,"Didn't find any matches after fetcher action");let Xr=++$;se.set(x,Xr);let Mi=Hl(K,ke.data);k.fetchers.set(x,Mi);let[cr,xn]=Y0(t.history,k,ur,K,wt,!1,d.unstable_skipActionErrorRevalidation,oe,Be,Me,At,Pe,Ee,Jr,l,[B.route.id,ke]);xn.filter(Ve=>Ve.key!==x).forEach(Ve=>{let Xn=Ve.key,Bo=k.fetchers.get(Xn),Pl=Hl(void 0,Bo?Bo.data:void 0);k.fetchers.set(Xn,Pl),de.has(Xn)&&wn(Xn),Ve.controller&&de.set(Xn,Ve.controller)}),xt({fetchers:new Map(k.fetchers)});let Vi=()=>xn.forEach(Ve=>wn(Ve.key));ce.signal.addEventListener("abort",Vi);let{loaderResults:xr,fetcherResults:Jn}=await Vo(k.matches,ur,cr,xn,it);if(ce.signal.aborted)return;ce.signal.removeEventListener("abort",Vi),se.delete(x),de.delete(x),xn.forEach(Ve=>de.delete(Ve.key));let fe=sT([...xr,...Jn]);if(fe){if(fe.idx>=cr.length){let Ve=xn[fe.idx-cr.length].key;Ee.add(Ve)}return Qr(it,fe.result)}let{loaderData:st,errors:Qt}=tT(k,k.matches,cr,xr,void 0,xn,Jn,Ft);if(k.fetchers.has(x)){let Ve=$i(ke.data);k.fetchers.set(x,Ve)}Fo(Xr),k.navigation.state==="loading"&&Xr>J?(ge(S,"Expected pending action"),C&&C.abort(),Pr(k.navigation.location,{matches:ur,loaderData:st,errors:Qt,fetchers:new Map(k.fetchers)})):(xt({errors:Qt,loaderData:nT(k.loaderData,st,ur,Qt),fetchers:new Map(k.fetchers)}),oe=!1)}async function Gp(x,O,V,B,Q,te,ne,K){let ue=k.fetchers.get(x);rt(x,Hl(K,ue?ue.data:void 0),{flushSync:ne});let X=new AbortController,ce=Ho(t.history,V,X.signal);if(te){let ke=await Nr(Q,V,ce.signal);if(ke.type==="aborted")return;if(ke.type==="error"){let{error:wt}=kr(V,ke);vn(x,O,wt,{flushSync:ne});return}else if(ke.matches)Q=ke.matches,B=su(Q,V);else{vn(x,O,pn(404,{pathname:V}),{flushSync:ne});return}}de.set(x,X);let Ne=$,Ie=(await Yr("loader",ce,[B],Q))[0];if(Hs(Ie)&&(Ie=await dR(Ie,ce.signal,!0)||Ie),de.get(x)===X&&de.delete(x),!ce.signal.aborted){if(At.has(x)){rt(x,$i(void 0));return}if(qs(Ie))if(J>Ne){rt(x,$i(void 0));return}else{Ee.add(x),await Qr(ce,Ie);return}if(Vn(Ie)){vn(x,O,Ie.error);return}ge(!Hs(Ie),"Unhandled fetcher deferred data"),rt(x,$i(Ie.data))}}async function Qr(x,O,V){let{submission:B,fetcherSubmission:Q,replace:te}=V===void 0?{}:V;O.response.headers.has("X-Remix-Revalidate")&&(oe=!0);let ne=O.response.headers.get("Location");ge(ne,"Expected a Location header on the redirect Response"),ne=Z0(ne,new URL(x.url),l);let K=Zu(k.location,ne,{_isRedirect:!0});if(n){let Ie=!1;if(O.response.headers.has("X-Remix-Reload-Document"))Ie=!0;else if(sv.test(ne)){const ke=t.history.createURL(ne);Ie=ke.origin!==e.location.origin||ol(ke.pathname,l)==null}if(Ie){te?e.location.replace(ne):e.location.assign(ne);return}}C=null;let ue=te===!0?mt.Replace:mt.Push,{formMethod:X,formAction:ce,formEncType:Ne}=k.navigation;!B&&!Q&&X&&ce&&Ne&&(B=aT(k.navigation));let Te=B||Q;if(LO.has(O.response.status)&&Te&&gr(Te.formMethod))await Ar(ue,K,{submission:at({},Te,{formAction:ne}),preventScrollReset:w});else{let Ie=Dg(K,B);await Ar(ue,K,{overrideNavigation:Ie,fetcherSubmission:Q,preventScrollReset:w})}}async function Yr(x,O,V,B){try{let Q=await WO(c,x,O,V,B,s,i);return await Promise.all(Q.map((te,ne)=>{if(JO(te)){let K=te.result;return{type:Ge.redirect,response:KO(K,O,V[ne].route.id,B,l,d.v7_relativeSplatPath)}}return qO(te)}))}catch(Q){return V.map(()=>({type:Ge.error,error:Q}))}}async function Vo(x,O,V,B,Q){let[te,...ne]=await Promise.all([V.length?Yr("loader",Q,V,O):[],...B.map(K=>{if(K.matches&&K.match&&K.controller){let ue=Ho(t.history,K.path,K.controller.signal);return Yr("loader",ue,[K.match],K.matches).then(X=>X[0])}else return Promise.resolve({type:Ge.error,error:pn(404,{pathname:K.path})})})]);return await Promise.all([oT(x,V,te,te.map(()=>Q.signal),!1,k.loaderData),oT(x,B.map(K=>K.match),ne,B.map(K=>K.controller?K.controller.signal:null),!0)]),{loaderResults:te,fetcherResults:ne}}function vt(){oe=!0,Be.push(...ks()),Pe.forEach((x,O)=>{de.has(O)&&(Me.push(O),wn(O))})}function rt(x,O,V){V===void 0&&(V={}),k.fetchers.set(x,O),xt({fetchers:new Map(k.fetchers)},{flushSync:(V&&V.flushSync)===!0})}function vn(x,O,V,B){B===void 0&&(B={});let Q=Su(k.matches,O);As(x),xt({errors:{[Q.route.id]:V},fetchers:new Map(k.fetchers)},{flushSync:(B&&B.flushSync)===!0})}function El(x){return d.v7_fetcherPersist&&(ze.set(x,(ze.get(x)||0)+1),At.has(x)&&At.delete(x)),k.fetchers.get(x)||MO}function As(x){let O=k.fetchers.get(x);de.has(x)&&!(O&&O.state==="loading"&&se.has(x))&&wn(x),Pe.delete(x),se.delete(x),Ee.delete(x),At.delete(x),k.fetchers.delete(x)}function Qp(x){if(d.v7_fetcherPersist){let O=(ze.get(x)||0)-1;O<=0?(ze.delete(x),At.add(x)):ze.set(x,O)}else As(x);xt({fetchers:new Map(k.fetchers)})}function wn(x){let O=de.get(x);ge(O,"Expected fetch controller: "+x),O.abort(),de.delete(x)}function Tl(x){for(let O of x){let V=El(O),B=$i(V.data);k.fetchers.set(O,B)}}function Il(){let x=[],O=!1;for(let V of Ee){let B=k.fetchers.get(V);ge(B,"Expected fetcher: "+V),B.state==="loading"&&(Ee.delete(V),x.push(V),O=!0)}return Tl(x),O}function Fo(x){let O=[];for(let[V,B]of se)if(B<x){let Q=k.fetchers.get(V);ge(Q,"Expected fetcher: "+V),Q.state==="loading"&&(wn(V),se.delete(V),O.push(V))}return Tl(O),O.length>0}function Yp(x,O){let V=k.blockers.get(x)||Wl;return Ut.get(x)!==O&&Ut.set(x,O),V}function Zc(x){k.blockers.delete(x),Ut.delete(x)}function Li(x,O){let V=k.blockers.get(x)||Wl;ge(V.state==="unblocked"&&O.state==="blocked"||V.state==="blocked"&&O.state==="blocked"||V.state==="blocked"&&O.state==="proceeding"||V.state==="blocked"&&O.state==="unblocked"||V.state==="proceeding"&&O.state==="unblocked","Invalid blocker state transition: "+V.state+" -> "+O.state);let B=new Map(k.blockers);B.set(x,O),xt({blockers:B})}function Sl(x){let{currentLocation:O,nextLocation:V,historyAction:B}=x;if(Ut.size===0)return;Ut.size>1&&La(!1,"A router only supports one blocker at a time");let Q=Array.from(Ut.entries()),[te,ne]=Q[Q.length-1],K=k.blockers.get(te);if(!(K&&K.state==="proceeding")&&ne({currentLocation:O,nextLocation:V,historyAction:B}))return te}function Uo(x){let O=pn(404,{pathname:x}),V=a||o,{matches:B,route:Q}=iT(V);return ks(),{notFoundMatches:B,route:Q,error:O}}function kr(x,O){let V=O.partialMatches,B=V[V.length-1].route,Q=pn(400,{type:"route-discovery",routeId:B.id,pathname:x,message:O.error!=null&&"message"in O.error?O.error:String(O.error)});return{notFoundMatches:V,route:B,error:Q}}function ks(x){let O=[];return Ft.forEach((V,B)=>{(!x||x(B))&&(V.cancel(),O.push(B),Ft.delete(B))}),O}function Cl(x,O,V){if(_=x,I=O,T=V||null,!v&&k.navigation===xg){v=!0;let B=bs(k.location,k.matches);B!=null&&xt({restoreScrollPosition:B})}return()=>{_=null,I=null,T=null}}function br(x,O){return T&&T(x,O.map(B=>fO(B,k.loaderData)))||x.key}function eh(x,O){if(_&&I){let V=br(x,O);_[V]=I()}}function bs(x,O){if(_){let V=br(x,O),B=_[V];if(typeof B=="number")return B}return null}function Rl(x,O,V){if(h)if(x){if(x[x.length-1].route.path==="*")return{active:!0,matches:td(O,V,l,!0)}}else return{active:!0,matches:td(O,V,l,!0)||[]};return{active:!1,matches:null}}async function Nr(x,O,V){let B=x,Q=B.length>0?B[B.length-1].route:null;for(;;){try{await $O(h,O,B,o||a,s,i,Yn,V)}catch(X){return{type:"error",error:X,partialMatches:B}}if(V.aborted)return{type:"aborted"};let te=a||o,ne=js(te,O,l),K=!1;if(ne){let X=ne[ne.length-1].route;if(X.index)return{type:"success",matches:ne};if(X.path&&X.path.length>0)if(X.path==="*")K=!0;else return{type:"success",matches:ne}}let ue=td(te,O,l,!0);if(!ue||B.map(X=>X.route.id).join("-")===ue.map(X=>X.route.id).join("-"))return{type:"success",matches:K?ne:null};if(B=ue,Q=B[B.length-1].route,Q.path==="*")return{type:"success",matches:B}}}function th(x){s={},a=ec(x,i,void 0,s)}return M={get basename(){return l},get future(){return d},get state(){return k},get routes(){return o},get window(){return e},initialize:qp,subscribe:Lo,enableScrollRestoration:Cl,navigate:Mo,fetch:wl,revalidate:yl,createHref:x=>t.history.createHref(x),encodeLocation:x=>t.history.encodeLocation(x),getFetcher:El,deleteFetcher:Qp,dispose:Oo,getBlocker:Yp,deleteBlocker:Zc,patchRoutes(x,O){return uR(x,O,o||a,s,i)},_internalFetchControllers:de,_internalActiveDeferreds:Ft,_internalSetRoutes:th},M}function UO(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function u_(t,e,n,r,i,s,o,a){let l,c;if(o){l=[];for(let d of e)if(l.push(d),d.route.id===o){c=d;break}}else l=e,c=e[e.length-1];let h=Hf(i||".",Wf(l,s),ol(t.pathname,n)||t.pathname,a==="path");return i==null&&(h.search=t.search,h.hash=t.hash),(i==null||i===""||i===".")&&c&&c.route.index&&!ov(h.search)&&(h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(h.pathname=h.pathname==="/"?n:pi([n,h.pathname])),lo(h)}function Q0(t,e,n,r){if(!r||!UO(r))return{path:n};if(r.formMethod&&!ZO(r.formMethod))return{path:n,error:pn(405,{method:r.formMethod})};let i=()=>({path:n,error:pn(400,{type:"invalid-body"})}),s=r.formMethod||"get",o=t?s.toUpperCase():s.toLowerCase(),a=cR(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!gr(o))return i();let f=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((m,_)=>{let[T,I]=_;return""+m+T+"="+I+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:void 0,text:f}}}else if(r.formEncType==="application/json"){if(!gr(o))return i();try{let f=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:f,text:void 0}}}catch{return i()}}}ge(typeof FormData=="function","FormData is not available in this environment");let l,c;if(r.formData)l=c_(r.formData),c=r.formData;else if(r.body instanceof FormData)l=c_(r.body),c=r.body;else if(r.body instanceof URLSearchParams)l=r.body,c=eT(l);else if(r.body==null)l=new URLSearchParams,c=new FormData;else try{l=new URLSearchParams(r.body),c=eT(l)}catch{return i()}let h={formMethod:o,formAction:a,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(gr(h.formMethod))return{path:n,submission:h};let d=Ni(n);return e&&d.search&&ov(d.search)&&l.append("index",""),d.search="?"+l,{path:lo(d),submission:h}}function BO(t,e){let n=t;if(e){let r=t.findIndex(i=>i.route.id===e);r>=0&&(n=t.slice(0,r))}return n}function Y0(t,e,n,r,i,s,o,a,l,c,h,d,f,m,_,T){let I=T?Vn(T[1])?T[1].error:T[1].data:void 0,v=t.createURL(e.location),y=t.createURL(i),R=T&&Vn(T[1])?T[0]:void 0,N=R?BO(n,R):n,M=T?T[1].statusCode:void 0,k=o&&M&&M>=400,S=N.filter((C,A)=>{let{route:b}=C;if(b.lazy)return!0;if(b.loader==null)return!1;if(s)return typeof b.loader!="function"||b.loader.hydrate?!0:e.loaderData[b.id]===void 0&&(!e.errors||e.errors[b.id]===void 0);if(jO(e.loaderData,e.matches[A],C)||l.some(oe=>oe===C.route.id))return!0;let D=e.matches[A],P=C;return J0(C,at({currentUrl:v,currentParams:D.params,nextUrl:y,nextParams:P.params},r,{actionResult:I,unstable_actionStatus:M,defaultShouldRevalidate:k?!1:a||v.pathname+v.search===y.pathname+y.search||v.search!==y.search||lR(D,P)}))}),w=[];return d.forEach((C,A)=>{if(s||!n.some(Be=>Be.route.id===C.routeId)||h.has(A))return;let b=js(m,C.path,_);if(!b){w.push({key:A,routeId:C.routeId,path:C.path,matches:null,match:null,controller:null});return}let D=e.fetchers.get(A),P=su(b,C.path),oe=!1;f.has(A)?oe=!1:c.includes(A)?oe=!0:D&&D.state!=="idle"&&D.data===void 0?oe=a:oe=J0(P,at({currentUrl:v,currentParams:e.matches[e.matches.length-1].params,nextUrl:y,nextParams:n[n.length-1].params},r,{actionResult:I,unstable_actionStatus:M,defaultShouldRevalidate:k?!1:a})),oe&&w.push({key:A,routeId:C.routeId,path:C.path,matches:b,match:P,controller:new AbortController})}),[S,w]}function jO(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function lR(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function J0(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}async function $O(t,e,n,r,i,s,o,a){let l=[e,...n.map(c=>c.route.id)].join("-");try{let c=o.get(l);c||(c=t({path:e,matches:n,patch:(h,d)=>{a.aborted||uR(h,d,r,i,s)}}),o.set(l,c)),c&&YO(c)&&await c}finally{o.delete(l)}}function uR(t,e,n,r,i){if(t){var s;let o=r[t];ge(o,"No route found to patch children into: routeId = "+t);let a=ec(e,i,[t,"patch",String(((s=o.children)==null?void 0:s.length)||"0")],r);o.children?o.children.push(...a):o.children=a}else{let o=ec(e,i,["patch",String(n.length||"0")],r);n.push(...o)}}async function X0(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];ge(i,"No route found in manifest");let s={};for(let o in r){let l=i[o]!==void 0&&o!=="hasErrorBoundary";La(!l,'Route "'+i.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!l&&!hO.has(o)&&(s[o]=r[o])}Object.assign(i,s),Object.assign(i,at({},e(i),{lazy:void 0}))}function zO(t){return Promise.all(t.matches.map(e=>e.resolve()))}async function WO(t,e,n,r,i,s,o,a){let l=r.reduce((d,f)=>d.add(f.route.id),new Set),c=new Set,h=await t({matches:i.map(d=>{let f=l.has(d.route.id);return at({},d,{shouldLoad:f,resolve:_=>(c.add(d.route.id),f?HO(e,n,d,s,o,_,a):Promise.resolve({type:Ge.data,result:void 0}))})}),request:n,params:i[0].params,context:a});return i.forEach(d=>ge(c.has(d.route.id),'`match.resolve()` was not called for route id "'+d.route.id+'". You must call `match.resolve()` on every match passed to `dataStrategy` to ensure all routes are properly loaded.')),h.filter((d,f)=>l.has(i[f].route.id))}async function HO(t,e,n,r,i,s,o){let a,l,c=h=>{let d,f=new Promise((T,I)=>d=I);l=()=>d(),e.signal.addEventListener("abort",l);let m=T=>typeof h!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):h({request:e,params:n.params,context:o},...T!==void 0?[T]:[]),_;return s?_=s(T=>m(T)):_=(async()=>{try{return{type:"data",result:await m()}}catch(T){return{type:"error",result:T}}})(),Promise.race([_,f])};try{let h=n.route[t];if(n.route.lazy)if(h){let d,[f]=await Promise.all([c(h).catch(m=>{d=m}),X0(n.route,i,r)]);if(d!==void 0)throw d;a=f}else if(await X0(n.route,i,r),h=n.route[t],h)a=await c(h);else if(t==="action"){let d=new URL(e.url),f=d.pathname+d.search;throw pn(405,{method:e.method,pathname:f,routeId:n.route.id})}else return{type:Ge.data,result:void 0};else if(h)a=await c(h);else{let d=new URL(e.url),f=d.pathname+d.search;throw pn(404,{pathname:f})}ge(a.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(h){return{type:Ge.error,result:h}}finally{l&&e.signal.removeEventListener("abort",l)}return a}async function qO(t){let{result:e,type:n,status:r}=t;if(hR(e)){let o;try{let a=e.headers.get("Content-Type");a&&/\bapplication\/json\b/.test(a)?e.body==null?o=null:o=await e.json():o=await e.text()}catch(a){return{type:Ge.error,error:a}}return n===Ge.error?{type:Ge.error,error:new iv(e.status,e.statusText,o),statusCode:e.status,headers:e.headers}:{type:Ge.data,data:o,statusCode:e.status,headers:e.headers}}if(n===Ge.error)return{type:Ge.error,error:e,statusCode:qf(e)?e.status:r};if(XO(e)){var i,s;return{type:Ge.deferred,deferredData:e,statusCode:(i=e.init)==null?void 0:i.status,headers:((s=e.init)==null?void 0:s.headers)&&new Headers(e.init.headers)}}return{type:Ge.data,data:e,statusCode:r}}function KO(t,e,n,r,i,s){let o=t.headers.get("Location");if(ge(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!sv.test(o)){let a=r.slice(0,r.findIndex(l=>l.route.id===n)+1);o=u_(new URL(e.url),a,i,!0,o,s),t.headers.set("Location",o)}return t}function Z0(t,e,n){if(sv.test(t)){let r=t,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),s=ol(i.pathname,n)!=null;if(i.origin===e.origin&&s)return i.pathname+i.search+i.hash}return t}function Ho(t,e,n,r){let i=t.createURL(cR(e)).toString(),s={signal:n};if(r&&gr(r.formMethod)){let{formMethod:o,formEncType:a}=r;s.method=o.toUpperCase(),a==="application/json"?(s.headers=new Headers({"Content-Type":a}),s.body=JSON.stringify(r.json)):a==="text/plain"?s.body=r.text:a==="application/x-www-form-urlencoded"&&r.formData?s.body=c_(r.formData):s.body=r.formData}return new Request(i,s)}function c_(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function eT(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function GO(t,e,n,r,i,s){let o={},a=null,l,c=!1,h={},d=r&&Vn(r[1])?r[1].error:void 0;return n.forEach((f,m)=>{let _=e[m].route.id;if(ge(!qs(f),"Cannot handle redirect results in processLoaderData"),Vn(f)){let T=f.error;if(d!==void 0&&(T=d,d=void 0),a=a||{},s)a[_]=T;else{let I=Su(t,_);a[I.route.id]==null&&(a[I.route.id]=T)}o[_]=void 0,c||(c=!0,l=qf(f.error)?f.error.status:500),f.headers&&(h[_]=f.headers)}else Hs(f)?(i.set(_,f.deferredData),o[_]=f.deferredData.data,f.statusCode!=null&&f.statusCode!==200&&!c&&(l=f.statusCode),f.headers&&(h[_]=f.headers)):(o[_]=f.data,f.statusCode&&f.statusCode!==200&&!c&&(l=f.statusCode),f.headers&&(h[_]=f.headers))}),d!==void 0&&r&&(a={[r[0]]:d},o[r[0]]=void 0),{loaderData:o,errors:a,statusCode:l||200,loaderHeaders:h}}function tT(t,e,n,r,i,s,o,a){let{loaderData:l,errors:c}=GO(e,n,r,i,a,!1);for(let h=0;h<s.length;h++){let{key:d,match:f,controller:m}=s[h];ge(o!==void 0&&o[h]!==void 0,"Did not find corresponding fetcher result");let _=o[h];if(!(m&&m.signal.aborted))if(Vn(_)){let T=Su(t.matches,f==null?void 0:f.route.id);c&&c[T.route.id]||(c=at({},c,{[T.route.id]:_.error})),t.fetchers.delete(d)}else if(qs(_))ge(!1,"Unhandled fetcher revalidation redirect");else if(Hs(_))ge(!1,"Unhandled fetcher deferred data");else{let T=$i(_.data);t.fetchers.set(d,T)}}return{loaderData:l,errors:c}}function nT(t,e,n,r){let i=at({},e);for(let s of n){let o=s.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(i[o]=e[o]):t[o]!==void 0&&s.route.loader&&(i[o]=t[o]),r&&r.hasOwnProperty(o))break}return i}function rT(t){return t?Vn(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Su(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function iT(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function pn(t,e){let{pathname:n,routeId:r,method:i,type:s,message:o}=e===void 0?{}:e,a="Unknown Server Error",l="Unknown @remix-run/router error";return t===400?(a="Bad Request",s==="route-discovery"?l='Unable to match URL "'+n+'" - the `children()` function for '+("route `"+r+"` threw the following error:\n"+o):i&&n&&r?l="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":s==="defer-action"?l="defer() is not supported in actions":s==="invalid-body"&&(l="Unable to encode submission body")):t===403?(a="Forbidden",l='Route "'+r+'" does not match URL "'+n+'"'):t===404?(a="Not Found",l='No route matches URL "'+n+'"'):t===405&&(a="Method Not Allowed",i&&n&&r?l="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(l='Invalid request method "'+i.toUpperCase()+'"')),new iv(t||500,a,new Error(l),!0)}function sT(t){for(let e=t.length-1;e>=0;e--){let n=t[e];if(qs(n))return{result:n,idx:e}}}function cR(t){let e=typeof t=="string"?Ni(t):t;return lo(at({},e,{hash:""}))}function QO(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function YO(t){return typeof t=="object"&&t!=null&&"then"in t}function JO(t){return hR(t.result)&&OO.has(t.result.status)}function Hs(t){return t.type===Ge.deferred}function Vn(t){return t.type===Ge.error}function qs(t){return(t&&t.type)===Ge.redirect}function XO(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function hR(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function ZO(t){return DO.has(t.toLowerCase())}function gr(t){return NO.has(t.toLowerCase())}async function oT(t,e,n,r,i,s){for(let o=0;o<n.length;o++){let a=n[o],l=e[o];if(!l)continue;let c=t.find(d=>d.route.id===l.route.id),h=c!=null&&!lR(c,l)&&(s&&s[l.route.id])!==void 0;if(Hs(a)&&(i||h)){let d=r[o];ge(d,"Expected an AbortSignal for revalidating fetcher deferred result"),await dR(a,d,i).then(f=>{f&&(n[o]=f||n[o])})}}}async function dR(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:Ge.data,data:t.deferredData.unwrappedData}}catch(i){return{type:Ge.error,error:i}}return{type:Ge.data,data:t.deferredData.data}}}function ov(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function su(t,e){let n=typeof e=="string"?Ni(e).search:e.search;if(t[t.length-1].route.index&&ov(n||""))return t[t.length-1];let r=sR(t);return r[r.length-1]}function aT(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:s,json:o}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function Dg(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function eL(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Hl(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function tL(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function $i(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function nL(t,e){try{let n=t.sessionStorage.getItem(aR);if(n){let r=JSON.parse(n);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function rL(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(aR,JSON.stringify(n))}catch(r){La(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.24.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function tc(){return tc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tc.apply(this,arguments)}const Kf=F.createContext(null),fR=F.createContext(null),Ss=F.createContext(null),Gf=F.createContext(null),xi=F.createContext({outlet:null,matches:[],isDataRoute:!1}),pR=F.createContext(null);function iL(t,e){let{relative:n}=e===void 0?{}:e;al()||ge(!1);let{basename:r,navigator:i}=F.useContext(Ss),{hash:s,pathname:o,search:a}=_R(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:pi([r,o])),i.createHref({pathname:l,search:a,hash:s})}function al(){return F.useContext(Gf)!=null}function Nc(){return al()||ge(!1),F.useContext(Gf).location}function gR(t){F.useContext(Ss).static||F.useLayoutEffect(t)}function mR(){let{isDataRoute:t}=F.useContext(xi);return t?yL():sL()}function sL(){al()||ge(!1);let t=F.useContext(Kf),{basename:e,future:n,navigator:r}=F.useContext(Ss),{matches:i}=F.useContext(xi),{pathname:s}=Nc(),o=JSON.stringify(Wf(i,n.v7_relativeSplatPath)),a=F.useRef(!1);return gR(()=>{a.current=!0}),F.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=Hf(c,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:pi([e,d.pathname])),(h.replace?r.replace:r.push)(d,h.state,h)},[e,r,o,s,t])}const oL=F.createContext(null);function aL(t){let e=F.useContext(xi).outlet;return e&&F.createElement(oL.Provider,{value:t},e)}function _R(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=F.useContext(Ss),{matches:i}=F.useContext(xi),{pathname:s}=Nc(),o=JSON.stringify(Wf(i,r.v7_relativeSplatPath));return F.useMemo(()=>Hf(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function lL(t,e,n,r){al()||ge(!1);let{navigator:i}=F.useContext(Ss),{matches:s}=F.useContext(xi),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Nc(),h;if(e){var d;let I=typeof e=="string"?Ni(e):e;l==="/"||(d=I.pathname)!=null&&d.startsWith(l)||ge(!1),h=I}else h=c;let f=h.pathname||"/",m=f;if(l!=="/"){let I=l.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(I.length).join("/")}let _=js(t,{pathname:m}),T=fL(_&&_.map(I=>Object.assign({},I,{params:Object.assign({},a,I.params),pathname:pi([l,i.encodeLocation?i.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?l:pi([l,i.encodeLocation?i.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),s,n,r);return e&&T?F.createElement(Gf.Provider,{value:{location:tc({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:mt.Pop}},T):T}function uL(){let t=_L(),e=qf(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return F.createElement(F.Fragment,null,F.createElement("h2",null,"Unexpected Application Error!"),F.createElement("h3",{style:{fontStyle:"italic"}},e),n?F.createElement("pre",{style:i},n):null,s)}const cL=F.createElement(uL,null);class hL extends F.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?F.createElement(xi.Provider,{value:this.props.routeContext},F.createElement(pR.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function dL(t){let{routeContext:e,match:n,children:r}=t,i=F.useContext(Kf);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),F.createElement(xi.Provider,{value:e},r)}function fL(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let h=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);h>=0||ge(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=h),d.route.id){let{loaderData:f,errors:m}=n,_=d.route.loader&&f[d.route.id]===void 0&&(!m||m[d.route.id]===void 0);if(d.route.lazy||_){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,d,f)=>{let m,_=!1,T=null,I=null;n&&(m=a&&d.route.id?a[d.route.id]:void 0,T=d.route.errorElement||cL,l&&(c<0&&f===0?(vL("route-fallback",!1),_=!0,I=null):c===f&&(_=!0,I=d.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,f+1)),y=()=>{let R;return m?R=T:_?R=I:d.route.Component?R=F.createElement(d.route.Component,null):d.route.element?R=d.route.element:R=h,F.createElement(dL,{match:d,routeContext:{outlet:h,matches:v,isDataRoute:n!=null},children:R})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?F.createElement(hL,{location:n.location,revalidation:n.revalidation,component:T,error:m,children:y(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):y()},null)}var yR=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(yR||{}),Vd=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Vd||{});function pL(t){let e=F.useContext(Kf);return e||ge(!1),e}function gL(t){let e=F.useContext(fR);return e||ge(!1),e}function mL(t){let e=F.useContext(xi);return e||ge(!1),e}function vR(t){let e=mL(),n=e.matches[e.matches.length-1];return n.route.id||ge(!1),n.route.id}function _L(){var t;let e=F.useContext(pR),n=gL(Vd.UseRouteError),r=vR(Vd.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function yL(){let{router:t}=pL(yR.UseNavigateStable),e=vR(Vd.UseNavigateStable),n=F.useRef(!1);return gR(()=>{n.current=!0}),F.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,tc({fromRouteId:e},s)))},[t,e])}const lT={};function vL(t,e,n){!e&&!lT[t]&&(lT[t]=!0)}function wR(t){let{to:e,replace:n,state:r,relative:i}=t;al()||ge(!1);let{future:s,static:o}=F.useContext(Ss),{matches:a}=F.useContext(xi),{pathname:l}=Nc(),c=mR(),h=Hf(e,Wf(a,s.v7_relativeSplatPath),l,i==="path"),d=JSON.stringify(h);return F.useEffect(()=>c(JSON.parse(d),{replace:n,state:r,relative:i}),[c,d,i,n,r]),null}function $W(t){return aL(t.context)}function wL(t){let{basename:e="/",children:n=null,location:r,navigationType:i=mt.Pop,navigator:s,static:o=!1,future:a}=t;al()&&ge(!1);let l=e.replace(/^\/*/,"/"),c=F.useMemo(()=>({basename:l,navigator:s,static:o,future:tc({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=Ni(r));let{pathname:h="/",search:d="",hash:f="",state:m=null,key:_="default"}=r,T=F.useMemo(()=>{let I=ol(h,l);return I==null?null:{location:{pathname:I,search:d,hash:f,state:m,key:_},navigationType:i}},[l,h,d,f,m,_,i]);return T==null?null:F.createElement(Ss.Provider,{value:c},F.createElement(Gf.Provider,{children:n,value:T}))}new Promise(()=>{});function EL(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:F.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:F.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:F.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.24.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nc(){return nc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nc.apply(this,arguments)}function TL(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function IL(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function SL(t,e){return t.button===0&&(!e||e==="_self")&&!IL(t)}const CL=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],RL="6";try{window.__reactRouterVersion=RL}catch{}function PL(t,e){return FO({basename:e==null?void 0:e.basename,future:nc({},e==null?void 0:e.future,{v7_prependBasename:!0}),history:lO({window:e==null?void 0:e.window}),hydrationData:(e==null?void 0:e.hydrationData)||AL(),routes:t,mapRouteProperties:EL,unstable_dataStrategy:e==null?void 0:e.unstable_dataStrategy,unstable_patchRoutesOnMiss:e==null?void 0:e.unstable_patchRoutesOnMiss,window:e==null?void 0:e.window}).initialize()}function AL(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=nc({},e,{errors:kL(e.errors)})),e}function kL(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new iv(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let o=new s(i.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let s=new Error(i.message);s.stack="",n[r]=s}}else n[r]=i;return n}const bL=F.createContext({isTransitioning:!1}),NL=F.createContext(new Map),xL="startTransition",uT=UN[xL],DL="flushSync",cT=JD[DL];function OL(t){uT?uT(t):t()}function ql(t){cT?cT(t):t()}let LL=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}};function ML(t){let{fallbackElement:e,router:n,future:r}=t,[i,s]=F.useState(n.state),[o,a]=F.useState(),[l,c]=F.useState({isTransitioning:!1}),[h,d]=F.useState(),[f,m]=F.useState(),[_,T]=F.useState(),I=F.useRef(new Map),{v7_startTransition:v}=r||{},y=F.useCallback(S=>{v?OL(S):S()},[v]),R=F.useCallback((S,w)=>{let{deletedFetchers:C,unstable_flushSync:A,unstable_viewTransitionOpts:b}=w;C.forEach(P=>I.current.delete(P)),S.fetchers.forEach((P,oe)=>{P.data!==void 0&&I.current.set(oe,P.data)});let D=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!b||D){A?ql(()=>s(S)):y(()=>s(S));return}if(A){ql(()=>{f&&(h&&h.resolve(),f.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:b.currentLocation,nextLocation:b.nextLocation})});let P=n.window.document.startViewTransition(()=>{ql(()=>s(S))});P.finished.finally(()=>{ql(()=>{d(void 0),m(void 0),a(void 0),c({isTransitioning:!1})})}),ql(()=>m(P));return}f?(h&&h.resolve(),f.skipTransition(),T({state:S,currentLocation:b.currentLocation,nextLocation:b.nextLocation})):(a(S),c({isTransitioning:!0,flushSync:!1,currentLocation:b.currentLocation,nextLocation:b.nextLocation}))},[n.window,f,h,I,y]);F.useLayoutEffect(()=>n.subscribe(R),[n,R]),F.useEffect(()=>{l.isTransitioning&&!l.flushSync&&d(new LL)},[l]),F.useEffect(()=>{if(h&&o&&n.window){let S=o,w=h.promise,C=n.window.document.startViewTransition(async()=>{y(()=>s(S)),await w});C.finished.finally(()=>{d(void 0),m(void 0),a(void 0),c({isTransitioning:!1})}),m(C)}},[y,o,h,n.window]),F.useEffect(()=>{h&&o&&i.location.key===o.location.key&&h.resolve()},[h,f,i.location,o]),F.useEffect(()=>{!l.isTransitioning&&_&&(a(_.state),c({isTransitioning:!0,flushSync:!1,currentLocation:_.currentLocation,nextLocation:_.nextLocation}),T(void 0))},[l.isTransitioning,_]),F.useEffect(()=>{},[]);let N=F.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:S=>n.navigate(S),push:(S,w,C)=>n.navigate(S,{state:w,preventScrollReset:C==null?void 0:C.preventScrollReset}),replace:(S,w,C)=>n.navigate(S,{replace:!0,state:w,preventScrollReset:C==null?void 0:C.preventScrollReset})}),[n]),M=n.basename||"/",k=F.useMemo(()=>({router:n,navigator:N,static:!1,basename:M}),[n,N,M]);return F.createElement(F.Fragment,null,F.createElement(Kf.Provider,{value:k},F.createElement(fR.Provider,{value:i},F.createElement(NL.Provider,{value:I.current},F.createElement(bL.Provider,{value:l},F.createElement(wL,{basename:M,location:i.location,navigationType:i.historyAction,navigator:N,future:{v7_relativeSplatPath:n.future.v7_relativeSplatPath}},i.initialized||n.future.v7_partialHydration?F.createElement(VL,{routes:n.routes,future:n.future,state:i}):e))))),null)}function VL(t){let{routes:e,future:n,state:r}=t;return lL(e,void 0,r,n)}const FL=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",UL=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,WW=F.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:h,unstable_viewTransition:d}=e,f=TL(e,CL),{basename:m}=F.useContext(Ss),_,T=!1;if(typeof c=="string"&&UL.test(c)&&(_=c,FL))try{let R=new URL(window.location.href),N=c.startsWith("//")?new URL(R.protocol+c):new URL(c),M=ol(N.pathname,m);N.origin===R.origin&&M!=null?c=M+N.search+N.hash:T=!0}catch{}let I=iL(c,{relative:i}),v=BL(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:i,unstable_viewTransition:d});function y(R){r&&r(R),R.defaultPrevented||v(R)}return F.createElement("a",nc({},f,{href:_||I,onClick:T||s?r:y,ref:n,target:l}))});var hT;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(hT||(hT={}));var dT;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(dT||(dT={}));function BL(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=mR(),c=Nc(),h=_R(t,{relative:o});return F.useCallback(d=>{if(SL(d,n)){d.preventDefault();let f=r!==void 0?r:lo(c)===lo(h);l(t,{replace:f,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[c,l,h,r,i,n,t,s,o,a])}const fT=t=>{let e;const n=new Set,r=(h,d)=>{const f=typeof h=="function"?h(e):h;if(!Object.is(f,e)){const m=e;e=d??(typeof f!="object"||f===null)?f:Object.assign({},e,f),n.forEach(_=>_(e,m))}},i=()=>e,l={setState:r,getState:i,getInitialState:()=>c,subscribe:h=>(n.add(h),()=>n.delete(h)),destroy:()=>{n.clear()}},c=e=t(r,i,l);return l},jL=t=>t?fT(t):fT;var ER={exports:{}},TR={},IR={exports:{}},SR={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ma=F;function $L(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var zL=typeof Object.is=="function"?Object.is:$L,WL=Ma.useState,HL=Ma.useEffect,qL=Ma.useLayoutEffect,KL=Ma.useDebugValue;function GL(t,e){var n=e(),r=WL({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return qL(function(){i.value=n,i.getSnapshot=e,Og(i)&&s({inst:i})},[t,n,e]),HL(function(){return Og(i)&&s({inst:i}),t(function(){Og(i)&&s({inst:i})})},[t]),KL(n),n}function Og(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!zL(t,n)}catch{return!0}}function QL(t,e){return e()}var YL=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?QL:GL;SR.useSyncExternalStore=Ma.useSyncExternalStore!==void 0?Ma.useSyncExternalStore:YL;IR.exports=SR;var JL=IR.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qf=F,XL=JL;function ZL(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var eM=typeof Object.is=="function"?Object.is:ZL,tM=XL.useSyncExternalStore,nM=Qf.useRef,rM=Qf.useEffect,iM=Qf.useMemo,sM=Qf.useDebugValue;TR.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=nM(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=iM(function(){function l(m){if(!c){if(c=!0,h=m,m=r(m),i!==void 0&&o.hasValue){var _=o.value;if(i(_,m))return d=_}return d=m}if(_=d,eM(h,m))return _;var T=r(m);return i!==void 0&&i(_,T)?_:(h=m,d=T)}var c=!1,h,d,f=n===void 0?null:n;return[function(){return l(e())},f===null?void 0:function(){return l(f())}]},[e,n,r,i]);var a=tM(t,s[0],s[1]);return rM(function(){o.hasValue=!0,o.value=a},[a]),sM(a),a};ER.exports=TR;var oM=ER.exports;const aM=ay(oM),{useDebugValue:lM}=qe,{useSyncExternalStoreWithSelector:uM}=aM;const cM=t=>t;function hM(t,e=cM,n){const r=uM(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return lM(r),r}const pT=t=>{const e=typeof t=="function"?jL(t):t,n=(r,i)=>hM(e,r,i);return Object.assign(n,e),n},dM=t=>t?pT(t):pT,h_=new Map,Nh=t=>{const e=h_.get(t);return e?Object.fromEntries(Object.entries(e.stores).map(([n,r])=>[n,r.getState()])):{}},fM=(t,e,n)=>{if(t===void 0)return{type:"untracked",connection:e.connect(n)};const r=h_.get(n.name);if(r)return{type:"tracked",store:t,...r};const i={connection:e.connect(n),stores:{}};return h_.set(n.name,i),{type:"tracked",store:t,...i}},pM=(t,e={})=>(n,r,i)=>{const{enabled:s,anonymousActionType:o,store:a,...l}=e;let c;try{c=(s??!1)&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!c)return t(n,r,i);const{connection:h,...d}=fM(a,c,l);let f=!0;i.setState=(T,I,v)=>{const y=n(T,I);if(!f)return y;const R=v===void 0?{type:o||"anonymous"}:typeof v=="string"?{type:v}:v;return a===void 0?(h==null||h.send(R,r()),y):(h==null||h.send({...R,type:`${a}/${R.type}`},{...Nh(l.name),[a]:i.getState()}),y)};const m=(...T)=>{const I=f;f=!1,n(...T),f=I},_=t(i.setState,r,i);if(d.type==="untracked"?h==null||h.init(_):(d.stores[d.store]=i,h==null||h.init(Object.fromEntries(Object.entries(d.stores).map(([T,I])=>[T,T===d.store?_:I.getState()])))),i.dispatchFromDevtools&&typeof i.dispatch=="function"){let T=!1;const I=i.dispatch;i.dispatch=(...v)=>{I(...v)}}return h.subscribe(T=>{var I;switch(T.type){case"ACTION":if(typeof T.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return Lg(T.payload,v=>{if(v.type==="__setState"){if(a===void 0){m(v.state);return}Object.keys(v.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format. 
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const y=v.state[a];if(y==null)return;JSON.stringify(i.getState())!==JSON.stringify(y)&&m(y);return}i.dispatchFromDevtools&&typeof i.dispatch=="function"&&i.dispatch(v)});case"DISPATCH":switch(T.payload.type){case"RESET":return m(_),a===void 0?h==null?void 0:h.init(i.getState()):h==null?void 0:h.init(Nh(l.name));case"COMMIT":if(a===void 0){h==null||h.init(i.getState());return}return h==null?void 0:h.init(Nh(l.name));case"ROLLBACK":return Lg(T.state,v=>{if(a===void 0){m(v),h==null||h.init(i.getState());return}m(v[a]),h==null||h.init(Nh(l.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return Lg(T.state,v=>{if(a===void 0){m(v);return}JSON.stringify(i.getState())!==JSON.stringify(v[a])&&m(v[a])});case"IMPORT_STATE":{const{nextLiftedState:v}=T.payload,y=(I=v.computedStates.slice(-1)[0])==null?void 0:I.state;if(!y)return;m(a===void 0?y:y[a]),h==null||h.send(null,v);return}case"PAUSE_RECORDING":return f=!f}return}}),_},gM=pM,Lg=(t,e)=>{let n;try{n=JSON.parse(t)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}n!==void 0&&e(n)};var CR=Symbol.for("immer-nothing"),gT=Symbol.for("immer-draftable"),Hn=Symbol.for("immer-state");function _r(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Va=Object.getPrototypeOf;function Fa(t){return!!t&&!!t[Hn]}function uo(t){var e;return t?RR(t)||Array.isArray(t)||!!t[gT]||!!((e=t.constructor)!=null&&e[gT])||Jf(t)||Xf(t):!1}var mM=Object.prototype.constructor.toString();function RR(t){if(!t||typeof t!="object")return!1;const e=Va(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===mM}function Fd(t,e){Yf(t)===0?Reflect.ownKeys(t).forEach(n=>{e(n,t[n],t)}):t.forEach((n,r)=>e(r,n,t))}function Yf(t){const e=t[Hn];return e?e.type_:Array.isArray(t)?1:Jf(t)?2:Xf(t)?3:0}function d_(t,e){return Yf(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function PR(t,e,n){const r=Yf(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function _M(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Jf(t){return t instanceof Map}function Xf(t){return t instanceof Set}function Ms(t){return t.copy_||t.base_}function f_(t,e){if(Jf(t))return new Map(t);if(Xf(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=RR(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[Hn];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:t[o]})}return Object.create(Va(t),r)}else{const r=Va(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function av(t,e=!1){return Zf(t)||Fa(t)||!uo(t)||(Yf(t)>1&&(t.set=t.add=t.clear=t.delete=yM),Object.freeze(t),e&&Object.entries(t).forEach(([n,r])=>av(r,!0))),t}function yM(){_r(2)}function Zf(t){return Object.isFrozen(t)}var vM={};function co(t){const e=vM[t];return e||_r(0,t),e}var rc;function AR(){return rc}function wM(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function mT(t,e){e&&(co("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function p_(t){g_(t),t.drafts_.forEach(EM),t.drafts_=null}function g_(t){t===rc&&(rc=t.parent_)}function _T(t){return rc=wM(rc,t)}function EM(t){const e=t[Hn];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function yT(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[Hn].modified_&&(p_(e),_r(4)),uo(t)&&(t=Ud(e,t),e.parent_||Bd(e,t)),e.patches_&&co("Patches").generateReplacementPatches_(n[Hn].base_,t,e.patches_,e.inversePatches_)):t=Ud(e,n,[]),p_(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==CR?t:void 0}function Ud(t,e,n){if(Zf(e))return e;const r=e[Hn];if(!r)return Fd(e,(i,s)=>vT(t,r,e,i,s,n)),e;if(r.scope_!==t)return e;if(!r.modified_)return Bd(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),Fd(s,(a,l)=>vT(t,r,i,a,l,n,o)),Bd(t,i,!1),n&&t.patches_&&co("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function vT(t,e,n,r,i,s,o){if(Fa(i)){const a=s&&e&&e.type_!==3&&!d_(e.assigned_,r)?s.concat(r):void 0,l=Ud(t,i,a);if(PR(n,r,l),Fa(l))t.canAutoFreeze_=!1;else return}else o&&n.add(i);if(uo(i)&&!Zf(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;Ud(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&Bd(t,i)}}function Bd(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&av(e,n)}function TM(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:AR(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=lv;n&&(i=[r],s=ic);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var lv={get(t,e){if(e===Hn)return t;const n=Ms(t);if(!d_(n,e))return IM(t,n,e);const r=n[e];return t.finalized_||!uo(r)?r:r===Mg(t.base_,e)?(Vg(t),t.copy_[e]=__(r,t)):r},has(t,e){return e in Ms(t)},ownKeys(t){return Reflect.ownKeys(Ms(t))},set(t,e,n){const r=kR(Ms(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=Mg(Ms(t),e),s=i==null?void 0:i[Hn];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(_M(n,i)&&(n!==void 0||d_(t.base_,e)))return!0;Vg(t),m_(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return Mg(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,Vg(t),m_(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Ms(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){_r(11)},getPrototypeOf(t){return Va(t.base_)},setPrototypeOf(){_r(12)}},ic={};Fd(lv,(t,e)=>{ic[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});ic.deleteProperty=function(t,e){return ic.set.call(this,t,e,void 0)};ic.set=function(t,e,n){return lv.set.call(this,t[0],e,n,t[0])};function Mg(t,e){const n=t[Hn];return(n?Ms(n):t)[e]}function IM(t,e,n){var i;const r=kR(e,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function kR(t,e){if(!(e in t))return;let n=Va(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Va(n)}}function m_(t){t.modified_||(t.modified_=!0,t.parent_&&m_(t.parent_))}function Vg(t){t.copy_||(t.copy_=f_(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var SM=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const s=n;n=e;const o=this;return function(l=s,...c){return o.produce(l,h=>n.call(this,h,...c))}}typeof n!="function"&&_r(6),r!==void 0&&typeof r!="function"&&_r(7);let i;if(uo(e)){const s=_T(this),o=__(e,void 0);let a=!0;try{i=n(o),a=!1}finally{a?p_(s):g_(s)}return mT(s,r),yT(i,s)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===CR&&(i=void 0),this.autoFreeze_&&av(i,!0),r){const s=[],o=[];co("Patches").generateReplacementPatches_(e,i,s,o),r(s,o)}return i}else _r(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(o,...a)=>this.produceWithPatches(o,l=>e(l,...a));let r,i;return[this.produce(e,n,(o,a)=>{r=o,i=a}),r,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){uo(t)||_r(8),Fa(t)&&(t=CM(t));const e=_T(this),n=__(t,void 0);return n[Hn].isManual_=!0,g_(e),n}finishDraft(t,e){const n=t&&t[Hn];(!n||!n.isManual_)&&_r(9);const{scope_:r}=n;return mT(r,e),yT(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=co("Patches").applyPatches_;return Fa(t)?r(t,e):this.produce(t,i=>r(i,e))}};function __(t,e){const n=Jf(t)?co("MapSet").proxyMap_(t,e):Xf(t)?co("MapSet").proxySet_(t,e):TM(t,e);return(e?e.scope_:AR()).drafts_.push(n),n}function CM(t){return Fa(t)||_r(10,t),bR(t)}function bR(t){if(!uo(t)||Zf(t))return t;const e=t[Hn];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=f_(t,e.scope_.immer_.useStrictShallowCopy_)}else n=f_(t,!0);return Fd(n,(r,i)=>{PR(n,r,bR(i))}),e&&(e.finalized_=!1),n}var qn=new SM,$n=qn.produce;qn.produceWithPatches.bind(qn);qn.setAutoFreeze.bind(qn);qn.setUseStrictShallowCopy.bind(qn);qn.applyPatches.bind(qn);qn.createDraft.bind(qn);qn.finishDraft.bind(qn);const RM=t=>({isLoggedIn:null,currentUser:{uid:null,displayName:null,photoURL:null},updateCurrentUser:e=>{t(e===null?()=>({isLoggedIn:!1,currentUser:{uid:null,displayName:null,photoURL:null}}):$n(n=>{n.isLoggedIn=!0,n.currentUser.uid=e.uid,n.currentUser.displayName=e.displayName,n.currentUser.photoURL=e.photoURL}))}}),PM=t=>({currentChatInfo:{chatUID:null,userUID:null,tokenFCM:null},updateCurrentChatInfo:e=>{t($n(n=>{n.currentChatInfo={chatUID:e.chatUID,userUID:e.userUID,tokenFCM:e.tokenFCM}}))},resetCurrentChatInfo:()=>{t($n(e=>{e.currentChatInfo={chatUID:null,userUID:null,tokenFCM:null}}))}}),AM=t=>({message:"",setMessage:e=>{t($n(n=>{n.message=typeof e=="function"?e(n.message):e}))}}),kM=t=>({editingMessageInfo:null,updateEditingMessage:e=>{t($n(n=>{n.editingMessageInfo=e}))},resetEditingMessage:()=>{t($n(e=>{e.editingMessageInfo=null}))}}),bM=t=>({searchValue:"",updateSearchValue:e=>{t($n(n=>{n.searchValue=e}))},resetSearchValue:()=>{t($n(e=>{e.searchValue=""}))}}),NM=t=>({isSelectedMessages:!1,selectedDocDataMessage:null,updateIsSelectedMessages:e=>{t($n(n=>{n.isSelectedMessages=e}))},updateSelectedDocDataMessage:e=>{t($n(n=>{n.selectedDocDataMessage=typeof e=="function"?e(n.selectedDocDataMessage??[]):e}))},resetSelectedMessages:()=>{t($n(e=>{e.isSelectedMessages=!1,e.selectedDocDataMessage=null}))}}),xM=t=>({sidebarScreen:"default",updateSidebarScreen:e=>{t($n(n=>{n.sidebarScreen=e}))}}),DM=t=>({totalUnreadMessages:{},updateTotalUnreadMessages:e=>{t($n(n=>{n.totalUnreadMessages={...n.totalUnreadMessages,...e}}))}}),Ua=dM()(gM((...t)=>({...bM(...t),...RM(...t),...PM(...t),...xM(...t),...kM(...t),...AM(...t),...DM(...t),...NM(...t)}))),wT=({component:t,redirectTo:e="/authentication"})=>{const n=Ua(i=>i.isLoggedIn),r=Ua(i=>i.currentUser);return n&&r.displayName?Ct.jsx(t,{}):Ct.jsx(wR,{to:e})},OM=({component:t,redirectTo:e="/"})=>{const n=Ua(i=>i.isLoggedIn),r=Ua(i=>i.currentUser);return F.useEffect(()=>{r.displayName&&localStorage.removeItem("step")},[r]),Ct.jsxs(Ct.Fragment,{children:[n!==null&&!r.displayName&&Ct.jsx(F.Suspense,{children:Ct.jsx(t,{})}),n===!0&&r.displayName&&Ct.jsx(wR,{to:e})]})},LM=F.lazy(()=>rv(()=>import("./AuthPage-77f6301f.js"),["assets/AuthPage-77f6301f.js","assets/sprite-94821839.js","assets/convertTimeWithZero-0e4ead24.js","assets/Theme-289ba21b.js","assets/AuthPage-e8a0ccb9.css"])),MM=F.lazy(()=>rv(()=>import("./HomePage-55afc4cd.js"),["assets/HomePage-55afc4cd.js","assets/sprite-94821839.js","assets/useResizeWindow-95586f27.js","assets/SearchInput-14372a96.js","assets/Transition-6ede7eb0.js","assets/objectWithoutPropertiesLoose-68193569.js"])),VM=F.lazy(()=>rv(()=>import("./ChatPage-f03e86e4.js").then(t=>t.C),["assets/ChatPage-f03e86e4.js","assets/sprite-94821839.js","assets/useCloseModal-802af8f3.js","assets/FileInput-92924cf4.js","assets/useResizeWindow-95586f27.js","assets/convertTimeWithZero-0e4ead24.js","assets/ChatPage-b4370341.css"])),FM=PL([{path:"/authentication",element:Ct.jsx(OM,{component:LM,redirectTo:"/"})},{path:"/",element:Ct.jsx(wT,{component:MM,redirectTo:"/authentication"}),children:[{path:"/:id",element:Ct.jsx(wT,{component:VM,redirectTo:"/authentication"})}]}],{basename:"/react-web"}),UM=()=>Ct.jsx(ML,{router:FM});function BM(){if(console&&console.warn){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];typeof e[0]=="string"&&(e[0]=`react-i18next:: ${e[0]}`),console.warn(...e)}}const ET={};function y_(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];typeof e[0]=="string"&&ET[e[0]]||(typeof e[0]=="string"&&(ET[e[0]]=new Date),BM(...e))}const NR=(t,e)=>()=>{if(t.isInitialized)e();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),e()};t.on("initialized",n)}};function TT(t,e,n){t.loadNamespaces(e,NR(t,n))}function IT(t,e,n,r){typeof n=="string"&&(n=[n]),n.forEach(i=>{t.options.ns.indexOf(i)<0&&t.options.ns.push(i)}),t.loadLanguages(e,NR(t,r))}function jM(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=e.languages[0],i=e.options?e.options.fallbackLng:!1,s=e.languages[e.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(a,l)=>{const c=e.services.backendConnector.state[`${a}|${l}`];return c===-1||c===2};return n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!o(e.isLanguageChangingTo,t)?!1:!!(e.hasResourceBundle(r,t)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||o(r,t)&&(!i||o(s,t)))}function $M(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!e.languages||!e.languages.length?(y_("i18n.languages were undefined or empty",e.languages),!0):e.options.ignoreJSONStructure!==void 0?e.hasLoadedNamespace(t,{lng:n.lng,precheck:(i,s)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&i.services.backendConnector.backend&&i.isLanguageChangingTo&&!s(i.isLanguageChangingTo,t))return!1}}):jM(t,e,n)}const zM=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,WM={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},HM=t=>WM[t],qM=t=>t.replace(zM,HM);let v_={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:qM};function KM(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};v_={...v_,...t}}function GM(){return v_}let xR;function QM(t){xR=t}function YM(){return xR}const JM={type:"3rdParty",init(t){KM(t.options.react),QM(t)}},XM=F.createContext();class ZM{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const e2=(t,e)=>{const n=F.useRef();return F.useEffect(()=>{n.current=e?n.current:t},[t,e]),n.current};function t2(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:n}=e,{i18n:r,defaultNS:i}=F.useContext(XM)||{},s=n||r||YM();if(s&&!s.reportNamespaces&&(s.reportNamespaces=new ZM),!s){y_("You will need to pass in an i18next instance by using initReactI18next");const R=(M,k)=>typeof k=="string"?k:k&&typeof k=="object"&&typeof k.defaultValue=="string"?k.defaultValue:Array.isArray(M)?M[M.length-1]:M,N=[R,{},!1];return N.t=R,N.i18n={},N.ready=!1,N}s.options.react&&s.options.react.wait!==void 0&&y_("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const o={...GM(),...s.options.react,...e},{useSuspense:a,keyPrefix:l}=o;let c=t||i||s.options&&s.options.defaultNS;c=typeof c=="string"?[c]:c||["translation"],s.reportNamespaces.addUsedNamespaces&&s.reportNamespaces.addUsedNamespaces(c);const h=(s.isInitialized||s.initializedStoreOnce)&&c.every(R=>$M(R,s,o));function d(){return s.getFixedT(e.lng||null,o.nsMode==="fallback"?c:c[0],l)}const[f,m]=F.useState(d);let _=c.join();e.lng&&(_=`${e.lng}${_}`);const T=e2(_),I=F.useRef(!0);F.useEffect(()=>{const{bindI18n:R,bindI18nStore:N}=o;I.current=!0,!h&&!a&&(e.lng?IT(s,e.lng,c,()=>{I.current&&m(d)}):TT(s,c,()=>{I.current&&m(d)})),h&&T&&T!==_&&I.current&&m(d);function M(){I.current&&m(d)}return R&&s&&s.on(R,M),N&&s&&s.store.on(N,M),()=>{I.current=!1,R&&s&&R.split(" ").forEach(k=>s.off(k,M)),N&&s&&N.split(" ").forEach(k=>s.store.off(k,M))}},[s,_]);const v=F.useRef(!0);F.useEffect(()=>{I.current&&!v.current&&m(d),v.current=!1},[s,l]);const y=[f,s,h];if(y.t=f,y.i18n=s,y.ready=h,h||!h&&!a)return y;throw new Promise(R=>{e.lng?IT(s,e.lng,c,()=>R()):TT(s,c,()=>R())})}const n2={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){console&&console[t]&&console[t].apply(console,e)}};let r2=class w_{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,n)}init(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=e||n2,this.options=n,this.debug=n.debug}log(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"log","",!0)}warn(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"warn","",!0)}error(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"error","")}deprecate(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,r,i){return i&&!this.debug?null:(typeof e[0]=="string"&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new w_(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new w_(this.logger,e)}};var Fr=new r2;let ep=class{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const i=this.observers[r].get(n)||0;this.observers[r].set(n,i+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(o=>{let[a,l]=o;for(let c=0;c<l;c++)a(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(o=>{let[a,l]=o;for(let c=0;c<l;c++)a.apply(a,[e,...r])})}};function Kl(){let t,e;const n=new Promise((r,i)=>{t=r,e=i});return n.resolve=t,n.reject=e,n}function ST(t){return t==null?"":""+t}function i2(t,e,n){t.forEach(r=>{e[r]&&(n[r]=e[r])})}const s2=/###/g;function Cu(t,e,n){function r(a){return a&&a.indexOf("###")>-1?a.replace(s2,"."):a}function i(){return!t||typeof t=="string"}const s=typeof e!="string"?e:e.split(".");let o=0;for(;o<s.length-1;){if(i())return{};const a=r(s[o]);!t[a]&&n&&(t[a]=new n),Object.prototype.hasOwnProperty.call(t,a)?t=t[a]:t={},++o}return i()?{}:{obj:t,k:r(s[o])}}function CT(t,e,n){const{obj:r,k:i}=Cu(t,e,Object);if(r!==void 0||e.length===1){r[i]=n;return}let s=e[e.length-1],o=e.slice(0,e.length-1),a=Cu(t,o,Object);for(;a.obj===void 0&&o.length;)s=`${o[o.length-1]}.${s}`,o=o.slice(0,o.length-1),a=Cu(t,o,Object),a&&a.obj&&typeof a.obj[`${a.k}.${s}`]<"u"&&(a.obj=void 0);a.obj[`${a.k}.${s}`]=n}function o2(t,e,n,r){const{obj:i,k:s}=Cu(t,e,Object);i[s]=i[s]||[],r&&(i[s]=i[s].concat(n)),r||i[s].push(n)}function jd(t,e){const{obj:n,k:r}=Cu(t,e);if(n)return n[r]}function a2(t,e,n){const r=jd(t,n);return r!==void 0?r:jd(e,n)}function DR(t,e,n){for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?typeof t[r]=="string"||t[r]instanceof String||typeof e[r]=="string"||e[r]instanceof String?n&&(t[r]=e[r]):DR(t[r],e[r],n):t[r]=e[r]);return t}function qo(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var l2={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function u2(t){return typeof t=="string"?t.replace(/[&<>"'\/]/g,e=>l2[e]):t}class c2{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const h2=[" ",",","?","!",";"],d2=new c2(20);function f2(t,e,n){e=e||"",n=n||"";const r=h2.filter(o=>e.indexOf(o)<0&&n.indexOf(o)<0);if(r.length===0)return!0;const i=d2.getRegExp(`(${r.map(o=>o==="?"?"\\?":o).join("|")})`);let s=!i.test(t);if(!s){const o=t.indexOf(n);o>0&&!i.test(t.substring(0,o))&&(s=!0)}return s}function E_(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!t)return;if(t[e])return t[e];const r=e.split(n);let i=t;for(let s=0;s<r.length;){if(!i||typeof i!="object")return;let o,a="";for(let l=s;l<r.length;++l)if(l!==s&&(a+=n),a+=r[l],o=i[a],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&l<r.length-1)continue;s+=l-s+1;break}i=o}return i}function $d(t){return t&&t.indexOf("_")>0?t.replace("_","-"):t}class RT extends ep{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,o=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let a;e.indexOf(".")>-1?a=e.split("."):(a=[e,n],r&&(Array.isArray(r)?a.push(...r):typeof r=="string"&&s?a.push(...r.split(s)):a.push(r)));const l=jd(this.data,a);return!l&&!n&&!r&&e.indexOf(".")>-1&&(e=a[0],n=a[1],r=a.slice(2).join(".")),l||!o||typeof r!="string"?l:E_(this.data&&this.data[e]&&this.data[e][n],r,s)}addResource(e,n,r,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const o=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let a=[e,n];r&&(a=a.concat(o?r.split(o):r)),e.indexOf(".")>-1&&(a=e.split("."),i=n,n=a[1]),this.addNamespaces(n),CT(this.data,a,i),s.silent||this.emit("added",e,n,r,i)}addResources(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const s in r)(typeof r[s]=="string"||Array.isArray(r[s]))&&this.addResource(e,n,s,r[s],{silent:!0});i.silent||this.emit("added",e,n,r)}addResourceBundle(e,n,r,i,s){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},a=[e,n];e.indexOf(".")>-1&&(a=e.split("."),i=r,r=n,n=a[1]),this.addNamespaces(n);let l=jd(this.data,a)||{};o.skipCopy||(r=JSON.parse(JSON.stringify(r))),i?DR(l,r,s):l={...l,...r},CT(this.data,a,l),o.silent||this.emit("added",e,n,r)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(e,n)}:this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(i=>n[i]&&Object.keys(n[i]).length>0)}toJSON(){return this.data}}var OR={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,r,i){return t.forEach(s=>{this.processors[s]&&(e=this.processors[s].process(e,n,r,i))}),e}};const PT={};class zd extends ep{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),i2(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Fr.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const r=this.resolve(e,n);return r&&r.res!==void 0}extractFromKey(e,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let s=n.ns||this.options.defaultNS||[];const o=r&&e.indexOf(r)>-1,a=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!f2(e,r,i);if(o&&!a){const l=e.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:e,namespaces:s};const c=e.split(r);(r!==i||r===i&&this.options.ns.indexOf(c[0])>-1)&&(s=c.shift()),e=c.join(i)}return typeof s=="string"&&(s=[s]),{key:e,namespaces:s}}translate(e,n,r){if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof n=="object"&&(n={...n}),n||(n={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const i=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,s=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:o,namespaces:a}=this.extractFromKey(e[e.length-1],n),l=a[a.length-1],c=n.lng||this.language,h=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(c&&c.toLowerCase()==="cimode"){if(h){const N=n.nsSeparator||this.options.nsSeparator;return i?{res:`${l}${N}${o}`,usedKey:o,exactUsedKey:o,usedLng:c,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:`${l}${N}${o}`}return i?{res:o,usedKey:o,exactUsedKey:o,usedLng:c,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:o}const d=this.resolve(e,n);let f=d&&d.res;const m=d&&d.usedKey||o,_=d&&d.exactUsedKey||o,T=Object.prototype.toString.apply(f),I=["[object Number]","[object Function]","[object RegExp]"],v=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,y=!this.i18nFormat||this.i18nFormat.handleAsObject;if(y&&f&&(typeof f!="string"&&typeof f!="boolean"&&typeof f!="number")&&I.indexOf(T)<0&&!(typeof v=="string"&&Array.isArray(f))){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const N=this.options.returnedObjectHandler?this.options.returnedObjectHandler(m,f,{...n,ns:a}):`key '${o} (${this.language})' returned an object instead of string.`;return i?(d.res=N,d.usedParams=this.getUsedParamsDetails(n),d):N}if(s){const N=Array.isArray(f),M=N?[]:{},k=N?_:m;for(const S in f)if(Object.prototype.hasOwnProperty.call(f,S)){const w=`${k}${s}${S}`;M[S]=this.translate(w,{...n,joinArrays:!1,ns:a}),M[S]===w&&(M[S]=f[S])}f=M}}else if(y&&typeof v=="string"&&Array.isArray(f))f=f.join(v),f&&(f=this.extendTranslation(f,e,n,r));else{let N=!1,M=!1;const k=n.count!==void 0&&typeof n.count!="string",S=zd.hasDefaultValue(n),w=k?this.pluralResolver.getSuffix(c,n.count,n):"",C=n.ordinal&&k?this.pluralResolver.getSuffix(c,n.count,{ordinal:!1}):"",A=k&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),b=A&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${w}`]||n[`defaultValue${C}`]||n.defaultValue;!this.isValidLookup(f)&&S&&(N=!0,f=b),this.isValidLookup(f)||(M=!0,f=o);const P=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&M?void 0:f,oe=S&&b!==f&&this.options.updateMissing;if(M||N||oe){if(this.logger.log(oe?"updateKey":"missingKey",c,l,o,oe?b:f),s){const $=this.resolve(o,{...n,keySeparator:!1});$&&$.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let Be=[];const Me=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Me&&Me[0])for(let $=0;$<Me.length;$++)Be.push(Me[$]);else this.options.saveMissingTo==="all"?Be=this.languageUtils.toResolveHierarchy(n.lng||this.language):Be.push(n.lng||this.language);const de=($,J,se)=>{const Ee=S&&se!==f?se:P;this.options.missingKeyHandler?this.options.missingKeyHandler($,l,J,Ee,oe,n):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing($,l,J,Ee,oe,n),this.emit("missingKey",$,l,J,f)};this.options.saveMissing&&(this.options.saveMissingPlurals&&k?Be.forEach($=>{const J=this.pluralResolver.getSuffixes($,n);A&&n[`defaultValue${this.options.pluralSeparator}zero`]&&J.indexOf(`${this.options.pluralSeparator}zero`)<0&&J.push(`${this.options.pluralSeparator}zero`),J.forEach(se=>{de([$],o+se,n[`defaultValue${se}`]||b)})}):de(Be,o,b))}f=this.extendTranslation(f,e,n,d,r),M&&f===o&&this.options.appendNamespaceToMissingKey&&(f=`${l}:${o}`),(M||N)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?f=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}:${o}`:o,N?f:void 0):f=this.options.parseMissingKeyHandler(f))}return i?(d.res=f,d.usedParams=this.getUsedParamsDetails(n),d):f}extendTranslation(e,n,r,i,s){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const c=typeof e=="string"&&(r&&r.interpolation&&r.interpolation.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let h;if(c){const f=e.match(this.interpolator.nestingRegexp);h=f&&f.length}let d=r.replace&&typeof r.replace!="string"?r.replace:r;if(this.options.interpolation.defaultVariables&&(d={...this.options.interpolation.defaultVariables,...d}),e=this.interpolator.interpolate(e,d,r.lng||this.language,r),c){const f=e.match(this.interpolator.nestingRegexp),m=f&&f.length;h<m&&(r.nest=!1)}!r.lng&&this.options.compatibilityAPI!=="v1"&&i&&i.res&&(r.lng=i.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var f=arguments.length,m=new Array(f),_=0;_<f;_++)m[_]=arguments[_];return s&&s[0]===m[0]&&!r.context?(o.logger.warn(`It seems you are nesting recursively key: ${m[0]} in key: ${n[0]}`),null):o.translate(...m,n)},r)),r.interpolation&&this.interpolator.reset()}const a=r.postProcess||this.options.postProcess,l=typeof a=="string"?[a]:a;return e!=null&&l&&l.length&&r.applyPostProcessor!==!1&&(e=OR.handle(l,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,i,s,o,a;return typeof e=="string"&&(e=[e]),e.forEach(l=>{if(this.isValidLookup(r))return;const c=this.extractFromKey(l,n),h=c.key;i=h;let d=c.namespaces;this.options.fallbackNS&&(d=d.concat(this.options.fallbackNS));const f=n.count!==void 0&&typeof n.count!="string",m=f&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),_=n.context!==void 0&&(typeof n.context=="string"||typeof n.context=="number")&&n.context!=="",T=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);d.forEach(I=>{this.isValidLookup(r)||(a=I,!PT[`${T[0]}-${I}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(a)&&(PT[`${T[0]}-${I}`]=!0,this.logger.warn(`key "${i}" for languages "${T.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),T.forEach(v=>{if(this.isValidLookup(r))return;o=v;const y=[h];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(y,h,v,I,n);else{let N;f&&(N=this.pluralResolver.getSuffix(v,n.count,n));const M=`${this.options.pluralSeparator}zero`,k=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(f&&(y.push(h+N),n.ordinal&&N.indexOf(k)===0&&y.push(h+N.replace(k,this.options.pluralSeparator)),m&&y.push(h+M)),_){const S=`${h}${this.options.contextSeparator}${n.context}`;y.push(S),f&&(y.push(S+N),n.ordinal&&N.indexOf(k)===0&&y.push(S+N.replace(k,this.options.pluralSeparator)),m&&y.push(S+M))}}let R;for(;R=y.pop();)this.isValidLookup(r)||(s=R,r=this.getResource(v,I,R,n))}))})}),{res:r,usedKey:i,exactUsedKey:s,usedLng:o,usedNS:a}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,n,r,i):this.resourceStore.getResource(e,n,r,i)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&typeof e.replace!="string";let i=r?e.replace:e;if(r&&typeof e.count<"u"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!r){i={...i};for(const s of n)delete i[s]}return i}static hasDefaultValue(e){const n="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n===r.substring(0,n.length)&&e[r]!==void 0)return!0;return!1}}function Fg(t){return t.charAt(0).toUpperCase()+t.slice(1)}class AT{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Fr.create("languageUtils")}getScriptPartFromCode(e){if(e=$d(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=$d(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(typeof e=="string"&&e.indexOf("-")>-1){const n=["hans","hant","latn","cyrl","cans","mong","arab"];let r=e.split("-");return this.options.lowerCaseLng?r=r.map(i=>i.toLowerCase()):r.length===2?(r[0]=r[0].toLowerCase(),r[1]=r[1].toUpperCase(),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=Fg(r[1].toLowerCase()))):r.length===3&&(r[0]=r[0].toLowerCase(),r[1].length===2&&(r[1]=r[1].toUpperCase()),r[0]!=="sgn"&&r[2].length===2&&(r[2]=r[2].toUpperCase()),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=Fg(r[1].toLowerCase())),n.indexOf(r[2].toLowerCase())>-1&&(r[2]=Fg(r[2].toLowerCase()))),r.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(r=>{if(n)return;const i=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(i))&&(n=i)}),!n&&this.options.supportedLngs&&e.forEach(r=>{if(n)return;const i=this.getLanguagePartFromCode(r);if(this.isSupportedCode(i))return n=i;n=this.options.supportedLngs.find(s=>{if(s===i)return s;if(!(s.indexOf("-")<0&&i.indexOf("-")<0)&&(s.indexOf("-")>0&&i.indexOf("-")<0&&s.substring(0,s.indexOf("-"))===i||s.indexOf(i)===0&&i.length>1))return s})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),typeof e=="string"&&(e=[e]),Array.isArray(e))return e;if(!n)return e.default||[];let r=e[n];return r||(r=e[this.getScriptPartFromCode(n)]),r||(r=e[this.formatLanguageCode(n)]),r||(r=e[this.getLanguagePartFromCode(n)]),r||(r=e.default),r||[]}toResolveHierarchy(e,n){const r=this.getFallbackCodes(n||this.options.fallbackLng||[],e),i=[],s=o=>{o&&(this.isSupportedCode(o)?i.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return typeof e=="string"&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(e))):typeof e=="string"&&s(this.formatLanguageCode(e)),r.forEach(o=>{i.indexOf(o)<0&&s(this.formatLanguageCode(o))}),i}}let p2=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],g2={1:function(t){return+(t>1)},2:function(t){return+(t!=1)},3:function(t){return 0},4:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},5:function(t){return t==0?0:t==1?1:t==2?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5},6:function(t){return t==1?0:t>=2&&t<=4?1:2},7:function(t){return t==1?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},8:function(t){return t==1?0:t==2?1:t!=8&&t!=11?2:3},9:function(t){return+(t>=2)},10:function(t){return t==1?0:t==2?1:t<7?2:t<11?3:4},11:function(t){return t==1||t==11?0:t==2||t==12?1:t>2&&t<20?2:3},12:function(t){return+(t%10!=1||t%100==11)},13:function(t){return+(t!==0)},14:function(t){return t==1?0:t==2?1:t==3?2:3},15:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2},16:function(t){return t%10==1&&t%100!=11?0:t!==0?1:2},17:function(t){return t==1||t%10==1&&t%100!=11?0:1},18:function(t){return t==0?0:t==1?1:2},19:function(t){return t==1?0:t==0||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3},20:function(t){return t==1?0:t==0||t%100>0&&t%100<20?1:2},21:function(t){return t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0},22:function(t){return t==1?0:t==2?1:(t<0||t>10)&&t%10==0?2:3}};const m2=["v1","v2","v3"],_2=["v4"],kT={zero:0,one:1,two:2,few:3,many:4,other:5};function y2(){const t={};return p2.forEach(e=>{e.lngs.forEach(n=>{t[n]={numbers:e.nr,plurals:g2[e.fc]}})}),t}class v2{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=n,this.logger=Fr.create("pluralResolver"),(!this.options.compatibilityJSON||_2.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=y2()}addRule(e,n){this.rules[e]=n}getRule(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules($d(e==="dev"?"en":e),{type:n.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,n);return this.shouldUseIntlApi()?r&&r.resolvedOptions().pluralCategories.length>1:r&&r.numbers.length>1}getPluralFormsOfKey(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,r).map(i=>`${n}${i}`)}getSuffixes(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,n);return r?this.shouldUseIntlApi()?r.resolvedOptions().pluralCategories.sort((i,s)=>kT[i]-kT[s]).map(i=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${i}`):r.numbers.map(i=>this.getSuffix(e,i,n)):[]}getSuffix(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=this.getRule(e,r);return i?this.shouldUseIntlApi()?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i.select(n)}`:this.getSuffixRetroCompatible(i,n):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,n){const r=e.noAbs?e.plurals(n):e.plurals(Math.abs(n));let i=e.numbers[r];this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1&&(i===2?i="plural":i===1&&(i=""));const s=()=>this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString();return this.options.compatibilityJSON==="v1"?i===1?"":typeof i=="number"?`_plural_${i.toString()}`:s():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1?s():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}shouldUseIntlApi(){return!m2.includes(this.options.compatibilityJSON)}}function bT(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=a2(t,e,n);return!s&&i&&typeof n=="string"&&(s=E_(t,n,r),s===void 0&&(s=E_(e,n,r))),s}class w2{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Fr.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(n=>n),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:i,prefix:s,prefixEscaped:o,suffix:a,suffixEscaped:l,formatSeparator:c,unescapeSuffix:h,unescapePrefix:d,nestingPrefix:f,nestingPrefixEscaped:m,nestingSuffix:_,nestingSuffixEscaped:T,nestingOptionsSeparator:I,maxReplaces:v,alwaysFormat:y}=e.interpolation;this.escape=n!==void 0?n:u2,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=s?qo(s):o||"{{",this.suffix=a?qo(a):l||"}}",this.formatSeparator=c||",",this.unescapePrefix=h?"":d||"-",this.unescapeSuffix=this.unescapePrefix?"":h||"",this.nestingPrefix=f?qo(f):m||qo("$t("),this.nestingSuffix=_?qo(_):T||qo(")"),this.nestingOptionsSeparator=I||",",this.maxReplaces=v||1e3,this.alwaysFormat=y!==void 0?y:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,r)=>n&&n.source===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,n,r,i){let s,o,a;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function c(_){return _.replace(/\$/g,"$$$$")}const h=_=>{if(_.indexOf(this.formatSeparator)<0){const y=bT(n,l,_,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(y,void 0,r,{...i,...n,interpolationkey:_}):y}const T=_.split(this.formatSeparator),I=T.shift().trim(),v=T.join(this.formatSeparator).trim();return this.format(bT(n,l,I,this.options.keySeparator,this.options.ignoreJSONStructure),v,r,{...i,...n,interpolationkey:I})};this.resetRegExp();const d=i&&i.missingInterpolationHandler||this.options.missingInterpolationHandler,f=i&&i.interpolation&&i.interpolation.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:_=>c(_)},{regex:this.regexp,safeValue:_=>this.escapeValue?c(this.escape(_)):c(_)}].forEach(_=>{for(a=0;s=_.regex.exec(e);){const T=s[1].trim();if(o=h(T),o===void 0)if(typeof d=="function"){const v=d(e,s,i);o=typeof v=="string"?v:""}else if(i&&Object.prototype.hasOwnProperty.call(i,T))o="";else if(f){o=s[0];continue}else this.logger.warn(`missed to pass in variable ${T} for interpolating ${e}`),o="";else typeof o!="string"&&!this.useRawValueToEscape&&(o=ST(o));const I=_.safeValue(o);if(e=e.replace(s[0],I),f?(_.regex.lastIndex+=o.length,_.regex.lastIndex-=s[0].length):_.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),e}nest(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i,s,o;function a(l,c){const h=this.nestingOptionsSeparator;if(l.indexOf(h)<0)return l;const d=l.split(new RegExp(`${h}[ ]*{`));let f=`{${d[1]}`;l=d[0],f=this.interpolate(f,o);const m=f.match(/'/g),_=f.match(/"/g);(m&&m.length%2===0&&!_||_.length%2!==0)&&(f=f.replace(/'/g,'"'));try{o=JSON.parse(f),c&&(o={...c,...o})}catch(T){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,T),`${l}${h}${f}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,l}for(;i=this.nestingRegexp.exec(e);){let l=[];o={...r},o=o.replace&&typeof o.replace!="string"?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;let c=!1;if(i[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(i[1])){const h=i[1].split(this.formatSeparator).map(d=>d.trim());i[1]=h.shift(),l=h,c=!0}if(s=n(a.call(this,i[1].trim(),o),o),s&&i[0]===e&&typeof s!="string")return s;typeof s!="string"&&(s=ST(s)),s||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),s=""),c&&(s=l.reduce((h,d)=>this.format(h,d,r.lng,{...r,interpolationkey:i[1].trim()}),s.trim())),e=e.replace(i[0],s),this.regexp.lastIndex=0}return e}}function E2(t){let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);e==="currency"&&i.indexOf(":")<0?n.currency||(n.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?n.range||(n.range=i.trim()):i.split(";").forEach(o=>{if(o){const[a,...l]=o.split(":"),c=l.join(":").trim().replace(/^'+|'+$/g,""),h=a.trim();n[h]||(n[h]=c),c==="false"&&(n[h]=!1),c==="true"&&(n[h]=!0),isNaN(c)||(n[h]=parseInt(c,10))}})}return{formatName:e,formatOptions:n}}function Ko(t){const e={};return function(r,i,s){const o=i+JSON.stringify(s);let a=e[o];return a||(a=t($d(i),s),e[o]=a),a(r)}}class T2{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Fr.create("formatter"),this.options=e,this.formats={number:Ko((n,r)=>{const i=new Intl.NumberFormat(n,{...r});return s=>i.format(s)}),currency:Ko((n,r)=>{const i=new Intl.NumberFormat(n,{...r,style:"currency"});return s=>i.format(s)}),datetime:Ko((n,r)=>{const i=new Intl.DateTimeFormat(n,{...r});return s=>i.format(s)}),relativetime:Ko((n,r)=>{const i=new Intl.RelativeTimeFormat(n,{...r});return s=>i.format(s,r.range||"day")}),list:Ko((n,r)=>{const i=new Intl.ListFormat(n,{...r});return s=>i.format(s)})},this.init(e)}init(e){const r=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=r.formatSeparator?r.formatSeparator:r.formatSeparator||","}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=Ko(n)}format(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return n.split(this.formatSeparator).reduce((a,l)=>{const{formatName:c,formatOptions:h}=E2(l);if(this.formats[c]){let d=a;try{const f=i&&i.formatParams&&i.formatParams[i.interpolationkey]||{},m=f.locale||f.lng||i.locale||i.lng||r;d=this.formats[c](a,m,{...h,...i,...f})}catch(f){this.logger.warn(f)}return d}else this.logger.warn(`there was no format function for ${c}`);return a},e)}}function I2(t,e){t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)}class S2 extends ep{constructor(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=i,this.logger=Fr.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(r,i.backend,i)}queueLoad(e,n,r,i){const s={},o={},a={},l={};return e.forEach(c=>{let h=!0;n.forEach(d=>{const f=`${c}|${d}`;!r.reload&&this.store.hasResourceBundle(c,d)?this.state[f]=2:this.state[f]<0||(this.state[f]===1?o[f]===void 0&&(o[f]=!0):(this.state[f]=1,h=!1,o[f]===void 0&&(o[f]=!0),s[f]===void 0&&(s[f]=!0),l[d]===void 0&&(l[d]=!0)))}),h||(a[c]=!0)}),(Object.keys(s).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(s),pending:Object.keys(o),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(l)}}loaded(e,n,r){const i=e.split("|"),s=i[0],o=i[1];n&&this.emit("failedLoading",s,o,n),r&&this.store.addResourceBundle(s,o,r,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2;const a={};this.queue.forEach(l=>{o2(l.loaded,[s],o),I2(l,e),n&&l.errors.push(n),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(c=>{a[c]||(a[c]={});const h=l.loaded[c];h.length&&h.forEach(d=>{a[c][d]===void 0&&(a[c][d]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(l=>!l.done)}read(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,o=arguments.length>5?arguments[5]:void 0;if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:r,tried:i,wait:s,callback:o});return}this.readingCalls++;const a=(c,h)=>{if(this.readingCalls--,this.waitingReads.length>0){const d=this.waitingReads.shift();this.read(d.lng,d.ns,d.fcName,d.tried,d.wait,d.callback)}if(c&&h&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,r,i+1,s*2,o)},s);return}o(c,h)},l=this.backend[r].bind(this.backend);if(l.length===2){try{const c=l(e,n);c&&typeof c.then=="function"?c.then(h=>a(null,h)).catch(a):a(null,c)}catch(c){a(c)}return}return l(e,n,a)}prepareLoading(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();typeof e=="string"&&(e=this.languageUtils.toResolveHierarchy(e)),typeof n=="string"&&(n=[n]);const s=this.queueLoad(e,n,r,i);if(!s.toLoad.length)return s.pending.length||i(),null;s.toLoad.forEach(o=>{this.loadOne(o)})}load(e,n,r){this.prepareLoading(e,n,{},r)}reload(e,n,r){this.prepareLoading(e,n,{reload:!0},r)}loadOne(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e.split("|"),i=r[0],s=r[1];this.read(i,s,"read",void 0,void 0,(o,a)=>{o&&this.logger.warn(`${n}loading namespace ${s} for language ${i} failed`,o),!o&&a&&this.logger.log(`${n}loaded namespace ${s} for language ${i}`,a),this.loaded(e,o,a)})}saveMissing(e,n,r,i,s){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend&&this.backend.create){const l={...o,isUpdate:s},c=this.backend.create.bind(this.backend);if(c.length<6)try{let h;c.length===5?h=c(e,n,r,i,l):h=c(e,n,r,i),h&&typeof h.then=="function"?h.then(d=>a(null,d)).catch(a):a(null,h)}catch(h){a(h)}else c(e,n,r,i,a,l)}!e||!e[0]||this.store.addResource(e[0],n,r,i)}}}function NT(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){let n={};if(typeof e[1]=="object"&&(n=e[1]),typeof e[1]=="string"&&(n.defaultValue=e[1]),typeof e[2]=="string"&&(n.tDescription=e[2]),typeof e[2]=="object"||typeof e[3]=="object"){const r=e[3]||e[2];Object.keys(r).forEach(i=>{n[i]=r[i]})}return n},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function xT(t){return typeof t.ns=="string"&&(t.ns=[t.ns]),typeof t.fallbackLng=="string"&&(t.fallbackLng=[t.fallbackLng]),typeof t.fallbackNS=="string"&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t}function xh(){}function C2(t){Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})}class sc extends ep{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(super(),this.options=xT(e),this.services={},this.logger=Fr,this.modules={external:[]},C2(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof n=="function"&&(r=n,n={}),!n.defaultNS&&n.defaultNS!==!1&&n.ns&&(typeof n.ns=="string"?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));const i=NT();this.options={...i,...this.options,...xT(n)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...i.interpolation,...this.options.interpolation}),n.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=n.keySeparator),n.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=n.nsSeparator);function s(h){return h?typeof h=="function"?new h:h:null}if(!this.options.isClone){this.modules.logger?Fr.init(s(this.modules.logger),this.options):Fr.init(null,this.options);let h;this.modules.formatter?h=this.modules.formatter:typeof Intl<"u"&&(h=T2);const d=new AT(this.options);this.store=new RT(this.options.resources,this.options);const f=this.services;f.logger=Fr,f.resourceStore=this.store,f.languageUtils=d,f.pluralResolver=new v2(d,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),h&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(f.formatter=s(h),f.formatter.init(f,this.options),this.options.interpolation.format=f.formatter.format.bind(f.formatter)),f.interpolator=new w2(this.options),f.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},f.backendConnector=new S2(s(this.modules.backend),f.resourceStore,f,this.options),f.backendConnector.on("*",function(m){for(var _=arguments.length,T=new Array(_>1?_-1:0),I=1;I<_;I++)T[I-1]=arguments[I];e.emit(m,...T)}),this.modules.languageDetector&&(f.languageDetector=s(this.modules.languageDetector),f.languageDetector.init&&f.languageDetector.init(f,this.options.detection,this.options)),this.modules.i18nFormat&&(f.i18nFormat=s(this.modules.i18nFormat),f.i18nFormat.init&&f.i18nFormat.init(this)),this.translator=new zd(this.services,this.options),this.translator.on("*",function(m){for(var _=arguments.length,T=new Array(_>1?_-1:0),I=1;I<_;I++)T[I-1]=arguments[I];e.emit(m,...T)}),this.modules.external.forEach(m=>{m.init&&m.init(this)})}if(this.format=this.options.interpolation.format,r||(r=xh),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const h=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);h.length>0&&h[0]!=="dev"&&(this.options.lng=h[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(h=>{this[h]=function(){return e.store[h](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(h=>{this[h]=function(){return e.store[h](...arguments),e}});const l=Kl(),c=()=>{const h=(d,f)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(f),r(d,f)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return h(null,this.t.bind(this));this.changeLanguage(this.options.lng,h)};return this.options.resources||!this.options.initImmediate?c():setTimeout(c,0),l}loadResources(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:xh;const i=typeof e=="string"?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(i&&i.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const s=[],o=a=>{if(!a||a==="cimode")return;this.services.languageUtils.toResolveHierarchy(a).forEach(c=>{c!=="cimode"&&s.indexOf(c)<0&&s.push(c)})};i?o(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(l=>o(l)),this.options.preload&&this.options.preload.forEach(a=>o(a)),this.services.backendConnector.load(s,this.options.ns,a=>{!a&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(a)})}else r(null)}reloadResources(e,n,r){const i=Kl();return e||(e=this.languages),n||(n=this.options.ns),r||(r=xh),this.services.backendConnector.reload(e,n,s=>{i.resolve(),r(s)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&OR.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(e,n){var r=this;this.isLanguageChangingTo=e;const i=Kl();this.emit("languageChanging",e);const s=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},o=(l,c)=>{c?(s(c),this.translator.changeLanguage(c),this.isLanguageChangingTo=void 0,this.emit("languageChanged",c),this.logger.log("languageChanged",c)):this.isLanguageChangingTo=void 0,i.resolve(function(){return r.t(...arguments)}),n&&n(l,function(){return r.t(...arguments)})},a=l=>{!e&&!l&&this.services.languageDetector&&(l=[]);const c=typeof l=="string"?l:this.services.languageUtils.getBestMatchFromCodes(l);c&&(this.language||s(c),this.translator.language||this.translator.changeLanguage(c),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(c)),this.loadResources(c,h=>{o(h,c)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?a(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(a):this.services.languageDetector.detect(a):a(e),i}getFixedT(e,n,r){var i=this;const s=function(o,a){let l;if(typeof a!="object"){for(var c=arguments.length,h=new Array(c>2?c-2:0),d=2;d<c;d++)h[d-2]=arguments[d];l=i.options.overloadTranslationOptionHandler([o,a].concat(h))}else l={...a};l.lng=l.lng||s.lng,l.lngs=l.lngs||s.lngs,l.ns=l.ns||s.ns,l.keyPrefix=l.keyPrefix||r||s.keyPrefix;const f=i.options.keySeparator||".";let m;return l.keyPrefix&&Array.isArray(o)?m=o.map(_=>`${l.keyPrefix}${f}${_}`):m=l.keyPrefix?`${l.keyPrefix}${f}${o}`:o,i.t(m,l)};return typeof e=="string"?s.lng=e:s.lngs=e,s.ns=n,s.keyPrefix=r,s}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(a,l)=>{const c=this.services.backendConnector.state[`${a}|${l}`];return c===-1||c===2};if(n.precheck){const a=n.precheck(this,o);if(a!==void 0)return a}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(r,e)&&(!i||o(s,e)))}loadNamespaces(e,n){const r=Kl();return this.options.ns?(typeof e=="string"&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{r.resolve(),n&&n(i)}),r):(n&&n(),Promise.resolve())}loadLanguages(e,n){const r=Kl();typeof e=="string"&&(e=[e]);const i=this.options.preload||[],s=e.filter(o=>i.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return s.length?(this.options.preload=i.concat(s),this.loadResources(o=>{r.resolve(),n&&n(o)}),r):(n&&n(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services&&this.services.languageUtils||new AT(NT());return n.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new sc(e,n)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:xh;const r=e.forkResourceStore;r&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},s=new sc(i);return(e.debug!==void 0||e.prefix!==void 0)&&(s.logger=s.logger.clone(e)),["store","services","language"].forEach(a=>{s[a]=this[a]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},r&&(s.store=new RT(this.store.data,i),s.services.resourceStore=s.store),s.translator=new zd(s.services,i),s.translator.on("*",function(a){for(var l=arguments.length,c=new Array(l>1?l-1:0),h=1;h<l;h++)c[h-1]=arguments[h];s.emit(a,...c)}),s.init(i,n),s.translator.options=i,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const dn=sc.createInstance();dn.createInstance=sc.createInstance;dn.createInstance;dn.dir;dn.init;dn.loadResources;dn.reloadResources;dn.use;dn.changeLanguage;dn.getFixedT;dn.t;dn.exists;dn.setDefaultNamespace;dn.hasLoadedNamespace;dn.loadNamespaces;dn.loadLanguages;var ie=(t=>(t.Step="Auth.Step",t.Registration="Auth.Registration",t.EnterNumber="Auth.EnterNumber",t.Continue="Auth.Continue",t.TestNumber="Auth.TestNumber",t.Code="Auth.Code",t.Verification="Auth.Verification",t.EnterDigits="Auth.EnterDigits",t.Name="Auth.Name",t.Surname="Auth.Surname",t.InvalidPhoneNumber="Auth.InvalidPhoneNumber",t.ReloadPage="Auth.ReloadPage",t.EmptyNameSurname="Auth.EmptyNameSurname",t.InvalidVerificationCode="Auth.InvalidVerificationCode",t.UpdateProfileError="Auth.UpdateProfileError",t.TooManyRequests="Auth.TooManyRequests",t.ClearRegistrationForm="Auth.ClearRegistrationForm",t.ResendSMS="Auth.ResendSMS",t))(ie||{}),ve=(t=>(t.January="MonthNames.January",t.February="MonthNames.February",t.March="MonthNames.March",t.April="MonthNames.April",t.May="MonthNames.May",t.June="MonthNames.June",t.July="MonthNames.July",t.August="MonthNames.August",t.September="MonthNames.September",t.October="MonthNames.October",t.November="MonthNames.November",t.December="MonthNames.December",t))(ve||{}),Vs=(t=>(t.NoChats="Sidebar.NoChats",t.UsersNotFound="Sidebar.UsersNotFound",t))(Vs||{}),je=(t=>(t.SignOut="NavBar.SignOut",t.ProfileSettings="NavBar.ProfileSettings",t.Theme="NavBar.Theme",t.Light="NavBar.Light",t.Dark="NavBar.Dark",t.Language="NavBar.Language",t.English="NavBar.English",t.Ukrainian="NavBar.Ukrainian",t.Russian="NavBar.Russian",t))(je||{}),$e=(t=>(t.Phone="ProfileSettings.Phone",t.ChangeName="ProfileSettings.ChangeName",t.ChangeNameNotify="ProfileSettings.ChangeNameNotify",t.ChangeNameToastSuccess="ProfileSettings.ChangeNameToastSuccess",t.ChangeNameToastError="ProfileSettings.ChangeNameToastError",t.ChangePhotoToastSuccess="ProfileSettings.ChangePhotoToastSuccess",t.ChangePhotoToastError="ProfileSettings.ChangePhotoToastError",t.ModalChangeProfilePhotoPrompt="ProfileSettings.Modal.ChangeProfilePhotoPrompt",t.ModalChangeProfilePhoto="ProfileSettings.Modal.ChangeProfilePhoto",t))($e||{}),Or=(t=>(t.ChatInputPlaceholder="ChatForm.ChatInputPlaceholder",t.EditMessage="ChatForm.EditMessage",t.EmptyMessage="ChatForm.EmptyMessage",t))(Or||{}),On=(t=>(t.Edit="ContextMenu.Edit",t.Copy="ContextMenu.Copy",t.Delete="ContextMenu.Delete",t.Select="ContextMenu.Select",t))(On||{}),Lr=(t=>(t.Files="FileInput.Files",t.ImageCaptionPlaceholder="FileInput.ImageCaptionPlaceholder",t.Send="FileInput.Send",t))(Lr||{}),Fs=(t=>(t.UnreadMessage="ChatListUnreadMsg.UnreadMessage",t.UnreadMessages="ChatListUnreadMsg.UnreadMessages",t))(Fs||{}),tn=(t=>(t.DeleteMessageSuccess="Toasts.DeleteMessageSuccess",t.DeleteMessageError="Toasts.DeleteMessageError",t.EditingMessageSuccess="Toasts.EditingMessageSuccess",t.EditingMessageError="Toasts.EditingMessageError",t.CopyToClipboard="Toasts.CopyToClipboard",t))(tn||{}),De=(t=>(t.Search="General.Search",t.EmptyChatNotify="General.EmptyChatNotify",t.SearchMsgPlaceholder="General.SearchMsgPlaceholder",t.NotFoundMsg="General.NotFoundMsg",t.Offline="General.Offline",t.Online="General.Online",t.Typing="General.Typing",t.Time="General.Time",t.Volume="General.Volume",t.Edited="General.Edited",t))(De||{});const R2=localStorage.getItem("language"),P2={en:{translation:{[ie.Step]:"Step",[ie.Registration]:"Registration",[ie.EnterNumber]:"Enter your phone number and we will send you a confirmation code",[ie.Continue]:"Continue",[ie.TestNumber]:"Test number",[ie.Code]:"Code",[ie.Verification]:"Verification",[ie.EnterDigits]:"Enter 6 digits from the message we sent you",[ie.Name]:"Name",[ie.Surname]:"Surname",[ie.InvalidPhoneNumber]:"Invalid format phone number",[ie.ReloadPage]:"Reload page and try enter number again",[ie.EmptyNameSurname]:"Please fill in both name and surname",[ie.InvalidVerificationCode]:"Invalid verification code. Please try again.",[ie.UpdateProfileError]:"Unable to update profile. Please check your connection and try again.",[ie.TooManyRequests]:"You have made too many attempts. Wait a moment and retry.",[ie.ClearRegistrationForm]:"Reset the registration form",[ie.ResendSMS]:"Send the SMS again",[Or.ChatInputPlaceholder]:"Write your message...",[Or.EditMessage]:"Edit message",[Or.EmptyMessage]:"Empty message... =)",[Fs.UnreadMessage]:"unread message!",[Fs.UnreadMessages]:"unread messages!",[On.Edit]:"EDIT",[On.Copy]:"COPY",[On.Delete]:"DELETE",[On.Select]:"SELECT",[Lr.Files]:"file(s)",[Lr.ImageCaptionPlaceholder]:"Add a caption...",[Lr.Send]:"Send",[De.Search]:"Search...",[De.EmptyChatNotify]:"Select or search user who you would to start messaging",[De.SearchMsgPlaceholder]:"Enter text (case-sensitive)",[De.NotFoundMsg]:"Not found messages, change search value",[De.Offline]:"Offline",[De.Online]:"Online",[De.Typing]:"typing",[De.Time]:"Time",[De.Volume]:"Volume",[De.Edited]:"edited",[ve.January]:"January",[ve.February]:"February",[ve.March]:"March",[ve.April]:"April",[ve.May]:"May",[ve.June]:"June",[ve.July]:"July",[ve.August]:"August",[ve.September]:"September",[ve.October]:"October",[ve.November]:"November",[ve.December]:"December",[je.SignOut]:"Sign Out",[je.ProfileSettings]:"Profile Settings",[je.Theme]:"Theme",[je.Light]:"Light",[je.Dark]:"Dark",[je.Language]:"Language",[je.English]:"English",[je.Ukrainian]:"Ukrainian",[je.Russian]:"Russian",[$e.Phone]:"Phone:",[$e.ChangeName]:"Change Name",[$e.ChangeNameNotify]:"Start change username and button will be enable",[$e.ChangeNameToastSuccess]:"Change profile name success",[$e.ChangeNameToastError]:"Change profile name error",[$e.ChangePhotoToastSuccess]:"Change photo profile success",[$e.ChangePhotoToastError]:"Change photo profile error",[$e.ModalChangeProfilePhotoPrompt]:"If you're satisfied, click the 'Change Profile Photo' button, or close the window and try a new photo",[$e.ModalChangeProfilePhoto]:"Change profile photo",[Vs.NoChats]:"Sorry, but you don't have any chats yet ",[Vs.UsersNotFound]:"Users not found.",[tn.DeleteMessageSuccess]:"Message(s) successfully deleted!",[tn.DeleteMessageError]:"Message(s) deleting error!",[tn.EditingMessageSuccess]:"Message successfully edited!",[tn.EditingMessageError]:"Message editing error!",[tn.CopyToClipboard]:"Copied to Clipboard!"}},ua:{translation:{[ie.Step]:"",[ie.Registration]:"",[ie.EnterNumber]:"         ",[ie.Continue]:"",[ie.TestNumber]:" ",[ie.Code]:"",[ie.Verification]:"",[ie.EnterDigits]:" 6   ,    ",[ie.Name]:"'",[ie.Surname]:"",[ie.InvalidPhoneNumber]:"   ",[ie.ReloadPage]:"      ",[ie.EmptyNameSurname]:" ,   : '  ",[ie.InvalidVerificationCode]:"  .  ,   .",[ie.UpdateProfileError]:"   .  '    .",[ie.TooManyRequests]:"   .     .",[ie.ClearRegistrationForm]:"  ",[ie.ResendSMS]:"  SMS",[Or.ChatInputPlaceholder]:"  ...",[Or.EditMessage]:" ",[Or.EmptyMessage]:" ... =)",[Fs.UnreadMessage]:" !",[Fs.UnreadMessages]:" !",[On.Edit]:"",[On.Copy]:"",[On.Delete]:"",[On.Select]:"",[Lr.Files]:"()",[Lr.ImageCaptionPlaceholder]:" ...",[Lr.Send]:"",[De.Search]:"...",[De.EmptyChatNotify]:"   ,       ",[De.SearchMsgPlaceholder]:"  (  )",[De.NotFoundMsg]:"  ,   ",[De.Offline]:"",[De.Online]:"",[De.Typing]:"",[De.Time]:"",[De.Volume]:"",[De.Edited]:"",[ve.January]:"",[ve.February]:"",[ve.March]:"",[ve.April]:"",[ve.May]:"",[ve.June]:"",[ve.July]:"",[ve.August]:"",[ve.September]:"",[ve.October]:"",[ve.November]:"",[ve.December]:"",[je.SignOut]:"  ",[je.ProfileSettings]:" ",[je.Theme]:"",[je.Light]:"",[je.Dark]:"",[je.Language]:"",[je.English]:"",[je.Ukrainian]:"",[je.Russian]:"",[$e.Phone]:":",[$e.ChangeName]:" '",[$e.ChangeNameNotify]:"  ' ,    ",[$e.ChangeNameToastSuccess]:"   ",[$e.ChangeNameToastError]:"   ",[$e.ChangePhotoToastSuccess]:"   ",[$e.ChangePhotoToastError]:"   ",[$e.ModalChangeProfilePhotoPrompt]:"  ,   '  '       ",[$e.ModalChangeProfilePhoto]:"  ",[Vs.NoChats]:",   ,       ",[Vs.UsersNotFound]:"  .",[tn.DeleteMessageSuccess]:"  ()!",[tn.DeleteMessageError]:"  ()!",[tn.EditingMessageSuccess]:"  !",[tn.EditingMessageError]:"  !",[tn.CopyToClipboard]:"   !"}},ru:{translation:{[ie.Step]:"",[ie.Registration]:"",[ie.EnterNumber]:"   ,      ",[ie.Continue]:"",[ie.TestNumber]:" ",[ie.Code]:"",[ie.Verification]:"",[ie.EnterDigits]:" 6   ,    ",[ie.Name]:"",[ie.Surname]:"",[ie.InvalidPhoneNumber]:"   ",[ie.ReloadPage]:"       ",[ie.EmptyNameSurname]:",   :   ",[ie.InvalidVerificationCode]:"  . ,  .",[ie.UpdateProfileError]:"   .     .",[ie.TooManyRequests]:"  .     .",[ie.ClearRegistrationForm]:"  ",[ie.ResendSMS]:"  SMS",[Or.ChatInputPlaceholder]:"  ...",[Or.EditMessage]:" ",[Or.EmptyMessage]:" ... =)",[Fs.UnreadMessage]:" !",[Fs.UnreadMessages]:" !",[On.Edit]:".",[On.Copy]:"",[On.Delete]:"",[On.Select]:"",[Lr.Files]:"()",[Lr.ImageCaptionPlaceholder]:" ...",[Lr.Send]:"",[De.Search]:"...",[De.EmptyChatNotify]:"   ,       ",[De.SearchMsgPlaceholder]:"  (  )",[De.NotFoundMsg]:"  ,   ",[De.Offline]:"",[De.Online]:"",[De.Typing]:"",[De.Time]:"",[De.Volume]:"",[De.Edited]:"",[ve.January]:"",[ve.February]:"",[ve.March]:"",[ve.April]:"",[ve.May]:"",[ve.June]:"",[ve.July]:"",[ve.August]:"",[ve.September]:"",[ve.October]:"",[ve.November]:"",[ve.December]:"",[je.SignOut]:"  ",[je.ProfileSettings]:" ",[je.Theme]:"",[je.Light]:"",[je.Dark]:"",[je.Language]:"",[je.English]:"",[je.Ukrainian]:"",[je.Russian]:"",[$e.Phone]:":",[$e.ChangeName]:" ",[$e.ChangeNameNotify]:"   ,    ",[$e.ChangeNameToastSuccess]:"   ",[$e.ChangeNameToastError]:"   ",[$e.ChangePhotoToastSuccess]:"   ",[$e.ChangePhotoToastError]:"   ",[$e.ModalChangeProfilePhotoPrompt]:"  ,   '  '       ",[$e.ModalChangeProfilePhoto]:"  ",[Vs.NoChats]:",         ",[Vs.UsersNotFound]:"  .",[tn.DeleteMessageSuccess]:"()  ()!",[tn.DeleteMessageError]:"  ()!",[tn.EditingMessageSuccess]:"  !",[tn.EditingMessageError]:"  !",[tn.CopyToClipboard]:"   !"}}};dn.use(JM).init({resources:P2,lng:R2??"en",interpolation:{escapeValue:!1}});const A2=()=>{const{i18n:t}=t2("translation",{keyPrefix:"NavBar"});F.useEffect(()=>{if(localStorage.language)return;const e=navigator.language;e==="uk-UA"?(localStorage.setItem("language","ua"),t.changeLanguage("ua")):e==="ru-RU"?(localStorage.setItem("language","ru"),t.changeLanguage("ru")):(localStorage.setItem("language","en"),t.changeLanguage("en"))},[t])},k2=()=>(F.useEffect(()=>{if(!localStorage.theme){const t=window.matchMedia("(prefers-color-scheme: dark)").matches;localStorage.theme=t?"dark":"light"}document.documentElement.classList.toggle("dark",localStorage.theme==="dark")},[]),null);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H=function(t,e){if(!t)throw ll(e)},ll=function(t){return new Error("Firebase Database ("+LR.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},b2=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},uv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,h=s>>2,d=(s&3)<<4|a>>4;let f=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(f=64)),r.push(n[h],n[d],n[f],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(MR(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):b2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||d==null)throw new N2;const f=s<<2|a>>4;if(r.push(f),c!==64){const m=a<<4&240|c>>2;if(r.push(m),d!==64){const _=c<<6&192|d;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class N2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const VR=function(t){const e=MR(t);return uv.encodeByteArray(e,!0)},Wd=function(t){return VR(t).replace(/\./g,"")},Hd=function(t){try{return uv.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x2(t){return FR(void 0,t)}function FR(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!D2(n)||(t[n]=FR(t[n],e[n]));return t}function D2(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2=()=>O2().__FIREBASE_DEFAULTS__,M2=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},V2=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Hd(t[1]);return e&&JSON.parse(e)},tp=()=>{try{return L2()||M2()||V2()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},UR=t=>{var e,n;return(n=(e=tp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},cv=t=>{const e=UR(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},BR=()=>{var t;return(t=tp())===null||t===void 0?void 0:t.config},jR=t=>{var e;return(e=tp())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hv(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[Wd(JSON.stringify(n)),Wd(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function dv(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Gt())}function F2(){var t;const e=(t=tp())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function U2(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function $R(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function B2(){const t=Gt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function zR(){return LR.NODE_ADMIN===!0}function j2(){return!F2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function WR(){try{return typeof indexedDB=="object"}catch{return!1}}function HR(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function $2(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z2="FirebaseError";class Cr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=z2,Object.setPrototypeOf(this,Cr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ro.prototype.create)}}class Ro{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?W2(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Cr(i,a,r)}}function W2(t,e){return t.replace(H2,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const H2=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oc(t){return JSON.parse(t)}function Mt(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=oc(Hd(s[0])||""),n=oc(Hd(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},q2=function(t){const e=qR(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},K2=function(t){const e=qR(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Ba(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function qd(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Kd(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Gd(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(DT(s)&&DT(o)){if(!Gd(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function DT(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Po(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const f=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(f<<1|f>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,h;for(let d=0;d<80;d++){d<40?d<20?(c=a^s&(o^a),h=1518500249):(c=s^o^a,h=1859775393):d<60?(c=s&o|a&(s|o),h=2400959708):(c=s^o^a,h=3395469782);const f=(i<<5|i>>>27)+c+l+h+r[d]&4294967295;l=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=f}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function Q2(t,e){const n=new Y2(t,e);return n.subscribe.bind(n)}class Y2{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");J2(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Ug),i.error===void 0&&(i.error=Ug),i.complete===void 0&&(i.complete=Ug);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function J2(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ug(){}function ja(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,H(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},np=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(t){return t&&t._delegate?t._delegate:t}class Kn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Us="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new ii;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(tV(e))try{this.getOrInitializeService({instanceIdentifier:Us})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Us){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Us){return this.instances.has(e)}getOptions(e=Us){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:eV(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Us){return this.component?this.component.multipleInstances?e:Us:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function eV(t){return t===Us?void 0:t}function tV(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Z2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Se;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Se||(Se={}));const rV={debug:Se.DEBUG,verbose:Se.VERBOSE,info:Se.INFO,warn:Se.WARN,error:Se.ERROR,silent:Se.SILENT},iV=Se.INFO,sV={[Se.DEBUG]:"log",[Se.VERBOSE]:"log",[Se.INFO]:"info",[Se.WARN]:"warn",[Se.ERROR]:"error"},oV=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=sV[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class rp{constructor(e){this.name=e,this._logLevel=iV,this._logHandler=oV,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?rV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Se.DEBUG,...e),this._logHandler(this,Se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Se.VERBOSE,...e),this._logHandler(this,Se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Se.INFO,...e),this._logHandler(this,Se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Se.WARN,...e),this._logHandler(this,Se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Se.ERROR,...e),this._logHandler(this,Se.ERROR,...e)}}const aV=(t,e)=>e.some(n=>t instanceof n);let OT,LT;function lV(){return OT||(OT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function uV(){return LT||(LT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const KR=new WeakMap,T_=new WeakMap,GR=new WeakMap,Bg=new WeakMap,fv=new WeakMap;function cV(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(gi(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&KR.set(n,t)}).catch(()=>{}),fv.set(e,t),e}function hV(t){if(T_.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});T_.set(t,e)}let I_={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return T_.get(t);if(e==="objectStoreNames")return t.objectStoreNames||GR.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return gi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function dV(t){I_=t(I_)}function fV(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(jg(this),e,...n);return GR.set(r,e.sort?e.sort():[e]),gi(r)}:uV().includes(t)?function(...e){return t.apply(jg(this),e),gi(KR.get(this))}:function(...e){return gi(t.apply(jg(this),e))}}function pV(t){return typeof t=="function"?fV(t):(t instanceof IDBTransaction&&hV(t),aV(t,lV())?new Proxy(t,I_):t)}function gi(t){if(t instanceof IDBRequest)return cV(t);if(Bg.has(t))return Bg.get(t);const e=pV(t);return e!==t&&(Bg.set(t,e),fv.set(e,t)),e}const jg=t=>fv.get(t);function ip(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=gi(o);return r&&o.addEventListener("upgradeneeded",l=>{r(gi(o.result),l.oldVersion,l.newVersion,gi(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}function $g(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),gi(n).then(()=>{})}const gV=["get","getKey","getAll","getAllKeys","count"],mV=["put","add","delete","clear"],zg=new Map;function MT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(zg.get(e))return zg.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=mV.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||gV.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return zg.set(e,s),s}dV(t=>({...t,get:(e,n,r)=>MT(e,n)||t.get(e,n,r),has:(e,n)=>!!MT(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(yV(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function yV(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const S_="@firebase/app",VT="0.10.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ho=new rp("@firebase/app"),vV="@firebase/app-compat",wV="@firebase/analytics-compat",EV="@firebase/analytics",TV="@firebase/app-check-compat",IV="@firebase/app-check",SV="@firebase/auth",CV="@firebase/auth-compat",RV="@firebase/database",PV="@firebase/database-compat",AV="@firebase/functions",kV="@firebase/functions-compat",bV="@firebase/installations",NV="@firebase/installations-compat",xV="@firebase/messaging",DV="@firebase/messaging-compat",OV="@firebase/performance",LV="@firebase/performance-compat",MV="@firebase/remote-config",VV="@firebase/remote-config-compat",FV="@firebase/storage",UV="@firebase/storage-compat",BV="@firebase/firestore",jV="@firebase/vertexai-preview",$V="@firebase/firestore-compat",zV="firebase",WV="10.12.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C_="[DEFAULT]",HV={[S_]:"fire-core",[vV]:"fire-core-compat",[EV]:"fire-analytics",[wV]:"fire-analytics-compat",[IV]:"fire-app-check",[TV]:"fire-app-check-compat",[SV]:"fire-auth",[CV]:"fire-auth-compat",[RV]:"fire-rtdb",[PV]:"fire-rtdb-compat",[AV]:"fire-fn",[kV]:"fire-fn-compat",[bV]:"fire-iid",[NV]:"fire-iid-compat",[xV]:"fire-fcm",[DV]:"fire-fcm-compat",[OV]:"fire-perf",[LV]:"fire-perf-compat",[MV]:"fire-rc",[VV]:"fire-rc-compat",[FV]:"fire-gcs",[UV]:"fire-gcs-compat",[BV]:"fire-fst",[$V]:"fire-fst-compat",[jV]:"fire-vertex","fire-js":"fire-js",[zV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qd=new Map,qV=new Map,R_=new Map;function FT(t,e){try{t.container.addComponent(e)}catch(n){ho.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function lr(t){const e=t.name;if(R_.has(e))return ho.debug(`There were multiple attempts to register component ${e}.`),!1;R_.set(e,t);for(const n of Qd.values())FT(n,t);for(const n of qV.values())FT(n,t);return!0}function Cs(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function li(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},cs=new Ro("app","Firebase",KV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GV{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Kn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw cs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rs=WV;function QR(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:C_,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw cs.create("bad-app-name",{appName:String(i)});if(n||(n=BR()),!n)throw cs.create("no-options");const s=Qd.get(i);if(s){if(Gd(n,s.options)&&Gd(r,s.config))return s;throw cs.create("duplicate-app",{appName:i})}const o=new nV(i);for(const l of R_.values())o.addComponent(l);const a=new GV(n,r,o);return Qd.set(i,a),a}function xc(t=C_){const e=Qd.get(t);if(!e&&t===C_&&BR())return QR();if(!e)throw cs.create("no-app",{appName:t});return e}function on(t,e,n){var r;let i=(r=HV[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ho.warn(a.join(" "));return}lr(new Kn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QV="firebase-heartbeat-database",YV=1,ac="firebase-heartbeat-store";let Wg=null;function YR(){return Wg||(Wg=ip(QV,YV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ac)}catch(n){console.warn(n)}}}}).catch(t=>{throw cs.create("idb-open",{originalErrorMessage:t.message})})),Wg}async function JV(t){try{const n=(await YR()).transaction(ac),r=await n.objectStore(ac).get(JR(t));return await n.done,r}catch(e){if(e instanceof Cr)ho.warn(e.message);else{const n=cs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ho.warn(n.message)}}}async function UT(t,e){try{const r=(await YR()).transaction(ac,"readwrite");await r.objectStore(ac).put(e,JR(t)),await r.done}catch(n){if(n instanceof Cr)ho.warn(n.message);else{const r=cs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ho.warn(r.message)}}}function JR(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XV=1024,ZV=30*24*60*60*1e3;class eF{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new nF(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=BT();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=ZV}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=BT(),{heartbeatsToSend:r,unsentEntries:i}=tF(this._heartbeatsCache.heartbeats),s=Wd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function BT(){return new Date().toISOString().substring(0,10)}function tF(t,e=XV){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),jT(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),jT(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class nF{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return WR()?HR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await JV(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return UT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return UT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function jT(t){return Wd(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rF(t){lr(new Kn("platform-logger",e=>new _V(e),"PRIVATE")),lr(new Kn("heartbeat",e=>new eF(e),"PRIVATE")),on(S_,VT,t),on(S_,VT,"esm2017"),on("fire-js","")}rF("");var iF="firebase",sF="10.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */on(iF,sF,"app");function pv(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function XR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const oF=XR,ZR=new Ro("auth","Firebase",XR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yd=new rp("@firebase/auth");function aF(t,...e){Yd.logLevel<=Se.WARN&&Yd.warn(`Auth (${Rs}): ${t}`,...e)}function nd(t,...e){Yd.logLevel<=Se.ERROR&&Yd.error(`Auth (${Rs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ii(t,...e){throw gv(t,...e)}function zn(t,...e){return gv(t,...e)}function eP(t,e,n){const r=Object.assign(Object.assign({},oF()),{[e]:n});return new Ro("auth","Firebase",r).create(e,{appName:t.name})}function hs(t){return eP(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function gv(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return ZR.create(t,...e)}function ee(t,e,...n){if(!t)throw gv(e,...n)}function ui(t){const e="INTERNAL ASSERTION FAILED: "+t;throw nd(e),new Error(e)}function Si(t,e){t||ui(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function tP(){return $T()==="http:"||$T()==="https:"}function $T(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(tP()||U2()||"connection"in navigator)?navigator.onLine:!0}function uF(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Si(n>e,"Short delay should be less than long delay!"),this.isMobile=dv()||$R()}get(){return lF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mv(t,e){Si(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ui("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ui("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ui("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hF=new Dc(3e4,6e4);function Di(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Rr(t,e,n,r,i={}){return rP(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Po(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),nP.fetch()(iP(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function rP(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},cF),e);try{const i=new dF(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw ou(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw ou(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw ou(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw ou(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw eP(t,h,c);Ii(t,h)}}catch(i){if(i instanceof Cr)throw i;Ii(t,"network-request-failed",{message:String(i)})}}async function sp(t,e,n,r,i={}){const s=await Rr(t,e,n,r,i);return"mfaPendingCredential"in s&&Ii(t,"multi-factor-auth-required",{_serverResponse:s}),s}function iP(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?mv(t.config,i):`${t.config.apiScheme}://${i}`}class dF{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(zn(this.auth,"network-request-failed")),hF.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ou(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=zn(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT(t){return t!==void 0&&t.getResponse!==void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fF(t){return(await Rr(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pF(t,e){return Rr(t,"POST","/v1/accounts:delete",e)}async function sP(t,e){return Rr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ru(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function gF(t,e=!1){const n=Re(t),r=await n.getIdToken(e),i=_v(r);ee(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Ru(Hg(i.auth_time)),issuedAtTime:Ru(Hg(i.iat)),expirationTime:Ru(Hg(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Hg(t){return Number(t)*1e3}function _v(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return nd("JWT malformed, contained fewer than 3 sections"),null;try{const i=Hd(n);return i?JSON.parse(i):(nd("Failed to decode base64 JWT payload"),null)}catch(i){return nd("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function WT(t){const e=_v(t);return ee(e,"internal-error"),ee(typeof e.exp<"u","internal-error"),ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $a(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Cr&&mF(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function mF({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _F{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ru(this.lastLoginAt),this.creationTime=Ru(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jd(t){var e;const n=t.auth,r=await t.getIdToken(),i=await $a(t,sP(n,{idToken:r}));ee(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?oP(s.providerUserInfo):[],a=vF(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new A_(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function yF(t){const e=Re(t);await Jd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function vF(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function oP(t){return t.map(e=>{var{providerId:n}=e,r=pv(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wF(t,e){const n=await rP(t,{},async()=>{const r=Po({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=iP(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",nP.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function EF(t,e){return Rr(t,"POST","/v2/accounts:revokeToken",Di(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ee(e.idToken,"internal-error"),ee(typeof e.idToken<"u","internal-error"),ee(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):WT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ee(e.length!==0,"internal-error");const n=WT(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await wF(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new va;return r&&(ee(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ee(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ee(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new va,this.toJSON())}_performRefresh(){return ui("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ji(t,e){ee(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ci{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=pv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new _F(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new A_(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await $a(this,this.stsTokenManager.getToken(this.auth,e));return ee(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return gF(this,e)}reload(){return yF(this)}_assign(e){this!==e&&(ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ci(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Jd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(li(this.auth.app))return Promise.reject(hs(this.auth));const e=await this.getIdToken();return await $a(this,pF(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,h;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,m=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,_=(o=n.photoURL)!==null&&o!==void 0?o:void 0,T=(a=n.tenantId)!==null&&a!==void 0?a:void 0,I=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,v=(c=n.createdAt)!==null&&c!==void 0?c:void 0,y=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:R,emailVerified:N,isAnonymous:M,providerData:k,stsTokenManager:S}=n;ee(R&&S,e,"internal-error");const w=va.fromJSON(this.name,S);ee(typeof R=="string",e,"internal-error"),ji(d,e.name),ji(f,e.name),ee(typeof N=="boolean",e,"internal-error"),ee(typeof M=="boolean",e,"internal-error"),ji(m,e.name),ji(_,e.name),ji(T,e.name),ji(I,e.name),ji(v,e.name),ji(y,e.name);const C=new ci({uid:R,auth:e,email:f,emailVerified:N,displayName:d,isAnonymous:M,photoURL:_,phoneNumber:m,tenantId:T,stsTokenManager:w,createdAt:v,lastLoginAt:y});return k&&Array.isArray(k)&&(C.providerData=k.map(A=>Object.assign({},A))),I&&(C._redirectEventId=I),C}static async _fromIdTokenResponse(e,n,r=!1){const i=new va;i.updateFromServerResponse(n);const s=new ci({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Jd(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];ee(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?oP(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new va;a.updateFromIdToken(r);const l=new ci({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new A_(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT=new Map;function hi(t){Si(t instanceof Function,"Expected a class definition");let e=HT.get(t);return e?(Si(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,HT.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}aP.type="NONE";const qT=aP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rd(t,e,n){return`firebase:${t}:${e}:${n}`}class wa{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=rd(this.userKey,i.apiKey,s),this.fullPersistenceKey=rd("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ci._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new wa(hi(qT),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||hi(qT);const o=rd(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const d=ci._fromJSON(e,h);c!==s&&(a=d),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new wa(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new wa(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KT(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(cP(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(lP(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(dP(e))return"Blackberry";if(fP(e))return"Webos";if(yv(e))return"Safari";if((e.includes("chrome/")||uP(e))&&!e.includes("edge/"))return"Chrome";if(hP(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function lP(t=Gt()){return/firefox\//i.test(t)}function yv(t=Gt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function uP(t=Gt()){return/crios\//i.test(t)}function cP(t=Gt()){return/iemobile/i.test(t)}function hP(t=Gt()){return/android/i.test(t)}function dP(t=Gt()){return/blackberry/i.test(t)}function fP(t=Gt()){return/webos/i.test(t)}function op(t=Gt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function TF(t=Gt()){var e;return op(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function IF(){return B2()&&document.documentMode===10}function pP(t=Gt()){return op(t)||hP(t)||fP(t)||dP(t)||/windows phone/i.test(t)||cP(t)}function SF(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gP(t,e=[]){let n;switch(t){case"Browser":n=KT(Gt());break;case"Worker":n=`${KT(Gt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Rs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CF{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RF(t,e={}){return Rr(t,"GET","/v2/passwordPolicy",Di(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PF=6;class AF{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:PF,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kF{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new GT(this),this.idTokenSubscription=new GT(this),this.beforeStateQueue=new CF(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ZR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=hi(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await wa.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await sP(this,{idToken:e}),r=await ci._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(li(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Jd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=uF()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(li(this.app))return Promise.reject(hs(this));const n=e?Re(e):null;return n&&ee(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return li(this.app)?Promise.reject(hs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return li(this.app)?Promise.reject(hs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(hi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await RF(this),n=new AF(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ro("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await EF(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&hi(e)||this._popupRedirectResolver;ee(n,this,"argument-error"),this.redirectPersistenceManager=await wa.create(this,[hi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ee(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=gP(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&aF(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ul(t){return Re(t)}class GT{constructor(e){this.auth=e,this.observer=null,this.addObserver=Q2(n=>this.observer=n)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ap={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function bF(t){ap=t}function mP(t){return ap.loadJS(t)}function NF(){return ap.recaptchaV2Script}function xF(){return ap.gapiScript}function _P(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DF(t,e){const n=Cs(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Gd(s,e??{}))return i;Ii(i,"already-initialized")}return n.initialize({options:e})}function OF(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(hi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function LF(t,e,n){const r=ul(t);ee(r._canInitEmulator,r,"emulator-config-failed"),ee(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=yP(e),{host:o,port:a}=MF(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||VF()}function yP(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function MF(t){const e=yP(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:QT(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:QT(o)}}}function QT(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function VF(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ui("not implemented")}_getIdTokenResponse(e){return ui("not implemented")}_linkToIdToken(e,n){return ui("not implemented")}_getReauthenticationResolver(e){return ui("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ea(t,e){return sp(t,"POST","/v1/accounts:signInWithIdp",Di(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FF="http://localhost";class fo extends vv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new fo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ii("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=pv(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new fo(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ea(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ea(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ea(e,n)}buildRequest(){const e={requestUri:FF,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Po(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UF(t,e){return Rr(t,"POST","/v1/accounts:sendVerificationCode",Di(t,e))}async function BF(t,e){return sp(t,"POST","/v1/accounts:signInWithPhoneNumber",Di(t,e))}async function jF(t,e){const n=await sp(t,"POST","/v1/accounts:signInWithPhoneNumber",Di(t,e));if(n.temporaryProof)throw ou(t,"account-exists-with-different-credential",n);return n}const $F={USER_NOT_FOUND:"user-not-found"};async function zF(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return sp(t,"POST","/v1/accounts:signInWithPhoneNumber",Di(t,n),$F)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu extends vv{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Pu({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Pu({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return BF(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return jF(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return zF(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!n&&!i&&!s?null:new Pu({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc extends vP{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki extends Oc{constructor(){super("facebook.com")}static credential(e){return fo._fromParams({providerId:Ki.PROVIDER_ID,signInMethod:Ki.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ki.credentialFromTaggedObject(e)}static credentialFromError(e){return Ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ki.credential(e.oauthAccessToken)}catch{return null}}}Ki.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ki.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi extends Oc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return fo._fromParams({providerId:Gi.PROVIDER_ID,signInMethod:Gi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Gi.credentialFromTaggedObject(e)}static credentialFromError(e){return Gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Gi.credential(n,r)}catch{return null}}}Gi.GOOGLE_SIGN_IN_METHOD="google.com";Gi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi extends Oc{constructor(){super("github.com")}static credential(e){return fo._fromParams({providerId:Qi.PROVIDER_ID,signInMethod:Qi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qi.credentialFromTaggedObject(e)}static credentialFromError(e){return Qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qi.credential(e.oauthAccessToken)}catch{return null}}}Qi.GITHUB_SIGN_IN_METHOD="github.com";Qi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi extends Oc{constructor(){super("twitter.com")}static credential(e,n){return fo._fromParams({providerId:Yi.PROVIDER_ID,signInMethod:Yi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Yi.credentialFromTaggedObject(e)}static credentialFromError(e){return Yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Yi.credential(n,r)}catch{return null}}}Yi.TWITTER_SIGN_IN_METHOD="twitter.com";Yi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await ci._fromIdTokenResponse(e,r,i),o=YT(r);return new za({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=YT(r);return new za({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function YT(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd extends Cr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Xd.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Xd(e,n,r,i)}}function wP(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Xd._fromErrorAndOperation(t,s,e,r):s})}async function WF(t,e,n=!1){const r=await $a(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return za._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HF(t,e,n=!1){const{auth:r}=t;if(li(r.app))return Promise.reject(hs(r));const i="reauthenticate";try{const s=await $a(t,wP(r,i,e,t),n);ee(s.idToken,r,"internal-error");const o=_v(s.idToken);ee(o,r,"internal-error");const{sub:a}=o;return ee(t.uid===a,r,"user-mismatch"),za._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Ii(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EP(t,e,n=!1){if(li(t.app))return Promise.reject(hs(t));const r="signIn",i=await wP(t,r,e),s=await za._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function qF(t,e){return EP(ul(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KF(t,e){return Rr(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qW(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Re(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await $a(r,KF(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GF(t,e){return Re(t).setPersistence(e)}function QF(t,e,n,r){return Re(t).onIdTokenChanged(e,n,r)}function YF(t,e,n){return Re(t).beforeAuthStateChanged(e,n)}function KW(t){return Re(t).signOut()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JF(t,e){return Rr(t,"POST","/v2/accounts/mfaEnrollment:start",Di(t,e))}const Zd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Zd,"1"),this.storage.removeItem(Zd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XF(){const t=Gt();return yv(t)||op(t)}const ZF=1e3,eU=10;class IP extends TP{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=XF()&&SF(),this.fallbackToPolling=pP(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);IF()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,eU):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},ZF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}IP.type="LOCAL";const SP=IP;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP extends TP{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}CP.type="SESSION";const RP=CP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tU(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new lp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await tU(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}lp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wv(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=wv("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const f=d;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(){return window}function rU(t){Tt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ev(){return typeof Tt().WorkerGlobalScope<"u"&&typeof Tt().importScripts=="function"}async function iU(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function sU(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function oU(){return Ev()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PP="firebaseLocalStorageDb",aU=1,ef="firebaseLocalStorage",AP="fbase_key";class Lc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function up(t,e){return t.transaction([ef],e?"readwrite":"readonly").objectStore(ef)}function lU(){const t=indexedDB.deleteDatabase(PP);return new Lc(t).toPromise()}function k_(){const t=indexedDB.open(PP,aU);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(ef,{keyPath:AP})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(ef)?e(r):(r.close(),await lU(),e(await k_()))})})}async function JT(t,e,n){const r=up(t,!0).put({[AP]:e,value:n});return new Lc(r).toPromise()}async function uU(t,e){const n=up(t,!1).get(e),r=await new Lc(n).toPromise();return r===void 0?null:r.value}function XT(t,e){const n=up(t,!0).delete(e);return new Lc(n).toPromise()}const cU=800,hU=3;class kP{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await k_(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>hU)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ev()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=lp._getInstance(oU()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await iU(),!this.activeServiceWorker)return;this.sender=new nU(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||sU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await k_();return await JT(e,Zd,"1"),await XT(e,Zd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>JT(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>uU(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>XT(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=up(i,!1).getAll();return new Lc(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),cU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}kP.type="LOCAL";const dU=kP;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fU(t,e){return Rr(t,"POST","/v2/accounts/mfaSignIn:start",Di(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pU=500,gU=6e4,Dh=1e12;class mU{constructor(e){this.auth=e,this.counter=Dh,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new _U(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||Dh;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||Dh;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||Dh;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class _U{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;ee(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=yU(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},gU)},pU))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function yU(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qg=_P("rcb"),vU=new Dc(3e4,6e4);class wU{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=Tt().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return ee(EU(n),e,"argument-error"),this.shouldResolveImmediately(n)&&zT(Tt().grecaptcha)?Promise.resolve(Tt().grecaptcha):new Promise((r,i)=>{const s=Tt().setTimeout(()=>{i(zn(e,"network-request-failed"))},vU.get());Tt()[qg]=()=>{Tt().clearTimeout(s),delete Tt()[qg];const a=Tt().grecaptcha;if(!a||!zT(a)){i(zn(e,"internal-error"));return}const l=a.render;a.render=(c,h)=>{const d=l(c,h);return this.counter++,d},this.hostLanguage=n,r(a)};const o=`${NF()}?${Po({onload:qg,render:"explicit",hl:n})}`;mP(o).catch(()=>{clearTimeout(s),i(zn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=Tt().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function EU(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class TU{async load(e){return new mU(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bP="recaptcha",IU={theme:"light",type:"image"};class GW{constructor(e,n,r=Object.assign({},IU)){this.parameters=r,this.type=bP,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ul(e),this.isInvisible=this.parameters.size==="invisible",ee(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof n=="string"?document.getElementById(n):n;ee(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new TU:new wU,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const s=o=>{o&&(this.tokenChangeListeners.delete(s),i(o))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){ee(!this.parameters.sitekey,this.auth,"argument-error"),ee(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ee(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=Tt()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){ee(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){ee(tP()&&!Ev(),this.auth,"internal-error"),await SU(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await fF(this.auth);ee(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return ee(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function SU(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CU{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Pu._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function QW(t,e,n){if(li(t.app))return Promise.reject(hs(t));const r=ul(t),i=await RU(r,e,Re(n));return new CU(i,s=>qF(r,s))}async function RU(t,e,n){var r;const i=await n.verify();try{ee(typeof i=="string",t,"argument-error"),ee(n.type===bP,t,"argument-error");let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const o=s.session;if("phoneNumber"in s)return ee(o.type==="enroll",t,"internal-error"),(await JF(t,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{ee(o.type==="signin",t,"internal-error");const a=((r=s.multiFactorHint)===null||r===void 0?void 0:r.uid)||s.multiFactorUid;return ee(a,t,"missing-multi-factor-info"),(await fU(t,{mfaPendingCredential:o.credential,mfaEnrollmentId:a,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:o}=await UF(t,{phoneNumber:s.phoneNumber,recaptchaToken:i});return o}}finally{n._reset()}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PU(t,e){return e?hi(e):(ee(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv extends vv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ea(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ea(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ea(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function AU(t){return EP(t.auth,new Tv(t),t.bypassAuthState)}function kU(t){const{auth:e,user:n}=t;return ee(n,e,"internal-error"),HF(n,new Tv(t),t.bypassAuthState)}async function bU(t){const{auth:e,user:n}=t;return ee(n,e,"internal-error"),WF(n,new Tv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return AU;case"linkViaPopup":case"linkViaRedirect":return bU;case"reauthViaPopup":case"reauthViaRedirect":return kU;default:Ii(this.auth,"internal-error")}}resolve(e){Si(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Si(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NU=new Dc(2e3,1e4);class ha extends NP{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,ha.currentPopupAction&&ha.currentPopupAction.cancel(),ha.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ee(e,this.auth,"internal-error"),e}async onExecution(){Si(this.filter.length===1,"Popup operations only handle one event");const e=wv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(zn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(zn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ha.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(zn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,NU.get())};e()}}ha.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xU="pendingRedirect",id=new Map;class DU extends NP{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=id.get(this.auth._key());if(!e){try{const r=await OU(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}id.set(this.auth._key(),e)}return this.bypassAuthState||id.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function OU(t,e){const n=VU(e),r=MU(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function LU(t,e){id.set(t._key(),e)}function MU(t){return hi(t._redirectPersistence)}function VU(t){return rd(xU,t.config.apiKey,t.name)}async function FU(t,e,n=!1){if(li(t.app))return Promise.reject(hs(t));const r=ul(t),i=PU(r,e),o=await new DU(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UU=10*60*1e3;class BU{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!jU(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!xP(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(zn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=UU&&this.cachedEventUids.clear(),this.cachedEventUids.has(ZT(e))}saveEventToCache(e){this.cachedEventUids.add(ZT(e)),this.lastProcessedEventTime=Date.now()}}function ZT(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function xP({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function jU(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xP(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $U(t,e={}){return Rr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,WU=/^https?/;async function HU(t){if(t.config.emulator)return;const{authorizedDomains:e}=await $U(t);for(const n of e)try{if(qU(n))return}catch{}Ii(t,"unauthorized-domain")}function qU(t){const e=P_(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!WU.test(n))return!1;if(zU.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KU=new Dc(3e4,6e4);function eI(){const t=Tt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function GU(t){return new Promise((e,n)=>{var r,i,s;function o(){eI(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{eI(),n(zn(t,"network-request-failed"))},timeout:KU.get()})}if(!((i=(r=Tt().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Tt().gapi)===null||s===void 0)&&s.load)o();else{const a=_P("iframefcb");return Tt()[a]=()=>{gapi.load?o():n(zn(t,"network-request-failed"))},mP(`${xF()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw sd=null,e})}let sd=null;function QU(t){return sd=sd||GU(t),sd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YU=new Dc(5e3,15e3),JU="__/auth/iframe",XU="emulator/auth/iframe",ZU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},e4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function t4(t){const e=t.config;ee(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?mv(e,XU):`https://${t.config.authDomain}/${JU}`,r={apiKey:e.apiKey,appName:t.name,v:Rs},i=e4.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Po(r).slice(1)}`}async function n4(t){const e=await QU(t),n=Tt().gapi;return ee(n,t,"internal-error"),e.open({where:document.body,url:t4(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ZU,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=zn(t,"network-request-failed"),a=Tt().setTimeout(()=>{s(o)},YU.get());function l(){Tt().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},i4=500,s4=600,o4="_blank",a4="http://localhost";class tI{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function l4(t,e,n,r=i4,i=s4){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},r4),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Gt().toLowerCase();n&&(a=uP(c)?o4:n),lP(c)&&(e=e||a4,l.scrollbars="yes");const h=Object.entries(l).reduce((f,[m,_])=>`${f}${m}=${_},`,"");if(TF(c)&&a!=="_self")return u4(e||"",a),new tI(null);const d=window.open(e||"",a,h);ee(d,t,"popup-blocked");try{d.focus()}catch{}return new tI(d)}function u4(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c4="__/auth/handler",h4="emulator/auth/handler",d4=encodeURIComponent("fac");async function nI(t,e,n,r,i,s){ee(t.config.authDomain,t,"auth-domain-config-required"),ee(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Rs,eventId:i};if(e instanceof vP){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",qd(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries(s||{}))o[h]=d}if(e instanceof Oc){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),c=l?`#${d4}=${encodeURIComponent(l)}`:"";return`${f4(t)}?${Po(a).slice(1)}${c}`}function f4({config:t}){return t.emulator?mv(t,h4):`https://${t.authDomain}/${c4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kg="webStorageSupport";class p4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=RP,this._completeRedirectFn=FU,this._overrideRedirectResult=LU}async _openPopup(e,n,r,i){var s;Si((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await nI(e,n,r,P_(),i);return l4(e,o,wv())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await nI(e,n,r,P_(),i);return rU(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Si(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await n4(e),r=new BU(e);return n.register("authEvent",i=>(ee(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Kg,{type:Kg},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Kg];o!==void 0&&n(!!o),Ii(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=HU(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return pP()||yv()||op()}}const g4=p4;var rI="@firebase/auth",iI="1.7.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _4(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function y4(t){lr(new Kn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ee(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:gP(t)},c=new kF(r,i,s,l);return OF(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),lr(new Kn("auth-internal",e=>{const n=ul(e.getProvider("auth").getImmediate());return(r=>new m4(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),on(rI,iI,_4(t)),on(rI,iI,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v4=5*60,w4=jR("authIdTokenMaxAge")||v4;let sI=null;const E4=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>w4)return;const i=n==null?void 0:n.token;sI!==i&&(sI=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function T4(t=xc()){const e=Cs(t,"auth");if(e.isInitialized())return e.getImmediate();const n=DF(t,{popupRedirectResolver:g4,persistence:[dU,SP,RP]}),r=jR("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=E4(s.toString());YF(n,o,()=>o(n.currentUser)),QF(n,a=>o(a))}}const i=UR("auth");return i&&LF(n,`http://${i}`),n}function I4(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}bF({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=zn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",I4().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});y4("Browser");const oI="@firebase/database",aI="1.0.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let DP="";function S4(t){DP=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Mt(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:oc(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R4{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Kr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OP=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new C4(e)}}catch{}return new R4},Ks=OP("localStorage"),b_=OP("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ta=new rp("@firebase/database"),P4=function(){let t=1;return function(){return t++}}(),LP=function(t){const e=X2(t),n=new G2;n.update(e);const r=n.digest();return uv.encodeByteArray(r)},Mc=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Mc.apply(null,r):typeof r=="object"?e+=Mt(r):e+=r,e+=" "}return e};let Zs=null,lI=!0;const A4=function(t,e){H(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Ta.logLevel=Se.VERBOSE,Zs=Ta.log.bind(Ta),e&&b_.set("logging_enabled",!0)):typeof t=="function"?Zs=t:(Zs=null,b_.remove("logging_enabled"))},zt=function(...t){if(lI===!0&&(lI=!1,Zs===null&&b_.get("logging_enabled")===!0&&A4(!0)),Zs){const e=Mc.apply(null,t);Zs(e)}},Vc=function(t){return function(...e){zt(t,...e)}},N_=function(...t){const e="FIREBASE INTERNAL ERROR: "+Mc(...t);Ta.error(e)},Ci=function(...t){const e=`FIREBASE FATAL ERROR: ${Mc(...t)}`;throw Ta.error(e),new Error(e)},bn=function(...t){const e="FIREBASE WARNING: "+Mc(...t);Ta.warn(e)},k4=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&bn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},cp=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},b4=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Wa="[MIN_NAME]",po="[MAX_NAME]",Ao=function(t,e){if(t===e)return 0;if(t===Wa||e===po)return-1;if(e===Wa||t===po)return 1;{const n=uI(t),r=uI(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},N4=function(t,e){return t===e?0:t<e?-1:1},Gl=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Mt(e))},Iv=function(t){if(typeof t!="object"||t===null)return Mt(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Mt(e[r]),n+=":",n+=Iv(t[e[r]]);return n+="}",n},MP=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function cn(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const VP=function(t){H(!cp(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,a,l;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const c=[];for(l=n;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(i?1:0),c.reverse();const h=c.join("");let d="";for(l=0;l<64;l+=8){let f=parseInt(h.substr(l,8),2).toString(16);f.length===1&&(f="0"+f),d=d+f}return d.toLowerCase()},x4=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},D4=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function O4(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const L4=new RegExp("^-?(0*)\\d{1,10}$"),M4=-2147483648,V4=2147483647,uI=function(t){if(L4.test(t)){const e=Number(t);if(e>=M4&&e<=V4)return e}return null},cl=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw bn("Exception was thrown by user callback.",n),e},Math.floor(0))}},F4=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Au=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){bn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(zt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',bn(e)}}class Ia{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Ia.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sv="5",FP="v",UP="s",BP="r",jP="f",$P=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,zP="ls",WP="p",x_="ac",HP="websocket",qP="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(e,n,r,i,s=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ks.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ks.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function j4(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function GP(t,e,n){H(typeof e=="string","typeof type must == string"),H(typeof n=="object","typeof params must == object");let r;if(e===HP)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===qP)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);j4(t)&&(n.ns=t.namespace);const i=[];return cn(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{constructor(){this.counters_={}}incrementCounter(e,n=1){Kr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return x2(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gg={},Qg={};function Cv(t){const e=t.toString();return Gg[e]||(Gg[e]=new $4),Gg[e]}function z4(t,e){const n=t.toString();return Qg[n]||(Qg[n]=e()),Qg[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W4{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&cl(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI="start",H4="close",q4="pLPCommand",K4="pRTLPCB",QP="id",YP="pw",JP="ser",G4="cb",Q4="seg",Y4="ts",J4="d",X4="dframe",XP=1870,ZP=30,Z4=XP-ZP,eB=25e3,tB=3e4;class da{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Vc(e),this.stats_=Cv(n),this.urlFn=l=>(this.appCheckToken&&(l[x_]=this.appCheckToken),GP(n,qP,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new W4(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(tB)),b4(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Rv((...s)=>{const[o,a,l,c,h]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===cI)this.id=a,this.password=l;else if(o===H4)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[cI]="t",r[JP]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[G4]=this.scriptTagHolder.uniqueCallbackIdentifier),r[FP]=Sv,this.transportSessionId&&(r[UP]=this.transportSessionId),this.lastSessionId&&(r[zP]=this.lastSessionId),this.applicationId&&(r[WP]=this.applicationId),this.appCheckToken&&(r[x_]=this.appCheckToken),typeof location<"u"&&location.hostname&&$P.test(location.hostname)&&(r[BP]=jP);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){da.forceAllow_=!0}static forceDisallow(){da.forceDisallow_=!0}static isAvailable(){return da.forceAllow_?!0:!da.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!x4()&&!D4()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Mt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=VR(n),i=MP(r,Z4);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[X4]="t",r[QP]=e,r[YP]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Mt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Rv{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=P4(),window[q4+this.uniqueCallbackIdentifier]=e,window[K4+this.uniqueCallbackIdentifier]=n,this.myIFrame=Rv.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){zt("frame writing exception"),a.stack&&zt(a.stack),zt(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||zt("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[QP]=this.myID,e[YP]=this.myPW,e[JP]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+ZP+r.length<=XP;){const o=this.pendingSegs.shift();r=r+"&"+Q4+i+"="+o.seg+"&"+Y4+i+"="+o.ts+"&"+J4+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(eB)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{zt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nB=16384,rB=45e3;let tf=null;typeof MozWebSocket<"u"?tf=MozWebSocket:typeof WebSocket<"u"&&(tf=WebSocket);class yr{constructor(e,n,r,i,s,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Vc(this.connId),this.stats_=Cv(n),this.connURL=yr.connectionURL_(n,o,a,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[FP]=Sv,typeof location<"u"&&location.hostname&&$P.test(location.hostname)&&(o[BP]=jP),n&&(o[UP]=n),r&&(o[zP]=r),i&&(o[x_]=i),s&&(o[WP]=s),GP(e,HP,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ks.set("previous_websocket_failure",!0);try{let r;zR(),this.mySock=new tf(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){yr.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&tf!==null&&!yr.forceDisallow_}static previouslyFailed(){return Ks.isInMemoryStorage||Ks.get("previous_websocket_failure")===!0}markConnectionHealthy(){Ks.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=oc(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(H(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=Mt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=MP(n,nB);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(rB))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}yr.responsesRequiredToBeHealthy=2;yr.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[da,yr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=yr&&yr.isAvailable();let r=n&&!yr.previouslyFailed();if(e.webSocketOnly&&(n||bn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[yr];else{const i=this.transports_=[];for(const s of lc.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);lc.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}lc.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iB=6e4,sB=5e3,oB=10*1024,aB=100*1024,Yg="t",hI="d",lB="s",dI="r",uB="e",fI="o",pI="a",gI="n",mI="p",cB="h";class hB{constructor(e,n,r,i,s,o,a,l,c,h){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Vc("c:"+this.id+":"),this.transportManager_=new lc(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Au(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>aB?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>oB?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Yg in e){const n=e[Yg];n===pI?this.upgradeIfSecondaryHealthy_():n===dI?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===fI&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Gl("t",e),r=Gl("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:mI,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:pI,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:gI,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Gl("t",e),r=Gl("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Gl(Yg,e);if(hI in e){const r=e[hI];if(n===cB){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===gI){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===lB?this.onConnectionShutdown_(r):n===dI?this.onReset_(r):n===uB?N_("Server Error: "+r):n===fI?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):N_("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Sv!==r&&bn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Au(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(iB))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Au(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(sB))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:mI,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ks.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e){this.allowedEvents_=e,this.listeners_={},H(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){H(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf extends tA{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!dv()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new nf}getInitialEvent(e){return H(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I=32,yI=768;class Ue{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Le(){return new Ue("")}function me(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function ms(t){return t.pieces_.length-t.pieceNum_}function Ke(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Ue(t.pieces_,e)}function Pv(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function dB(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function uc(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function nA(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Ue(e,0)}function yt(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Ue)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new Ue(n,0)}function _e(t){return t.pieceNum_>=t.pieces_.length}function Rn(t,e){const n=me(t),r=me(e);if(n===null)return e;if(n===r)return Rn(Ke(t),Ke(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function fB(t,e){const n=uc(t,0),r=uc(e,0);for(let i=0;i<n.length&&i<r.length;i++){const s=Ao(n[i],r[i]);if(s!==0)return s}return n.length===r.length?0:n.length<r.length?-1:1}function Av(t,e){if(ms(t)!==ms(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function rr(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(ms(t)>ms(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class pB{constructor(e,n){this.errorPrefix_=n,this.parts_=uc(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=np(this.parts_[r]);rA(this)}}function gB(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=np(e),rA(t)}function mB(t){const e=t.parts_.pop();t.byteLength_-=np(e),t.parts_.length>0&&(t.byteLength_-=1)}function rA(t){if(t.byteLength_>yI)throw new Error(t.errorPrefix_+"has a key path longer than "+yI+" bytes ("+t.byteLength_+").");if(t.parts_.length>_I)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+_I+") or object contains a cycle "+Bs(t))}function Bs(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv extends tA{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new kv}getInitialEvent(e){return H(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ql=1e3,_B=60*5*1e3,vI=30*1e3,yB=1.3,vB=3e4,wB="server_kill",wI=3;class mi extends eA{constructor(e,n,r,i,s,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=mi.nextPersistentConnectionId_++,this.log_=Vc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ql,this.maxReconnectDelay_=_B,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!zR())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");kv.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&nf.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(Mt(s)),H(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new ii,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),H(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),H(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const l=a.d,c=a.s;mi.warnOnListenWarnings_(l,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Kr(e,"w")){const r=Ba(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();bn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||K2(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=vI)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=q2(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),H(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Mt(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):N_("Unrecognized action received from server: "+Mt(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){H(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ql,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Ql,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>vB&&(this.reconnectDelay_=Ql),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*yB)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+mi.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,r())},c=function(d){H(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:l,sendRequest:c};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,f]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);o?zt("getToken() completed but was canceled"):(zt("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=f&&f.token,a=new hB(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,m=>{bn(m+" ("+this.repoInfo_.toString()+")"),this.interrupt(wB)},s))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&bn(d),l())}}}interrupt(e){zt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){zt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],qd(this.interruptReasons_)&&(this.reconnectDelay_=Ql,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>Iv(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new Ue(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){zt("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=wI&&(this.reconnectDelay_=vI,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){zt("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=wI&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+DP.replace(/\./g,"-")]=1,dv()?e["framework.cordova"]=1:$R()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=nf.getInstance().currentlyOnline();return qd(this.interruptReasons_)&&e}}mi.nextPersistentConnectionId_=0;mi.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new ye(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new ye(Wa,e),i=new ye(Wa,n);return this.compare(r,i)!==0}minPost(){return ye.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oh;class iA extends hp{static get __EMPTY_NODE(){return Oh}static set __EMPTY_NODE(e){Oh=e}compare(e,n){return Ao(e.name,n.name)}isDefinedOn(e){throw ll("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return ye.MIN}maxPost(){return new ye(po,Oh)}makePost(e,n){return H(typeof e=="string","KeyIndex indexValue must always be a string."),new ye(e,Oh)}toString(){return".key"}}const Sa=new iA;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lh=class{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Mn=class au{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??au.RED,this.left=i??Ur.EMPTY_NODE,this.right=s??Ur.EMPTY_NODE}copy(e,n,r,i,s){return new au(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ur.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Ur.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,au.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,au.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}};Mn.RED=!0;Mn.BLACK=!1;class EB{copy(e,n,r,i,s){return this}insert(e,n,r){return new Mn(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}let Ur=class od{constructor(e,n=od.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new od(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Mn.BLACK,null,null))}remove(e){return new od(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Mn.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Lh(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Lh(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Lh(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Lh(this.root_,null,this.comparator_,!0,e)}};Ur.EMPTY_NODE=new EB;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TB(t,e){return Ao(t.name,e.name)}function bv(t,e){return Ao(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let D_;function IB(t){D_=t}const sA=function(t){return typeof t=="number"?"number:"+VP(t):"string:"+t},oA=function(t){if(t.isLeafNode()){const e=t.val();H(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Kr(e,".sv"),"Priority must be a string or number.")}else H(t===D_||t.isEmpty(),"priority of unexpected type.");H(t===D_||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let EI;class Dt{constructor(e,n=Dt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,H(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),oA(this.priorityNode_)}static set __childrenNodeConstructor(e){EI=e}static get __childrenNodeConstructor(){return EI}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Dt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Dt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return _e(e)?this:me(e)===".priority"?this.priorityNode_:Dt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Dt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=me(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(H(r!==".priority"||ms(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Dt.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ke(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+sA(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=VP(this.value_):e+=this.value_,this.lazyHash_=LP(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Dt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Dt.__childrenNodeConstructor?-1:(H(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=Dt.VALUE_TYPE_ORDER.indexOf(n),s=Dt.VALUE_TYPE_ORDER.indexOf(r);return H(i>=0,"Unknown leaf type: "+n),H(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Dt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aA,lA;function SB(t){aA=t}function CB(t){lA=t}class RB extends hp{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?Ao(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return ye.MIN}maxPost(){return new ye(po,new Dt("[PRIORITY-POST]",lA))}makePost(e,n){const r=aA(e);return new ye(n,new Dt("[PRIORITY-POST]",r))}toString(){return".priority"}}const ut=new RB;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PB=Math.log(2);class AB{constructor(e){const n=s=>parseInt(Math.log(s)/PB,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const rf=function(t,e,n,r){t.sort(e);const i=function(l,c){const h=c-l;let d,f;if(h===0)return null;if(h===1)return d=t[l],f=n?n(d):d,new Mn(f,d.node,Mn.BLACK,null,null);{const m=parseInt(h/2,10)+l,_=i(l,m),T=i(m+1,c);return d=t[m],f=n?n(d):d,new Mn(f,d.node,Mn.BLACK,_,T)}},s=function(l){let c=null,h=null,d=t.length;const f=function(_,T){const I=d-_,v=d;d-=_;const y=i(I+1,v),R=t[I],N=n?n(R):R;m(new Mn(N,R.node,T,null,y))},m=function(_){c?(c.left=_,c=_):(h=_,c=_)};for(let _=0;_<l.count;++_){const T=l.nextBitIsOne(),I=Math.pow(2,l.count-(_+1));T?f(I,Mn.BLACK):(f(I,Mn.BLACK),f(I,Mn.RED))}return h},o=new AB(t.length),a=s(o);return new Ur(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jg;const Go={};class di{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return H(Go&&ut,"ChildrenNode.ts has not been loaded"),Jg=Jg||new di({".priority":Go},{".priority":ut}),Jg}get(e){const n=Ba(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Ur?n:null}hasIndex(e){return Kr(this.indexSet_,e.toString())}addIndex(e,n){H(e!==Sa,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(ye.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=rf(r,e.getCompare()):a=Go;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const h=Object.assign({},this.indexes_);return h[l]=a,new di(h,c)}addToIndexes(e,n){const r=Kd(this.indexes_,(i,s)=>{const o=Ba(this.indexSet_,s);if(H(o,"Missing index implementation for "+s),i===Go)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(ye.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),rf(a,o.getCompare())}else return Go;else{const a=n.get(e.name);let l=i;return a&&(l=l.remove(new ye(e.name,a))),l.insert(e,e.node)}});return new di(r,this.indexSet_)}removeFromIndexes(e,n){const r=Kd(this.indexes_,i=>{if(i===Go)return i;{const s=n.get(e.name);return s?i.remove(new ye(e.name,s)):i}});return new di(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yl;class ae{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&oA(this.priorityNode_),this.children_.isEmpty()&&H(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Yl||(Yl=new ae(new Ur(bv),null,di.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Yl}updatePriority(e){return this.children_.isEmpty()?this:new ae(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Yl:n}}getChild(e){const n=me(e);return n===null?this:this.getImmediateChild(n).getChild(Ke(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(H(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new ye(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?Yl:this.priorityNode_;return new ae(i,o,s)}}updateChild(e,n){const r=me(e);if(r===null)return n;{H(me(e)!==".priority"||ms(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(Ke(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(ut,(o,a)=>{n[o]=a.val(e),r++,s&&ae.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+sA(this.getPriority().val())+":"),this.forEachChild(ut,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":LP(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new ye(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new ye(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new ye(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,ye.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,ye.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Fc?-1:0}withIndex(e){if(e===Sa||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new ae(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Sa||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(ut),i=n.getIterator(ut);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Sa?null:this.indexMap_.get(e.toString())}}ae.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class kB extends ae{constructor(){super(new Ur(bv),ae.EMPTY_NODE,di.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ae.EMPTY_NODE}isEmpty(){return!1}}const Fc=new kB;Object.defineProperties(ye,{MIN:{value:new ye(Wa,ae.EMPTY_NODE)},MAX:{value:new ye(po,Fc)}});iA.__EMPTY_NODE=ae.EMPTY_NODE;Dt.__childrenNodeConstructor=ae;IB(Fc);CB(Fc);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bB=!0;function St(t,e=null){if(t===null)return ae.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),H(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Dt(n,St(e))}if(!(t instanceof Array)&&bB){const n=[];let r=!1;if(cn(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=St(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new ye(o,l)))}}),n.length===0)return ae.EMPTY_NODE;const s=rf(n,TB,o=>o.name,bv);if(r){const o=rf(n,ut.getCompare());return new ae(s,St(e),new di({".priority":o},{".priority":ut}))}else return new ae(s,St(e),di.Default)}else{let n=ae.EMPTY_NODE;return cn(t,(r,i)=>{if(Kr(t,r)&&r.substring(0,1)!=="."){const s=St(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(St(e))}}SB(St);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NB extends hp{constructor(e){super(),this.indexPath_=e,H(!_e(e)&&me(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?Ao(e.name,n.name):s}makePost(e,n){const r=St(e),i=ae.EMPTY_NODE.updateChild(this.indexPath_,r);return new ye(n,i)}maxPost(){const e=ae.EMPTY_NODE.updateChild(this.indexPath_,Fc);return new ye(po,e)}toString(){return uc(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xB extends hp{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Ao(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return ye.MIN}maxPost(){return ye.MAX}makePost(e,n){const r=St(e);return new ye(n,r)}toString(){return".value"}}const DB=new xB;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uA(t){return{type:"value",snapshotNode:t}}function Ha(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function cc(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function hc(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function OB(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){H(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(cc(n,a)):H(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Ha(n,r)):o.trackChildChange(hc(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(ut,(i,s)=>{n.hasChild(i)||r.trackChildChange(cc(i,s))}),n.isLeafNode()||n.forEachChild(ut,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(hc(i,s,o))}else r.trackChildChange(Ha(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?ae.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e){this.indexedFilter_=new Nv(e.getIndex()),this.index_=e.getIndex(),this.startPost_=dc.getStartPost_(e),this.endPost_=dc.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new ye(n,r))||(r=ae.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=ae.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(ae.EMPTY_NODE);const s=this;return n.forEachChild(ut,(o,a)=>{s.matches(new ye(o,a))||(i=i.updateImmediateChild(o,ae.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LB{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new dc(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new ye(n,r))||(r=ae.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=ae.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=ae.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(ae.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){const a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,ae.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){const d=this.index_.getCompare();o=(f,m)=>d(m,f)}else o=this.index_.getCompare();const a=e;H(a.numChildren()===this.limit_,"");const l=new ye(n,r),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(l);if(a.hasChild(n)){const d=a.getImmediateChild(n);let f=i.getChildAfterChild(this.index_,c,this.reverse_);for(;f!=null&&(f.name===n||a.hasChild(f.name));)f=i.getChildAfterChild(this.index_,f,this.reverse_);const m=f==null?1:o(f,l);if(h&&!r.isEmpty()&&m>=0)return s!=null&&s.trackChildChange(hc(n,r,d)),a.updateImmediateChild(n,r);{s!=null&&s.trackChildChange(cc(n,d));const T=a.updateImmediateChild(n,ae.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(s!=null&&s.trackChildChange(Ha(f.name,f.node)),T.updateImmediateChild(f.name,f.node)):T}}else return r.isEmpty()?e:h&&o(c,l)>=0?(s!=null&&(s.trackChildChange(cc(c.name,c.node)),s.trackChildChange(Ha(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(c.name,ae.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ut}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return H(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return H(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Wa}hasEnd(){return this.endSet_}getIndexEndValue(){return H(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return H(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:po}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return H(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ut}copy(){const e=new xv;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function MB(t){return t.loadsAllData()?new Nv(t.getIndex()):t.hasLimit()?new LB(t):new dc(t)}function TI(t){const e={};if(t.isDefault())return e;let n;if(t.index_===ut?n="$priority":t.index_===DB?n="$value":t.index_===Sa?n="$key":(H(t.index_ instanceof NB,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Mt(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Mt(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Mt(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Mt(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Mt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function II(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==ut&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf extends eA{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Vc("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(H(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=sf.getListenId_(e,r),a={};this.listens_[o]=a;const l=TI(e._queryParams);this.restRequest_(s+".json",l,(c,h)=>{let d=h;if(c===404&&(d=null,c=null),c===null&&this.onDataUpdate_(s,d,!1,r),Ba(this.listens_,o)===a){let f;c?c===401?f="permission_denied":f="rest_error:"+c:f="ok",i(f,null)}})}unlisten(e,n){const r=sf.getListenId_(e,n);delete this.listens_[r]}get(e){const n=TI(e._queryParams),r=e._path.toString(),i=new ii;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Po(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=oc(a.responseText)}catch{bn("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&bn("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VB{constructor(){this.rootNode_=ae.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function of(){return{value:null,children:new Map}}function hl(t,e,n){if(_e(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=me(e);t.children.has(r)||t.children.set(r,of());const i=t.children.get(r);e=Ke(e),hl(i,e,n)}}function O_(t,e){if(_e(e))return t.value=null,t.children.clear(),!0;if(t.value!==null){if(t.value.isLeafNode())return!1;{const n=t.value;return t.value=null,n.forEachChild(ut,(r,i)=>{hl(t,new Ue(r),i)}),O_(t,e)}}else if(t.children.size>0){const n=me(e);return e=Ke(e),t.children.has(n)&&O_(t.children.get(n),e)&&t.children.delete(n),t.children.size===0}else return!0}function L_(t,e,n){t.value!==null?n(e,t.value):FB(t,(r,i)=>{const s=new Ue(e.toString()+"/"+r);L_(i,s,n)})}function FB(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UB{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&cn(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SI=10*1e3,BB=30*1e3,jB=5*60*1e3;class $B{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new UB(e);const r=SI+(BB-SI)*Math.random();Au(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;cn(e,(i,s)=>{s>0&&Kr(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),Au(this.reportStats_.bind(this),Math.floor(Math.random()*2*jB))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vr;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(vr||(vr={}));function cA(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Dv(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Ov(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=vr.ACK_USER_WRITE,this.source=cA()}operationForChild(e){if(_e(this.path)){if(this.affectedTree.value!=null)return H(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Ue(e));return new af(Le(),n,this.revert)}}else return H(me(this.path)===e,"operationForChild called for unrelated child."),new af(Ke(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e,n){this.source=e,this.path=n,this.type=vr.LISTEN_COMPLETE}operationForChild(e){return _e(this.path)?new fc(this.source,Le()):new fc(this.source,Ke(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=vr.OVERWRITE}operationForChild(e){return _e(this.path)?new go(this.source,Le(),this.snap.getImmediateChild(e)):new go(this.source,Ke(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=vr.MERGE}operationForChild(e){if(_e(this.path)){const n=this.children.subtree(new Ue(e));return n.isEmpty()?null:n.value?new go(this.source,Le(),n.value):new pc(this.source,Le(),n)}else return H(me(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new pc(this.source,Ke(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(_e(e))return this.isFullyInitialized()&&!this.filtered_;const n=me(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zB{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function WB(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(OB(o.childName,o.snapshotNode))}),Jl(t,i,"child_removed",e,r,n),Jl(t,i,"child_added",e,r,n),Jl(t,i,"child_moved",s,r,n),Jl(t,i,"child_changed",e,r,n),Jl(t,i,"value",e,r,n),i}function Jl(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,l)=>qB(t,a,l)),o.forEach(a=>{const l=HB(t,a,s);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function HB(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function qB(t,e,n){if(e.childName==null||n.childName==null)throw ll("Should only compare child_ events.");const r=new ye(e.childName,e.snapshotNode),i=new ye(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dp(t,e){return{eventCache:t,serverCache:e}}function ku(t,e,n,r){return dp(new mo(e,n,r),t.serverCache)}function hA(t,e,n,r){return dp(t.eventCache,new mo(e,n,r))}function M_(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function _o(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xg;const KB=()=>(Xg||(Xg=new Ur(N4)),Xg);class et{constructor(e,n=KB()){this.value=e,this.children=n}static fromObject(e){let n=new et(null);return cn(e,(r,i)=>{n=n.set(new Ue(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Le(),value:this.value};if(_e(e))return null;{const r=me(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(Ke(e),n);return s!=null?{path:yt(new Ue(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(_e(e))return this;{const n=me(e),r=this.children.get(n);return r!==null?r.subtree(Ke(e)):new et(null)}}set(e,n){if(_e(e))return new et(n,this.children);{const r=me(e),s=(this.children.get(r)||new et(null)).set(Ke(e),n),o=this.children.insert(r,s);return new et(this.value,o)}}remove(e){if(_e(e))return this.children.isEmpty()?new et(null):new et(null,this.children);{const n=me(e),r=this.children.get(n);if(r){const i=r.remove(Ke(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new et(null):new et(this.value,s)}else return this}}get(e){if(_e(e))return this.value;{const n=me(e),r=this.children.get(n);return r?r.get(Ke(e)):null}}setTree(e,n){if(_e(e))return n;{const r=me(e),s=(this.children.get(r)||new et(null)).setTree(Ke(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new et(this.value,o)}}fold(e){return this.fold_(Le(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(yt(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Le(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(_e(e))return null;{const s=me(e),o=this.children.get(s);return o?o.findOnPath_(Ke(e),yt(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Le(),n)}foreachOnPath_(e,n,r){if(_e(e))return this;{this.value&&r(n,this.value);const i=me(e),s=this.children.get(i);return s?s.foreachOnPath_(Ke(e),yt(n,i),r):new et(null)}}foreach(e){this.foreach_(Le(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(yt(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e){this.writeTree_=e}static empty(){return new Tr(new et(null))}}function bu(t,e,n){if(_e(e))return new Tr(new et(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=Rn(i,e);return s=s.updateChild(o,n),new Tr(t.writeTree_.set(i,s))}else{const i=new et(n),s=t.writeTree_.setTree(e,i);return new Tr(s)}}}function CI(t,e,n){let r=t;return cn(n,(i,s)=>{r=bu(r,yt(e,i),s)}),r}function RI(t,e){if(_e(e))return Tr.empty();{const n=t.writeTree_.setTree(e,new et(null));return new Tr(n)}}function V_(t,e){return ko(t,e)!=null}function ko(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Rn(n.path,e)):null}function PI(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(ut,(r,i)=>{e.push(new ye(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new ye(r,i.value))}),e}function ds(t,e){if(_e(e))return t;{const n=ko(t,e);return n!=null?new Tr(new et(n)):new Tr(t.writeTree_.subtree(e))}}function F_(t){return t.writeTree_.isEmpty()}function qa(t,e){return dA(Le(),t.writeTree_,e)}function dA(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(H(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=dA(yt(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(yt(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lv(t,e){return mA(e,t)}function GB(t,e,n,r,i){H(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=bu(t.visibleWrites,e,n)),t.lastWriteId=r}function QB(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function YB(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);H(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&JB(a,r.path)?i=!1:rr(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return XB(t),!0;if(r.snap)t.visibleWrites=RI(t.visibleWrites,r.path);else{const a=r.children;cn(a,l=>{t.visibleWrites=RI(t.visibleWrites,yt(r.path,l))})}return!0}else return!1}function JB(t,e){if(t.snap)return rr(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&rr(yt(t.path,n),e))return!0;return!1}function XB(t){t.visibleWrites=fA(t.allWrites,ZB,Le()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function ZB(t){return t.visible}function fA(t,e,n){let r=Tr.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)rr(n,o)?(a=Rn(n,o),r=bu(r,a,s.snap)):rr(o,n)&&(a=Rn(o,n),r=bu(r,Le(),s.snap.getChild(a)));else if(s.children){if(rr(n,o))a=Rn(n,o),r=CI(r,a,s.children);else if(rr(o,n))if(a=Rn(o,n),_e(a))r=CI(r,Le(),s.children);else{const l=Ba(s.children,me(a));if(l){const c=l.getChild(Ke(a));r=bu(r,Le(),c)}}}else throw ll("WriteRecord should have .snap or .children")}}return r}function pA(t,e,n,r,i){if(!r&&!i){const s=ko(t.visibleWrites,e);if(s!=null)return s;{const o=ds(t.visibleWrites,e);if(F_(o))return n;if(n==null&&!V_(o,Le()))return null;{const a=n||ae.EMPTY_NODE;return qa(o,a)}}}else{const s=ds(t.visibleWrites,e);if(!i&&F_(s))return n;if(!i&&n==null&&!V_(s,Le()))return null;{const o=function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(rr(c.path,e)||rr(e,c.path))},a=fA(t.allWrites,o,e),l=n||ae.EMPTY_NODE;return qa(a,l)}}}function ej(t,e,n){let r=ae.EMPTY_NODE;const i=ko(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(ut,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=ds(t.visibleWrites,e);return n.forEachChild(ut,(o,a)=>{const l=qa(ds(s,new Ue(o)),a);r=r.updateImmediateChild(o,l)}),PI(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=ds(t.visibleWrites,e);return PI(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function tj(t,e,n,r,i){H(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=yt(e,n);if(V_(t.visibleWrites,s))return null;{const o=ds(t.visibleWrites,s);return F_(o)?i.getChild(n):qa(o,i.getChild(n))}}function nj(t,e,n,r){const i=yt(e,n),s=ko(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=ds(t.visibleWrites,i);return qa(o,r.getNode().getImmediateChild(n))}else return null}function rj(t,e){return ko(t.visibleWrites,e)}function ij(t,e,n,r,i,s,o){let a;const l=ds(t.visibleWrites,e),c=ko(l,Le());if(c!=null)a=c;else if(n!=null)a=qa(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const h=[],d=o.getCompare(),f=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let m=f.getNext();for(;m&&h.length<i;)d(m,r)!==0&&h.push(m),m=f.getNext();return h}else return[]}function sj(){return{visibleWrites:Tr.empty(),allWrites:[],lastWriteId:-1}}function lf(t,e,n,r){return pA(t.writeTree,t.treePath,e,n,r)}function Mv(t,e){return ej(t.writeTree,t.treePath,e)}function AI(t,e,n,r){return tj(t.writeTree,t.treePath,e,n,r)}function uf(t,e){return rj(t.writeTree,yt(t.treePath,e))}function oj(t,e,n,r,i,s){return ij(t.writeTree,t.treePath,e,n,r,i,s)}function Vv(t,e,n){return nj(t.writeTree,t.treePath,e,n)}function gA(t,e){return mA(yt(t.treePath,e),t.writeTree)}function mA(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;H(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),H(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,hc(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,cc(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,Ha(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,hc(r,e.snapshotNode,i.oldSnap));else throw ll("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const _A=new lj;class Fv{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new mo(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Vv(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:_o(this.viewCache_),s=oj(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uj(t){return{filter:t}}function cj(t,e){H(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),H(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function hj(t,e,n,r,i){const s=new aj;let o,a;if(n.type===vr.OVERWRITE){const c=n;c.source.fromUser?o=U_(t,e,c.path,c.snap,r,i,s):(H(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!_e(c.path),o=cf(t,e,c.path,c.snap,r,i,a,s))}else if(n.type===vr.MERGE){const c=n;c.source.fromUser?o=fj(t,e,c.path,c.children,r,i,s):(H(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=B_(t,e,c.path,c.children,r,i,a,s))}else if(n.type===vr.ACK_USER_WRITE){const c=n;c.revert?o=mj(t,e,c.path,r,i,s):o=pj(t,e,c.path,c.affectedTree,r,i,s)}else if(n.type===vr.LISTEN_COMPLETE)o=gj(t,e,n.path,r,s);else throw ll("Unknown operation type: "+n.type);const l=s.getChanges();return dj(e,o,l),{viewCache:o,changes:l}}function dj(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=M_(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(uA(M_(e)))}}function yA(t,e,n,r,i,s){const o=e.eventCache;if(uf(r,n)!=null)return e;{let a,l;if(_e(n))if(H(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=_o(e),h=c instanceof ae?c:ae.EMPTY_NODE,d=Mv(r,h);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const c=lf(r,_o(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=me(n);if(c===".priority"){H(ms(n)===1,"Can't have a priority with additional path components");const h=o.getNode();l=e.serverCache.getNode();const d=AI(r,n,h,l);d!=null?a=t.filter.updatePriority(h,d):a=o.getNode()}else{const h=Ke(n);let d;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const f=AI(r,n,o.getNode(),l);f!=null?d=o.getNode().getImmediateChild(c).updateChild(h,f):d=o.getNode().getImmediateChild(c)}else d=Vv(r,c,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),c,d,h,i,s):a=o.getNode()}}return ku(e,a,o.isFullyInitialized()||_e(n),t.filter.filtersNodes())}}function cf(t,e,n,r,i,s,o,a){const l=e.serverCache;let c;const h=o?t.filter:t.filter.getIndexedFilter();if(_e(n))c=h.updateFullNode(l.getNode(),r,null);else if(h.filtersNodes()&&!l.isFiltered()){const m=l.getNode().updateChild(n,r);c=h.updateFullNode(l.getNode(),m,null)}else{const m=me(n);if(!l.isCompleteForPath(n)&&ms(n)>1)return e;const _=Ke(n),I=l.getNode().getImmediateChild(m).updateChild(_,r);m===".priority"?c=h.updatePriority(l.getNode(),I):c=h.updateChild(l.getNode(),m,I,_,_A,null)}const d=hA(e,c,l.isFullyInitialized()||_e(n),h.filtersNodes()),f=new Fv(i,d,s);return yA(t,d,n,i,f,a)}function U_(t,e,n,r,i,s,o){const a=e.eventCache;let l,c;const h=new Fv(i,e,s);if(_e(n))c=t.filter.updateFullNode(e.eventCache.getNode(),r,o),l=ku(e,c,!0,t.filter.filtersNodes());else{const d=me(n);if(d===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),r),l=ku(e,c,a.isFullyInitialized(),a.isFiltered());else{const f=Ke(n),m=a.getNode().getImmediateChild(d);let _;if(_e(f))_=r;else{const T=h.getCompleteChild(d);T!=null?Pv(f)===".priority"&&T.getChild(nA(f)).isEmpty()?_=T:_=T.updateChild(f,r):_=ae.EMPTY_NODE}if(m.equals(_))l=e;else{const T=t.filter.updateChild(a.getNode(),d,_,f,h,o);l=ku(e,T,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function kI(t,e){return t.eventCache.isCompleteForChild(e)}function fj(t,e,n,r,i,s,o){let a=e;return r.foreach((l,c)=>{const h=yt(n,l);kI(e,me(h))&&(a=U_(t,a,h,c,i,s,o))}),r.foreach((l,c)=>{const h=yt(n,l);kI(e,me(h))||(a=U_(t,a,h,c,i,s,o))}),a}function bI(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function B_(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;_e(n)?c=r:c=new et(null).setTree(n,r);const h=e.serverCache.getNode();return c.children.inorderTraversal((d,f)=>{if(h.hasChild(d)){const m=e.serverCache.getNode().getImmediateChild(d),_=bI(t,m,f);l=cf(t,l,new Ue(d),_,i,s,o,a)}}),c.children.inorderTraversal((d,f)=>{const m=!e.serverCache.isCompleteForChild(d)&&f.value===null;if(!h.hasChild(d)&&!m){const _=e.serverCache.getNode().getImmediateChild(d),T=bI(t,_,f);l=cf(t,l,new Ue(d),T,i,s,o,a)}}),l}function pj(t,e,n,r,i,s,o){if(uf(i,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(_e(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return cf(t,e,n,l.getNode().getChild(n),i,s,a,o);if(_e(n)){let c=new et(null);return l.getNode().forEachChild(Sa,(h,d)=>{c=c.set(new Ue(h),d)}),B_(t,e,n,c,i,s,a,o)}else return e}else{let c=new et(null);return r.foreach((h,d)=>{const f=yt(n,h);l.isCompleteForPath(f)&&(c=c.set(h,l.getNode().getChild(f)))}),B_(t,e,n,c,i,s,a,o)}}function gj(t,e,n,r,i){const s=e.serverCache,o=hA(e,s.getNode(),s.isFullyInitialized()||_e(n),s.isFiltered());return yA(t,o,n,r,_A,i)}function mj(t,e,n,r,i,s){let o;if(uf(r,n)!=null)return e;{const a=new Fv(r,e,i),l=e.eventCache.getNode();let c;if(_e(n)||me(n)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=lf(r,_o(e));else{const d=e.serverCache.getNode();H(d instanceof ae,"serverChildren would be complete if leaf node"),h=Mv(r,d)}h=h,c=t.filter.updateFullNode(l,h,s)}else{const h=me(n);let d=Vv(r,h,e.serverCache);d==null&&e.serverCache.isCompleteForChild(h)&&(d=l.getImmediateChild(h)),d!=null?c=t.filter.updateChild(l,h,d,Ke(n),a,s):e.eventCache.getNode().hasChild(h)?c=t.filter.updateChild(l,h,ae.EMPTY_NODE,Ke(n),a,s):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=lf(r,_o(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||uf(r,Le())!=null,ku(e,c,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _j{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Nv(r.getIndex()),s=MB(r);this.processor_=uj(s);const o=n.serverCache,a=n.eventCache,l=i.updateFullNode(ae.EMPTY_NODE,o.getNode(),null),c=s.updateFullNode(ae.EMPTY_NODE,a.getNode(),null),h=new mo(l,o.isFullyInitialized(),i.filtersNodes()),d=new mo(c,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=dp(d,h),this.eventGenerator_=new zB(this.query_)}get query(){return this.query_}}function yj(t){return t.viewCache_.serverCache.getNode()}function vj(t,e){const n=_o(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!_e(e)&&!n.getImmediateChild(me(e)).isEmpty())?n.getChild(e):null}function NI(t){return t.eventRegistrations_.length===0}function wj(t,e){t.eventRegistrations_.push(e)}function xI(t,e,n){const r=[];if(n){H(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){const o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function DI(t,e,n,r){e.type===vr.MERGE&&e.source.queryId!==null&&(H(_o(t.viewCache_),"We should always have a full cache before handling merges"),H(M_(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=hj(t.processor_,i,e,n,r);return cj(t.processor_,s.viewCache),H(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,vA(t,s.changes,s.viewCache.eventCache.getNode(),null)}function Ej(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(ut,(s,o)=>{r.push(Ha(s,o))}),n.isFullyInitialized()&&r.push(uA(n.getNode())),vA(t,r,n.getNode(),e)}function vA(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return WB(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hf;class Tj{constructor(){this.views=new Map}}function Ij(t){H(!hf,"__referenceConstructor has already been defined"),hf=t}function Sj(){return H(hf,"Reference.ts has not been loaded"),hf}function Cj(t){return t.views.size===0}function Uv(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return H(s!=null,"SyncTree gave us an op for an invalid query."),DI(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(DI(o,e,n,r));return s}}function Rj(t,e,n,r,i){const s=e._queryIdentifier,o=t.views.get(s);if(!o){let a=lf(n,i?r:null),l=!1;a?l=!0:r instanceof ae?(a=Mv(n,r),l=!1):(a=ae.EMPTY_NODE,l=!1);const c=dp(new mo(a,l,!1),new mo(r,i,!1));return new _j(e,c)}return o}function Pj(t,e,n,r,i,s){const o=Rj(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),wj(o,n),Ej(o,n)}function Aj(t,e,n,r){const i=e._queryIdentifier,s=[];let o=[];const a=_s(t);if(i==="default")for(const[l,c]of t.views.entries())o=o.concat(xI(c,n,r)),NI(c)&&(t.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const l=t.views.get(i);l&&(o=o.concat(xI(l,n,r)),NI(l)&&(t.views.delete(i),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!_s(t)&&s.push(new(Sj())(e._repo,e._path)),{removed:s,events:o}}function wA(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Ca(t,e){let n=null;for(const r of t.views.values())n=n||vj(r,e);return n}function EA(t,e){if(e._queryParams.loadsAllData())return fp(t);{const r=e._queryIdentifier;return t.views.get(r)}}function TA(t,e){return EA(t,e)!=null}function _s(t){return fp(t)!=null}function fp(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let df;function kj(t){H(!df,"__referenceConstructor has already been defined"),df=t}function bj(){return H(df,"Reference.ts has not been loaded"),df}let Nj=1;class OI{constructor(e){this.listenProvider_=e,this.syncPointTree_=new et(null),this.pendingWriteTree_=sj(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function IA(t,e,n,r,i){return GB(t.pendingWriteTree_,e,n,r,i),i?Uc(t,new go(cA(),e,n)):[]}function Gs(t,e,n=!1){const r=QB(t.pendingWriteTree_,e);if(YB(t.pendingWriteTree_,e)){let s=new et(null);return r.snap!=null?s=s.set(Le(),!0):cn(r.children,o=>{s=s.set(new Ue(o),!0)}),Uc(t,new af(r.path,s,n))}else return[]}function pp(t,e,n){return Uc(t,new go(Dv(),e,n))}function xj(t,e,n){const r=et.fromObject(n);return Uc(t,new pc(Dv(),e,r))}function Dj(t,e){return Uc(t,new fc(Dv(),e))}function Oj(t,e,n){const r=jv(t,n);if(r){const i=$v(r),s=i.path,o=i.queryId,a=Rn(s,e),l=new fc(Ov(o),a);return zv(t,s,l)}else return[]}function j_(t,e,n,r,i=!1){const s=e._path,o=t.syncPointTree_.get(s);let a=[];if(o&&(e._queryIdentifier==="default"||TA(o,e))){const l=Aj(o,e,n,r);Cj(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const c=l.removed;if(a=l.events,!i){const h=c.findIndex(f=>f._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(s,(f,m)=>_s(m));if(h&&!d){const f=t.syncPointTree_.subtree(s);if(!f.isEmpty()){const m=Vj(f);for(let _=0;_<m.length;++_){const T=m[_],I=T.query,v=RA(t,T);t.listenProvider_.startListening(Nu(I),ff(t,I),v.hashFn,v.onComplete)}}}!d&&c.length>0&&!r&&(h?t.listenProvider_.stopListening(Nu(e),null):c.forEach(f=>{const m=t.queryToTagMap.get(gp(f));t.listenProvider_.stopListening(Nu(f),m)}))}Fj(t,c)}return a}function Lj(t,e,n,r){const i=jv(t,r);if(i!=null){const s=$v(i),o=s.path,a=s.queryId,l=Rn(o,e),c=new go(Ov(a),l,n);return zv(t,o,c)}else return[]}function Mj(t,e,n,r){const i=jv(t,r);if(i){const s=$v(i),o=s.path,a=s.queryId,l=Rn(o,e),c=et.fromObject(n),h=new pc(Ov(a),l,c);return zv(t,o,h)}else return[]}function LI(t,e,n,r=!1){const i=e._path;let s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(f,m)=>{const _=Rn(f,i);s=s||Ca(m,_),o=o||_s(m)});let a=t.syncPointTree_.get(i);a?(o=o||_s(a),s=s||Ca(a,Le())):(a=new Tj,t.syncPointTree_=t.syncPointTree_.set(i,a));let l;s!=null?l=!0:(l=!1,s=ae.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((m,_)=>{const T=Ca(_,Le());T&&(s=s.updateImmediateChild(m,T))}));const c=TA(a,e);if(!c&&!e._queryParams.loadsAllData()){const f=gp(e);H(!t.queryToTagMap.has(f),"View does not exist, but we have a tag");const m=Uj();t.queryToTagMap.set(f,m),t.tagToQueryMap.set(m,f)}const h=Lv(t.pendingWriteTree_,i);let d=Pj(a,e,n,h,s,l);if(!c&&!o&&!r){const f=EA(a,e);d=d.concat(Bj(t,e,f))}return d}function Bv(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=Rn(o,e),c=Ca(a,l);if(c)return c});return pA(i,e,s,n,!0)}function Uc(t,e){return SA(e,t.syncPointTree_,null,Lv(t.pendingWriteTree_,Le()))}function SA(t,e,n,r){if(_e(t.path))return CA(t,e,n,r);{const i=e.get(Le());n==null&&i!=null&&(n=Ca(i,Le()));let s=[];const o=me(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const c=n?n.getImmediateChild(o):null,h=gA(r,o);s=s.concat(SA(a,l,c,h))}return i&&(s=s.concat(Uv(i,t,r,n))),s}}function CA(t,e,n,r){const i=e.get(Le());n==null&&i!=null&&(n=Ca(i,Le()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,c=gA(r,o),h=t.operationForChild(o);h&&(s=s.concat(CA(h,a,l,c)))}),i&&(s=s.concat(Uv(i,t,r,n))),s}function RA(t,e){const n=e.query,r=ff(t,n);return{hashFn:()=>(yj(e)||ae.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?Oj(t,n._path,r):Dj(t,n._path);{const s=O4(i,n);return j_(t,n,null,s)}}}}function ff(t,e){const n=gp(e);return t.queryToTagMap.get(n)}function gp(t){return t._path.toString()+"$"+t._queryIdentifier}function jv(t,e){return t.tagToQueryMap.get(e)}function $v(t){const e=t.indexOf("$");return H(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Ue(t.substr(0,e))}}function zv(t,e,n){const r=t.syncPointTree_.get(e);H(r,"Missing sync point for query tag that we're tracking");const i=Lv(t.pendingWriteTree_,e);return Uv(r,n,i,null)}function Vj(t){return t.fold((e,n,r)=>{if(n&&_s(n))return[fp(n)];{let i=[];return n&&(i=wA(n)),cn(r,(s,o)=>{i=i.concat(o)}),i}})}function Nu(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(bj())(t._repo,t._path):t}function Fj(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=gp(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function Uj(){return Nj++}function Bj(t,e,n){const r=e._path,i=ff(t,e),s=RA(t,n),o=t.listenProvider_.startListening(Nu(e),i,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(r);if(i)H(!_s(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,h,d)=>{if(!_e(c)&&h&&_s(h))return[fp(h).query];{let f=[];return h&&(f=f.concat(wA(h).map(m=>m.query))),cn(d,(m,_)=>{f=f.concat(_)}),f}});for(let c=0;c<l.length;++c){const h=l[c];t.listenProvider_.stopListening(Nu(h),ff(t,h))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Wv(n)}node(){return this.node_}}class Hv{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=yt(this.path_,e);return new Hv(this.syncTree_,n)}node(){return Bv(this.syncTree_,this.path_)}}const jj=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},MI=function(t,e,n){if(!t||typeof t!="object")return t;if(H(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return $j(t[".sv"],e,n);if(typeof t[".sv"]=="object")return zj(t[".sv"],e);H(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},$j=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:H(!1,"Unexpected server value: "+t)}},zj=function(t,e,n){t.hasOwnProperty("increment")||H(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&H(!1,"Unexpected increment value: "+r);const i=e.node();if(H(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},Wj=function(t,e,n,r){return qv(e,new Hv(n,t),r)},PA=function(t,e,n){return qv(t,new Wv(e),n)};function qv(t,e,n){const r=t.getPriority().val(),i=MI(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=MI(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new Dt(a,St(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Dt(i))),o.forEachChild(ut,(a,l)=>{const c=qv(l,e.getImmediateChild(a),n);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function Gv(t,e){let n=e instanceof Ue?e:new Ue(e),r=t,i=me(n);for(;i!==null;){const s=Ba(r.node.children,i)||{children:{},childCount:0};r=new Kv(i,r,s),n=Ke(n),i=me(n)}return r}function dl(t){return t.node.value}function AA(t,e){t.node.value=e,$_(t)}function kA(t){return t.node.childCount>0}function Hj(t){return dl(t)===void 0&&!kA(t)}function mp(t,e){cn(t.node.children,(n,r)=>{e(new Kv(n,t,r))})}function bA(t,e,n,r){n&&!r&&e(t),mp(t,i=>{bA(i,e,!0,r)}),n&&r&&e(t)}function qj(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Bc(t){return new Ue(t.parent===null?t.name:Bc(t.parent)+"/"+t.name)}function $_(t){t.parent!==null&&Kj(t.parent,t.name,t)}function Kj(t,e,n){const r=Hj(n),i=Kr(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,$_(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,$_(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gj=/[\[\].#$\/\u0000-\u001F\u007F]/,Qj=/[\[\].#$\u0000-\u001F\u007F]/,Zg=10*1024*1024,Qv=function(t){return typeof t=="string"&&t.length!==0&&!Gj.test(t)},NA=function(t){return typeof t=="string"&&t.length!==0&&!Qj.test(t)},Yj=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),NA(t)},xA=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!cp(t)||t&&typeof t=="object"&&Kr(t,".sv")},z_=function(t,e,n,r){r&&e===void 0||_p(ja(t,"value"),e,n)},_p=function(t,e,n){const r=n instanceof Ue?new pB(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Bs(r));if(typeof e=="function")throw new Error(t+"contains a function "+Bs(r)+" with contents = "+e.toString());if(cp(e))throw new Error(t+"contains "+e.toString()+" "+Bs(r));if(typeof e=="string"&&e.length>Zg/3&&np(e)>Zg)throw new Error(t+"contains a string greater than "+Zg+" utf8 bytes "+Bs(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(cn(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!Qv(o)))throw new Error(t+" contains an invalid key ("+o+") "+Bs(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);gB(r,o),_p(t,a,r),mB(r)}),i&&s)throw new Error(t+' contains ".value" child '+Bs(r)+" in addition to actual children.")}},Jj=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const s=uc(r);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!Qv(s[o]))throw new Error(t+"contains an invalid key ("+s[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(fB);let i=null;for(n=0;n<e.length;n++){if(r=e[n],i!==null&&rr(i,r))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},Xj=function(t,e,n,r){if(r&&e===void 0)return;const i=ja(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];cn(e,(o,a)=>{const l=new Ue(o);if(_p(i,a,yt(n,l)),Pv(l)===".priority"&&!xA(a))throw new Error(i+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(l)}),Jj(i,s)},Zj=function(t,e,n){if(!(n&&e===void 0)){if(cp(e))throw new Error(ja(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!xA(e))throw new Error(ja(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},DA=function(t,e,n,r){if(!(r&&n===void 0)&&!NA(n))throw new Error(ja(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},e$=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),DA(t,e,n,r)},lu=function(t,e){if(me(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},t$=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Qv(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Yj(n))throw new Error(ja(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n${constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Yv(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!Av(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function OA(t,e,n){Yv(t,n),LA(t,r=>Av(r,e))}function Ri(t,e,n){Yv(t,n),LA(t,r=>rr(r,e)||rr(e,r))}function LA(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(r$(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function r$(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Zs&&zt("event: "+n.toString()),cl(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i$="repo_interrupt",s$=25;class o${constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new n$,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=of(),this.transactionQueueTree_=new Kv,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function a$(t,e,n){if(t.stats_=Cv(t.repoInfo_),t.forceRestClient_||F4())t.server_=new sf(t.repoInfo_,(r,i,s,o)=>{VI(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>FI(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Mt(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new mi(t.repoInfo_,e,(r,i,s,o)=>{VI(t,r,i,s,o)},r=>{FI(t,r)},r=>{u$(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=z4(t.repoInfo_,()=>new $B(t.stats_,t.server_)),t.infoData_=new VB,t.infoSyncTree_=new OI({startListening:(r,i,s,o)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=pp(t.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Xv(t,"connected",!1),t.serverSyncTree_=new OI({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,l)=>{const c=o(a,l);Ri(t.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function l$(t){const n=t.infoData_.getNode(new Ue(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Jv(t){return jj({timestamp:l$(t)})}function VI(t,e,n,r,i){t.dataUpdateCount++;const s=new Ue(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const l=Kd(n,c=>St(c));o=Mj(t.serverSyncTree_,s,l,i)}else{const l=St(n);o=Lj(t.serverSyncTree_,s,l,i)}else if(r){const l=Kd(n,c=>St(c));o=xj(t.serverSyncTree_,s,l)}else{const l=St(n);o=pp(t.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=yp(t,s)),Ri(t.eventQueue_,a,o)}function FI(t,e){Xv(t,"connected",e),e===!1&&h$(t)}function u$(t,e){cn(e,(n,r)=>{Xv(t,n,r)})}function Xv(t,e,n){const r=new Ue("/.info/"+e),i=St(n);t.infoData_.updateSnapshot(r,i);const s=pp(t.infoSyncTree_,r,i);Ri(t.eventQueue_,r,s)}function MA(t){return t.nextWriteId_++}function c$(t,e,n,r,i){Zv(t,"set",{path:e.toString(),value:n,priority:r});const s=Jv(t),o=St(n,r),a=Bv(t.serverSyncTree_,e),l=PA(o,a,s),c=MA(t),h=IA(t.serverSyncTree_,e,l,c,!0);Yv(t.eventQueue_,h),t.server_.put(e.toString(),o.val(!0),(f,m)=>{const _=f==="ok";_||bn("set at "+e+" failed: "+f);const T=Gs(t.serverSyncTree_,c,!_);Ri(t.eventQueue_,e,T),Ka(t,i,f,m)});const d=jA(t,e);yp(t,d),Ri(t.eventQueue_,d,[])}function h$(t){Zv(t,"onDisconnectEvents");const e=Jv(t),n=of();L_(t.onDisconnect_,Le(),(i,s)=>{const o=Wj(i,s,t.serverSyncTree_,e);hl(n,i,o)});let r=[];L_(n,Le(),(i,s)=>{r=r.concat(pp(t.serverSyncTree_,i,s));const o=jA(t,i);yp(t,o)}),t.onDisconnect_=of(),Ri(t.eventQueue_,Le(),r)}function d$(t,e,n){t.server_.onDisconnectCancel(e.toString(),(r,i)=>{r==="ok"&&O_(t.onDisconnect_,e),Ka(t,n,r,i)})}function UI(t,e,n,r){const i=St(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),(s,o)=>{s==="ok"&&hl(t.onDisconnect_,e,i),Ka(t,r,s,o)})}function f$(t,e,n,r,i){const s=St(n,r);t.server_.onDisconnectPut(e.toString(),s.val(!0),(o,a)=>{o==="ok"&&hl(t.onDisconnect_,e,s),Ka(t,i,o,a)})}function p$(t,e,n,r){if(qd(n)){zt("onDisconnect().update() called with empty data.  Don't do anything."),Ka(t,r,"ok",void 0);return}t.server_.onDisconnectMerge(e.toString(),n,(i,s)=>{i==="ok"&&cn(n,(o,a)=>{const l=St(a);hl(t.onDisconnect_,yt(e,o),l)}),Ka(t,r,i,s)})}function g$(t,e,n){let r;me(e._path)===".info"?r=LI(t.infoSyncTree_,e,n):r=LI(t.serverSyncTree_,e,n),OA(t.eventQueue_,e._path,r)}function BI(t,e,n){let r;me(e._path)===".info"?r=j_(t.infoSyncTree_,e,n):r=j_(t.serverSyncTree_,e,n),OA(t.eventQueue_,e._path,r)}function m$(t){t.persistentConnection_&&t.persistentConnection_.interrupt(i$)}function Zv(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),zt(n,...e)}function Ka(t,e,n,r){e&&cl(()=>{if(n==="ok")e(null);else{const i=(n||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function VA(t,e,n){return Bv(t.serverSyncTree_,e,n)||ae.EMPTY_NODE}function ew(t,e=t.transactionQueueTree_){if(e||vp(t,e),dl(e)){const n=UA(t,e);H(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&_$(t,Bc(e),n)}else kA(e)&&mp(e,n=>{ew(t,n)})}function _$(t,e,n){const r=n.map(c=>c.currentWriteId),i=VA(t,e,r);let s=i;const o=i.hash();for(let c=0;c<n.length;c++){const h=n[c];H(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const d=Rn(e,h.path);s=s.updateChild(d,h.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;t.server_.put(l.toString(),a,c=>{Zv(t,"transaction put response",{path:l.toString(),status:c});let h=[];if(c==="ok"){const d=[];for(let f=0;f<n.length;f++)n[f].status=2,h=h.concat(Gs(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&d.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();vp(t,Gv(t.transactionQueueTree_,e)),ew(t,t.transactionQueueTree_),Ri(t.eventQueue_,e,h);for(let f=0;f<d.length;f++)cl(d[f])}else{if(c==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{bn("transaction at "+l.toString()+" failed: "+c);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=c}yp(t,e)}},o)}function yp(t,e){const n=FA(t,e),r=Bc(n),i=UA(t,n);return y$(t,i,r),r}function y$(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=Rn(n,l.path);let h=!1,d;if(H(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)h=!0,d=l.abortReason,i=i.concat(Gs(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=s$)h=!0,d="maxretry",i=i.concat(Gs(t.serverSyncTree_,l.currentWriteId,!0));else{const f=VA(t,l.path,o);l.currentInputSnapshot=f;const m=e[a].update(f.val());if(m!==void 0){_p("transaction failed: Data returned ",m,l.path);let _=St(m);typeof m=="object"&&m!=null&&Kr(m,".priority")||(_=_.updatePriority(f.getPriority()));const I=l.currentWriteId,v=Jv(t),y=PA(_,f,v);l.currentOutputSnapshotRaw=_,l.currentOutputSnapshotResolved=y,l.currentWriteId=MA(t),o.splice(o.indexOf(I),1),i=i.concat(IA(t.serverSyncTree_,l.path,y,l.currentWriteId,l.applyLocally)),i=i.concat(Gs(t.serverSyncTree_,I,!0))}else h=!0,d="nodata",i=i.concat(Gs(t.serverSyncTree_,l.currentWriteId,!0))}Ri(t.eventQueue_,n,i),i=[],h&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}vp(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)cl(r[a]);ew(t,t.transactionQueueTree_)}function FA(t,e){let n,r=t.transactionQueueTree_;for(n=me(e);n!==null&&dl(r)===void 0;)r=Gv(r,n),e=Ke(e),n=me(e);return r}function UA(t,e){const n=[];return BA(t,e,n),n.sort((r,i)=>r.order-i.order),n}function BA(t,e,n){const r=dl(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);mp(e,i=>{BA(t,i,n)})}function vp(t,e){const n=dl(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,AA(e,n.length>0?n:void 0)}mp(e,r=>{vp(t,r)})}function jA(t,e){const n=Bc(FA(t,e)),r=Gv(t.transactionQueueTree_,e);return qj(r,i=>{em(t,i)}),em(t,r),bA(r,i=>{em(t,i)}),n}function em(t,e){const n=dl(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(H(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(H(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Gs(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?AA(e,void 0):n.length=s+1,Ri(t.eventQueue_,Bc(e),i);for(let o=0;o<r.length;o++)cl(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v$(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function w$(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):bn(`Invalid query segment '${n}' in query '${t}'`)}return e}const jI=function(t,e){const n=E$(t),r=n.namespace;n.domain==="firebase.com"&&Ci(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Ci("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||k4();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new KP(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new Ue(n.pathString)}},E$=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let h=t.indexOf("/");h===-1&&(h=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(i=v$(t.substring(h,d)));const f=w$(t.substring(Math.min(t.length,d)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const m=e.slice(0,c);if(m.toLowerCase()==="localhost")n="localhost";else if(m.split(".").length<=2)n=m;else{const _=e.indexOf(".");r=e.substring(0,_).toLowerCase(),n=e.substring(_+1),s=r}"ns"in f&&(s=f.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Mt(this.snapshot.exportVal())}}class zA{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T${constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return H(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I${constructor(e,n){this._repo=e,this._path=n}cancel(){const e=new ii;return d$(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){lu("OnDisconnect.remove",this._path);const e=new ii;return UI(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){lu("OnDisconnect.set",this._path),z_("OnDisconnect.set",e,this._path,!1);const n=new ii;return UI(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}setWithPriority(e,n){lu("OnDisconnect.setWithPriority",this._path),z_("OnDisconnect.setWithPriority",e,this._path,!1),Zj("OnDisconnect.setWithPriority",n,!1);const r=new ii;return f$(this._repo,this._path,e,n,r.wrapCallback(()=>{})),r.promise}update(e){lu("OnDisconnect.update",this._path),Xj("OnDisconnect.update",e,this._path,!1);const n=new ii;return p$(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return _e(this._path)?null:Pv(this._path)}get ref(){return new Oi(this._repo,this._path)}get _queryIdentifier(){const e=II(this._queryParams),n=Iv(e);return n==="{}"?"default":n}get _queryObject(){return II(this._queryParams)}isEqual(e){if(e=Re(e),!(e instanceof tw))return!1;const n=this._repo===e._repo,r=Av(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+dB(this._path)}}class Oi extends tw{constructor(e,n){super(e,n,new xv,!1)}get parent(){const e=nA(this._path);return e===null?null:new Oi(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class gc{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Ue(e),r=pf(this.ref,e);return new gc(this._node.getChild(n),r,ut)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new gc(i,pf(this.ref,r),ut)))}hasChild(e){const n=new Ue(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function JW(t,e){return t=Re(t),t._checkNotDeleted("ref"),e!==void 0?pf(t._root,e):t._root}function pf(t,e){return t=Re(t),me(t._path)===null?e$("child","path",e,!1):DA("child","path",e,!1),new Oi(t._repo,yt(t._path,e))}function XW(t){return t=Re(t),new I$(t._repo,t._path)}function ZW(t,e){t=Re(t),lu("set",t._path),z_("set",e,t._path,!1);const n=new ii;return c$(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}class nw{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new $A("value",this,new gc(e.snapshotNode,new Oi(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new zA(this,e,n):null}matches(e){return e instanceof nw?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class rw{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new zA(this,e,n):null}createEvent(e,n){H(e.childName!=null,"Child events should have a childName.");const r=pf(new Oi(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new $A(e.type,this,new gc(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof rw?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function S$(t,e,n,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){const l=n,c=(h,d)=>{BI(t._repo,t,a),l(h,d)};c.userCallback=n.userCallback,c.context=n.context,n=c}const o=new T$(n,s||void 0),a=e==="value"?new nw(o):new rw(e,o);return g$(t._repo,t,a),()=>BI(t._repo,t,a)}function eH(t,e,n,r){return S$(t,"value",e,n,r)}Ij(Oi);kj(Oi);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C$="FIREBASE_DATABASE_EMULATOR_HOST",W_={};let R$=!1;function P$(t,e,n,r){t.repoInfo_=new KP(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function A$(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Ci("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),zt("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=jI(s,i),a=o.repoInfo,l,c;typeof process<"u"&&process.env&&(c=process.env[C$]),c?(l=!0,s=`http://${c}?ns=${a.namespace}`,o=jI(s,i),a=o.repoInfo):l=!o.repoInfo.secure;const h=i&&l?new Ia(Ia.OWNER):new B4(t.name,t.options,e);t$("Invalid Firebase Database URL",o),_e(o.path)||Ci("Database URL must point to the root of a Firebase Database (not including a child path).");const d=b$(a,t,h,new U4(t.name,n));return new N$(d,t)}function k$(t,e){const n=W_[e];(!n||n[t.key]!==t)&&Ci(`Database ${e}(${t.repoInfo_}) has already been deleted.`),m$(t),delete n[t.key]}function b$(t,e,n,r){let i=W_[e.name];i||(i={},W_[e.name]=i);let s=i[t.toURLString()];return s&&Ci("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new o$(t,R$,n,r),i[t.toURLString()]=s,s}class N${constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(a$(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Oi(this._repo,Le())),this._rootInternal}_delete(){return this._rootInternal!==null&&(k$(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Ci("Cannot call "+e+" on a deleted database.")}}function x$(t=xc(),e){const n=Cs(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=cv("database");r&&D$(n,...r)}return n}function D$(t,e,n,r={}){t=Re(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Ci("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Ci('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Ia(Ia.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:hv(r.mockUserToken,t.app.options.projectId);s=new Ia(o)}P$(i,e,n,s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O$(t){S4(Rs),lr(new Kn("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return A$(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),on(oI,aI,t),on(oI,aI,"esm2017")}mi.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};mi.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};O$();var $I=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var eo,WA;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,w){function C(){}C.prototype=w.prototype,S.D=w.prototype,S.prototype=new C,S.prototype.constructor=S,S.C=function(A,b,D){for(var P=Array(arguments.length-2),oe=2;oe<arguments.length;oe++)P[oe-2]=arguments[oe];return w.prototype[b].apply(A,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,w,C){C||(C=0);var A=Array(16);if(typeof w=="string")for(var b=0;16>b;++b)A[b]=w.charCodeAt(C++)|w.charCodeAt(C++)<<8|w.charCodeAt(C++)<<16|w.charCodeAt(C++)<<24;else for(b=0;16>b;++b)A[b]=w[C++]|w[C++]<<8|w[C++]<<16|w[C++]<<24;w=S.g[0],C=S.g[1],b=S.g[2];var D=S.g[3],P=w+(D^C&(b^D))+A[0]+3614090360&4294967295;w=C+(P<<7&4294967295|P>>>25),P=D+(b^w&(C^b))+A[1]+3905402710&4294967295,D=w+(P<<12&4294967295|P>>>20),P=b+(C^D&(w^C))+A[2]+606105819&4294967295,b=D+(P<<17&4294967295|P>>>15),P=C+(w^b&(D^w))+A[3]+3250441966&4294967295,C=b+(P<<22&4294967295|P>>>10),P=w+(D^C&(b^D))+A[4]+4118548399&4294967295,w=C+(P<<7&4294967295|P>>>25),P=D+(b^w&(C^b))+A[5]+1200080426&4294967295,D=w+(P<<12&4294967295|P>>>20),P=b+(C^D&(w^C))+A[6]+2821735955&4294967295,b=D+(P<<17&4294967295|P>>>15),P=C+(w^b&(D^w))+A[7]+4249261313&4294967295,C=b+(P<<22&4294967295|P>>>10),P=w+(D^C&(b^D))+A[8]+1770035416&4294967295,w=C+(P<<7&4294967295|P>>>25),P=D+(b^w&(C^b))+A[9]+2336552879&4294967295,D=w+(P<<12&4294967295|P>>>20),P=b+(C^D&(w^C))+A[10]+4294925233&4294967295,b=D+(P<<17&4294967295|P>>>15),P=C+(w^b&(D^w))+A[11]+2304563134&4294967295,C=b+(P<<22&4294967295|P>>>10),P=w+(D^C&(b^D))+A[12]+1804603682&4294967295,w=C+(P<<7&4294967295|P>>>25),P=D+(b^w&(C^b))+A[13]+4254626195&4294967295,D=w+(P<<12&4294967295|P>>>20),P=b+(C^D&(w^C))+A[14]+2792965006&4294967295,b=D+(P<<17&4294967295|P>>>15),P=C+(w^b&(D^w))+A[15]+1236535329&4294967295,C=b+(P<<22&4294967295|P>>>10),P=w+(b^D&(C^b))+A[1]+4129170786&4294967295,w=C+(P<<5&4294967295|P>>>27),P=D+(C^b&(w^C))+A[6]+3225465664&4294967295,D=w+(P<<9&4294967295|P>>>23),P=b+(w^C&(D^w))+A[11]+643717713&4294967295,b=D+(P<<14&4294967295|P>>>18),P=C+(D^w&(b^D))+A[0]+3921069994&4294967295,C=b+(P<<20&4294967295|P>>>12),P=w+(b^D&(C^b))+A[5]+3593408605&4294967295,w=C+(P<<5&4294967295|P>>>27),P=D+(C^b&(w^C))+A[10]+38016083&4294967295,D=w+(P<<9&4294967295|P>>>23),P=b+(w^C&(D^w))+A[15]+3634488961&4294967295,b=D+(P<<14&4294967295|P>>>18),P=C+(D^w&(b^D))+A[4]+3889429448&4294967295,C=b+(P<<20&4294967295|P>>>12),P=w+(b^D&(C^b))+A[9]+568446438&4294967295,w=C+(P<<5&4294967295|P>>>27),P=D+(C^b&(w^C))+A[14]+3275163606&4294967295,D=w+(P<<9&4294967295|P>>>23),P=b+(w^C&(D^w))+A[3]+4107603335&4294967295,b=D+(P<<14&4294967295|P>>>18),P=C+(D^w&(b^D))+A[8]+1163531501&4294967295,C=b+(P<<20&4294967295|P>>>12),P=w+(b^D&(C^b))+A[13]+2850285829&4294967295,w=C+(P<<5&4294967295|P>>>27),P=D+(C^b&(w^C))+A[2]+4243563512&4294967295,D=w+(P<<9&4294967295|P>>>23),P=b+(w^C&(D^w))+A[7]+1735328473&4294967295,b=D+(P<<14&4294967295|P>>>18),P=C+(D^w&(b^D))+A[12]+2368359562&4294967295,C=b+(P<<20&4294967295|P>>>12),P=w+(C^b^D)+A[5]+4294588738&4294967295,w=C+(P<<4&4294967295|P>>>28),P=D+(w^C^b)+A[8]+2272392833&4294967295,D=w+(P<<11&4294967295|P>>>21),P=b+(D^w^C)+A[11]+1839030562&4294967295,b=D+(P<<16&4294967295|P>>>16),P=C+(b^D^w)+A[14]+4259657740&4294967295,C=b+(P<<23&4294967295|P>>>9),P=w+(C^b^D)+A[1]+2763975236&4294967295,w=C+(P<<4&4294967295|P>>>28),P=D+(w^C^b)+A[4]+1272893353&4294967295,D=w+(P<<11&4294967295|P>>>21),P=b+(D^w^C)+A[7]+4139469664&4294967295,b=D+(P<<16&4294967295|P>>>16),P=C+(b^D^w)+A[10]+3200236656&4294967295,C=b+(P<<23&4294967295|P>>>9),P=w+(C^b^D)+A[13]+681279174&4294967295,w=C+(P<<4&4294967295|P>>>28),P=D+(w^C^b)+A[0]+3936430074&4294967295,D=w+(P<<11&4294967295|P>>>21),P=b+(D^w^C)+A[3]+3572445317&4294967295,b=D+(P<<16&4294967295|P>>>16),P=C+(b^D^w)+A[6]+76029189&4294967295,C=b+(P<<23&4294967295|P>>>9),P=w+(C^b^D)+A[9]+3654602809&4294967295,w=C+(P<<4&4294967295|P>>>28),P=D+(w^C^b)+A[12]+3873151461&4294967295,D=w+(P<<11&4294967295|P>>>21),P=b+(D^w^C)+A[15]+530742520&4294967295,b=D+(P<<16&4294967295|P>>>16),P=C+(b^D^w)+A[2]+3299628645&4294967295,C=b+(P<<23&4294967295|P>>>9),P=w+(b^(C|~D))+A[0]+4096336452&4294967295,w=C+(P<<6&4294967295|P>>>26),P=D+(C^(w|~b))+A[7]+1126891415&4294967295,D=w+(P<<10&4294967295|P>>>22),P=b+(w^(D|~C))+A[14]+2878612391&4294967295,b=D+(P<<15&4294967295|P>>>17),P=C+(D^(b|~w))+A[5]+4237533241&4294967295,C=b+(P<<21&4294967295|P>>>11),P=w+(b^(C|~D))+A[12]+1700485571&4294967295,w=C+(P<<6&4294967295|P>>>26),P=D+(C^(w|~b))+A[3]+2399980690&4294967295,D=w+(P<<10&4294967295|P>>>22),P=b+(w^(D|~C))+A[10]+4293915773&4294967295,b=D+(P<<15&4294967295|P>>>17),P=C+(D^(b|~w))+A[1]+2240044497&4294967295,C=b+(P<<21&4294967295|P>>>11),P=w+(b^(C|~D))+A[8]+1873313359&4294967295,w=C+(P<<6&4294967295|P>>>26),P=D+(C^(w|~b))+A[15]+4264355552&4294967295,D=w+(P<<10&4294967295|P>>>22),P=b+(w^(D|~C))+A[6]+2734768916&4294967295,b=D+(P<<15&4294967295|P>>>17),P=C+(D^(b|~w))+A[13]+1309151649&4294967295,C=b+(P<<21&4294967295|P>>>11),P=w+(b^(C|~D))+A[4]+4149444226&4294967295,w=C+(P<<6&4294967295|P>>>26),P=D+(C^(w|~b))+A[11]+3174756917&4294967295,D=w+(P<<10&4294967295|P>>>22),P=b+(w^(D|~C))+A[2]+718787259&4294967295,b=D+(P<<15&4294967295|P>>>17),P=C+(D^(b|~w))+A[9]+3951481745&4294967295,S.g[0]=S.g[0]+w&4294967295,S.g[1]=S.g[1]+(b+(P<<21&4294967295|P>>>11))&4294967295,S.g[2]=S.g[2]+b&4294967295,S.g[3]=S.g[3]+D&4294967295}r.prototype.u=function(S,w){w===void 0&&(w=S.length);for(var C=w-this.blockSize,A=this.B,b=this.h,D=0;D<w;){if(b==0)for(;D<=C;)i(this,S,D),D+=this.blockSize;if(typeof S=="string"){for(;D<w;)if(A[b++]=S.charCodeAt(D++),b==this.blockSize){i(this,A),b=0;break}}else for(;D<w;)if(A[b++]=S[D++],b==this.blockSize){i(this,A),b=0;break}}this.h=b,this.o+=w},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var w=1;w<S.length-8;++w)S[w]=0;var C=8*this.o;for(w=S.length-8;w<S.length;++w)S[w]=C&255,C/=256;for(this.u(S),S=Array(16),w=C=0;4>w;++w)for(var A=0;32>A;A+=8)S[C++]=this.g[w]>>>A&255;return S};function s(S,w){var C=a;return Object.prototype.hasOwnProperty.call(C,S)?C[S]:C[S]=w(S)}function o(S,w){this.h=w;for(var C=[],A=!0,b=S.length-1;0<=b;b--){var D=S[b]|0;A&&D==w||(C[b]=D,A=!1)}this.g=C}var a={};function l(S){return-128<=S&&128>S?s(S,function(w){return new o([w|0],0>w?-1:0)}):new o([S|0],0>S?-1:0)}function c(S){if(isNaN(S)||!isFinite(S))return d;if(0>S)return I(c(-S));for(var w=[],C=1,A=0;S>=C;A++)w[A]=S/C|0,C*=4294967296;return new o(w,0)}function h(S,w){if(S.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(S.charAt(0)=="-")return I(h(S.substring(1),w));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=c(Math.pow(w,8)),A=d,b=0;b<S.length;b+=8){var D=Math.min(8,S.length-b),P=parseInt(S.substring(b,b+D),w);8>D?(D=c(Math.pow(w,D)),A=A.j(D).add(c(P))):(A=A.j(C),A=A.add(c(P)))}return A}var d=l(0),f=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(T(this))return-I(this).m();for(var S=0,w=1,C=0;C<this.g.length;C++){var A=this.i(C);S+=(0<=A?A:4294967296+A)*w,w*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(_(this))return"0";if(T(this))return"-"+I(this).toString(S);for(var w=c(Math.pow(S,6)),C=this,A="";;){var b=N(C,w).g;C=v(C,b.j(w));var D=((0<C.g.length?C.g[0]:C.h)>>>0).toString(S);if(C=b,_(C))return D+A;for(;6>D.length;)D="0"+D;A=D+A}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function _(S){if(S.h!=0)return!1;for(var w=0;w<S.g.length;w++)if(S.g[w]!=0)return!1;return!0}function T(S){return S.h==-1}t.l=function(S){return S=v(this,S),T(S)?-1:_(S)?0:1};function I(S){for(var w=S.g.length,C=[],A=0;A<w;A++)C[A]=~S.g[A];return new o(C,~S.h).add(f)}t.abs=function(){return T(this)?I(this):this},t.add=function(S){for(var w=Math.max(this.g.length,S.g.length),C=[],A=0,b=0;b<=w;b++){var D=A+(this.i(b)&65535)+(S.i(b)&65535),P=(D>>>16)+(this.i(b)>>>16)+(S.i(b)>>>16);A=P>>>16,D&=65535,P&=65535,C[b]=P<<16|D}return new o(C,C[C.length-1]&-2147483648?-1:0)};function v(S,w){return S.add(I(w))}t.j=function(S){if(_(this)||_(S))return d;if(T(this))return T(S)?I(this).j(I(S)):I(I(this).j(S));if(T(S))return I(this.j(I(S)));if(0>this.l(m)&&0>S.l(m))return c(this.m()*S.m());for(var w=this.g.length+S.g.length,C=[],A=0;A<2*w;A++)C[A]=0;for(A=0;A<this.g.length;A++)for(var b=0;b<S.g.length;b++){var D=this.i(A)>>>16,P=this.i(A)&65535,oe=S.i(b)>>>16,Be=S.i(b)&65535;C[2*A+2*b]+=P*Be,y(C,2*A+2*b),C[2*A+2*b+1]+=D*Be,y(C,2*A+2*b+1),C[2*A+2*b+1]+=P*oe,y(C,2*A+2*b+1),C[2*A+2*b+2]+=D*oe,y(C,2*A+2*b+2)}for(A=0;A<w;A++)C[A]=C[2*A+1]<<16|C[2*A];for(A=w;A<2*w;A++)C[A]=0;return new o(C,0)};function y(S,w){for(;(S[w]&65535)!=S[w];)S[w+1]+=S[w]>>>16,S[w]&=65535,w++}function R(S,w){this.g=S,this.h=w}function N(S,w){if(_(w))throw Error("division by zero");if(_(S))return new R(d,d);if(T(S))return w=N(I(S),w),new R(I(w.g),I(w.h));if(T(w))return w=N(S,I(w)),new R(I(w.g),w.h);if(30<S.g.length){if(T(S)||T(w))throw Error("slowDivide_ only works with positive integers.");for(var C=f,A=w;0>=A.l(S);)C=M(C),A=M(A);var b=k(C,1),D=k(A,1);for(A=k(A,2),C=k(C,2);!_(A);){var P=D.add(A);0>=P.l(S)&&(b=b.add(C),D=P),A=k(A,1),C=k(C,1)}return w=v(S,b.j(w)),new R(b,w)}for(b=d;0<=S.l(w);){for(C=Math.max(1,Math.floor(S.m()/w.m())),A=Math.ceil(Math.log(C)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),D=c(C),P=D.j(w);T(P)||0<P.l(S);)C-=A,D=c(C),P=D.j(w);_(D)&&(D=f),b=b.add(D),S=v(S,P)}return new R(b,S)}t.A=function(S){return N(this,S).h},t.and=function(S){for(var w=Math.max(this.g.length,S.g.length),C=[],A=0;A<w;A++)C[A]=this.i(A)&S.i(A);return new o(C,this.h&S.h)},t.or=function(S){for(var w=Math.max(this.g.length,S.g.length),C=[],A=0;A<w;A++)C[A]=this.i(A)|S.i(A);return new o(C,this.h|S.h)},t.xor=function(S){for(var w=Math.max(this.g.length,S.g.length),C=[],A=0;A<w;A++)C[A]=this.i(A)^S.i(A);return new o(C,this.h^S.h)};function M(S){for(var w=S.g.length+1,C=[],A=0;A<w;A++)C[A]=S.i(A)<<1|S.i(A-1)>>>31;return new o(C,S.h)}function k(S,w){var C=w>>5;w%=32;for(var A=S.g.length-C,b=[],D=0;D<A;D++)b[D]=0<w?S.i(D+C)>>>w|S.i(D+C+1)<<32-w:S.i(D+C);return new o(b,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,WA=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,eo=o}).apply(typeof $I<"u"?$I:typeof self<"u"?self:typeof window<"u"?window:{});var Mh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var HA,qA,uu,KA,ad,H_,GA,QA,YA;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,g){return u==Array.prototype||u==Object.prototype||(u[p]=g.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Mh=="object"&&Mh];for(var p=0;p<u.length;++p){var g=u[p];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function i(u,p){if(p)e:{var g=r;u=u.split(".");for(var E=0;E<u.length-1;E++){var L=u[E];if(!(L in g))break e;g=g[L]}u=u[u.length-1],E=g[u],p=p(E),p!=E&&p!=null&&e(g,u,{configurable:!0,writable:!0,value:p})}}function s(u,p){u instanceof String&&(u+="");var g=0,E=!1,L={next:function(){if(!E&&g<u.length){var U=g++;return{value:p(U,u[U]),done:!1}}return E=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(u){return u||function(){return s(this,function(p,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function c(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function h(u,p,g){return u.call.apply(u.bind,arguments)}function d(u,p,g){if(!u)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,E),u.apply(p,L)}}return function(){return u.apply(p,arguments)}}function f(u,p,g){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,f.apply(null,arguments)}function m(u,p){var g=Array.prototype.slice.call(arguments,1);return function(){var E=g.slice();return E.push.apply(E,arguments),u.apply(this,E)}}function _(u,p){function g(){}g.prototype=p.prototype,u.aa=p.prototype,u.prototype=new g,u.prototype.constructor=u,u.Qb=function(E,L,U){for(var q=Array(arguments.length-2),We=2;We<arguments.length;We++)q[We-2]=arguments[We];return p.prototype[L].apply(E,q)}}function T(u){const p=u.length;if(0<p){const g=Array(p);for(let E=0;E<p;E++)g[E]=u[E];return g}return[]}function I(u,p){for(let g=1;g<arguments.length;g++){const E=arguments[g];if(l(E)){const L=u.length||0,U=E.length||0;u.length=L+U;for(let q=0;q<U;q++)u[L+q]=E[q]}else u.push(E)}}class v{constructor(p,g){this.i=p,this.j=g,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function y(u){return/^[\s\xa0]*$/.test(u)}function R(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function N(u){return N[" "](u),u}N[" "]=function(){};var M=R().indexOf("Gecko")!=-1&&!(R().toLowerCase().indexOf("webkit")!=-1&&R().indexOf("Edge")==-1)&&!(R().indexOf("Trident")!=-1||R().indexOf("MSIE")!=-1)&&R().indexOf("Edge")==-1;function k(u,p,g){for(const E in u)p.call(g,u[E],E,u)}function S(u,p){for(const g in u)p.call(void 0,u[g],g,u)}function w(u){const p={};for(const g in u)p[g]=u[g];return p}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(u,p){let g,E;for(let L=1;L<arguments.length;L++){E=arguments[L];for(g in E)u[g]=E[g];for(let U=0;U<C.length;U++)g=C[U],Object.prototype.hasOwnProperty.call(E,g)&&(u[g]=E[g])}}function b(u){var p=1;u=u.split(":");const g=[];for(;0<p&&u.length;)g.push(u.shift()),p--;return u.length&&g.push(u.join(":")),g}function D(u){a.setTimeout(()=>{throw u},0)}function P(){var u=J;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class oe{constructor(){this.h=this.g=null}add(p,g){const E=Be.get();E.set(p,g),this.h?this.h.next=E:this.g=E,this.h=E}}var Be=new v(()=>new Me,u=>u.reset());class Me{constructor(){this.next=this.g=this.h=null}set(p,g){this.h=p,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let de,$=!1,J=new oe,se=()=>{const u=a.Promise.resolve(void 0);de=()=>{u.then(Ee)}};var Ee=()=>{for(var u;u=P();){try{u.h.call(u.g)}catch(g){D(g)}var p=Be;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}$=!1};function Pe(){this.s=this.s,this.C=this.C}Pe.prototype.s=!1,Pe.prototype.ma=function(){this.s||(this.s=!0,this.N())},Pe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ze(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}ze.prototype.h=function(){this.defaultPrevented=!0};var At=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const g=()=>{};a.addEventListener("test",g,p),a.removeEventListener("test",g,p)}catch{}return u}();function Ft(u,p){if(ze.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var g=this.type=u.type,E=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(M){e:{try{N(p.nodeName);var L=!0;break e}catch{}L=!1}L||(p=null)}}else g=="mouseover"?p=u.fromElement:g=="mouseout"&&(p=u.toElement);this.relatedTarget=p,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Ut[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ft.aa.h.call(this)}}_(Ft,ze);var Ut={2:"touch",3:"pen",4:"mouse"};Ft.prototype.h=function(){Ft.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Yn="closure_listenable_"+(1e6*Math.random()|0),_l=0;function qp(u,p,g,E,L){this.listener=u,this.proxy=null,this.src=p,this.type=g,this.capture=!!E,this.ha=L,this.key=++_l,this.da=this.fa=!1}function Oo(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Lo(u){this.src=u,this.g={},this.h=0}Lo.prototype.add=function(u,p,g,E,L){var U=u.toString();u=this.g[U],u||(u=this.g[U]=[],this.h++);var q=Pr(u,p,E,L);return-1<q?(p=u[q],g||(p.fa=!1)):(p=new qp(p,this.src,U,!!E,L),p.fa=g,u.push(p)),p};function xt(u,p){var g=p.type;if(g in u.g){var E=u.g[g],L=Array.prototype.indexOf.call(E,p,void 0),U;(U=0<=L)&&Array.prototype.splice.call(E,L,1),U&&(Oo(p),u.g[g].length==0&&(delete u.g[g],u.h--))}}function Pr(u,p,g,E){for(var L=0;L<u.length;++L){var U=u[L];if(!U.da&&U.listener==p&&U.capture==!!g&&U.ha==E)return L}return-1}var Mo="closure_lm_"+(1e6*Math.random()|0),yl={};function Ar(u,p,g,E,L){if(E&&E.once)return vl(u,p,g,E,L);if(Array.isArray(p)){for(var U=0;U<p.length;U++)Ar(u,p[U],g,E,L);return null}return g=Vo(g),u&&u[Yn]?u.K(p,g,c(E)?!!E.capture:!!E,L):Yc(u,p,g,!1,E,L)}function Yc(u,p,g,E,L,U){if(!p)throw Error("Invalid event type");var q=c(L)?!!L.capture:!!L,We=Qr(u);if(We||(u[Mo]=We=new Lo(u)),g=We.add(p,g,E,q,U),g.proxy)return g;if(E=Kp(),g.proxy=E,E.src=u,E.listener=g,u.addEventListener)At||(L=q),L===void 0&&(L=!1),u.addEventListener(p.toString(),E,L);else if(u.attachEvent)u.attachEvent(Xc(p.toString()),E);else if(u.addListener&&u.removeListener)u.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return g}function Kp(){function u(g){return p.call(u.src,u.listener,g)}const p=Gp;return u}function vl(u,p,g,E,L){if(Array.isArray(p)){for(var U=0;U<p.length;U++)vl(u,p[U],g,E,L);return null}return g=Vo(g),u&&u[Yn]?u.L(p,g,c(E)?!!E.capture:!!E,L):Yc(u,p,g,!0,E,L)}function Jc(u,p,g,E,L){if(Array.isArray(p))for(var U=0;U<p.length;U++)Jc(u,p[U],g,E,L);else E=c(E)?!!E.capture:!!E,g=Vo(g),u&&u[Yn]?(u=u.i,p=String(p).toString(),p in u.g&&(U=u.g[p],g=Pr(U,g,E,L),-1<g&&(Oo(U[g]),Array.prototype.splice.call(U,g,1),U.length==0&&(delete u.g[p],u.h--)))):u&&(u=Qr(u))&&(p=u.g[p.toString()],u=-1,p&&(u=Pr(p,g,E,L)),(g=-1<u?p[u]:null)&&wl(g))}function wl(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[Yn])xt(p.i,u);else{var g=u.type,E=u.proxy;p.removeEventListener?p.removeEventListener(g,E,u.capture):p.detachEvent?p.detachEvent(Xc(g),E):p.addListener&&p.removeListener&&p.removeListener(E),(g=Qr(p))?(xt(g,u),g.h==0&&(g.src=null,p[Mo]=null)):Oo(u)}}}function Xc(u){return u in yl?yl[u]:yl[u]="on"+u}function Gp(u,p){if(u.da)u=!0;else{p=new Ft(p,this);var g=u.listener,E=u.ha||u.src;u.fa&&wl(u),u=g.call(E,p)}return u}function Qr(u){return u=u[Mo],u instanceof Lo?u:null}var Yr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Vo(u){return typeof u=="function"?u:(u[Yr]||(u[Yr]=function(p){return u.handleEvent(p)}),u[Yr])}function vt(){Pe.call(this),this.i=new Lo(this),this.M=this,this.F=null}_(vt,Pe),vt.prototype[Yn]=!0,vt.prototype.removeEventListener=function(u,p,g,E){Jc(this,u,p,g,E)};function rt(u,p){var g,E=u.F;if(E)for(g=[];E;E=E.F)g.push(E);if(u=u.M,E=p.type||p,typeof p=="string")p=new ze(p,u);else if(p instanceof ze)p.target=p.target||u;else{var L=p;p=new ze(E,u),A(p,L)}if(L=!0,g)for(var U=g.length-1;0<=U;U--){var q=p.g=g[U];L=vn(q,E,!0,p)&&L}if(q=p.g=u,L=vn(q,E,!0,p)&&L,L=vn(q,E,!1,p)&&L,g)for(U=0;U<g.length;U++)q=p.g=g[U],L=vn(q,E,!1,p)&&L}vt.prototype.N=function(){if(vt.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var g=u.g[p],E=0;E<g.length;E++)Oo(g[E]);delete u.g[p],u.h--}}this.F=null},vt.prototype.K=function(u,p,g,E){return this.i.add(String(u),p,!1,g,E)},vt.prototype.L=function(u,p,g,E){return this.i.add(String(u),p,!0,g,E)};function vn(u,p,g,E){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var L=!0,U=0;U<p.length;++U){var q=p[U];if(q&&!q.da&&q.capture==g){var We=q.listener,Bt=q.ha||q.src;q.fa&&xt(u.i,q),L=We.call(Bt,E)!==!1&&L}}return L&&!E.defaultPrevented}function El(u,p,g){if(typeof u=="function")g&&(u=f(u,g));else if(u&&typeof u.handleEvent=="function")u=f(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(u,p||0)}function As(u){u.g=El(()=>{u.g=null,u.i&&(u.i=!1,As(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class Qp extends Pe{constructor(p,g){super(),this.m=p,this.l=g,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:As(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wn(u){Pe.call(this),this.h=u,this.g={}}_(wn,Pe);var Tl=[];function Il(u){k(u.g,function(p,g){this.g.hasOwnProperty(g)&&wl(p)},u),u.g={}}wn.prototype.N=function(){wn.aa.N.call(this),Il(this)},wn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Fo=a.JSON.stringify,Yp=a.JSON.parse,Zc=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Li(){}Li.prototype.h=null;function Sl(u){return u.h||(u.h=u.i())}function Uo(){}var kr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ks(){ze.call(this,"d")}_(ks,ze);function Cl(){ze.call(this,"c")}_(Cl,ze);var br={},eh=null;function bs(){return eh=eh||new vt}br.La="serverreachability";function Rl(u){ze.call(this,br.La,u)}_(Rl,ze);function Nr(u){const p=bs();rt(p,new Rl(p))}br.STAT_EVENT="statevent";function th(u,p){ze.call(this,br.STAT_EVENT,u),this.stat=p}_(th,ze);function x(u){const p=bs();rt(p,new th(p,u))}br.Ma="timingevent";function O(u,p){ze.call(this,br.Ma,u),this.size=p}_(O,ze);function V(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},p)}function B(){this.g=!0}B.prototype.xa=function(){this.g=!1};function Q(u,p,g,E,L,U){u.info(function(){if(u.g)if(U)for(var q="",We=U.split("&"),Bt=0;Bt<We.length;Bt++){var xe=We[Bt].split("=");if(1<xe.length){var Yt=xe[0];xe=xe[1];var Jt=Yt.split("_");q=2<=Jt.length&&Jt[1]=="type"?q+(Yt+"="+xe+"&"):q+(Yt+"=redacted&")}}else q=null;else q=U;return"XMLHTTP REQ ("+E+") [attempt "+L+"]: "+p+`
`+g+`
`+q})}function te(u,p,g,E,L,U,q){u.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+L+"]: "+p+`
`+g+`
`+U+" "+q})}function ne(u,p,g,E){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+ue(u,g)+(E?" "+E:"")})}function K(u,p){u.info(function(){return"TIMEOUT: "+p})}B.prototype.info=function(){};function ue(u,p){if(!u.g)return p;if(!p)return null;try{var g=JSON.parse(p);if(g){for(u=0;u<g.length;u++)if(Array.isArray(g[u])){var E=g[u];if(!(2>E.length)){var L=E[1];if(Array.isArray(L)&&!(1>L.length)){var U=L[0];if(U!="noop"&&U!="stop"&&U!="close")for(var q=1;q<L.length;q++)L[q]=""}}}}return Fo(g)}catch{return p}}var X={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ce={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ne;function Te(){}_(Te,Li),Te.prototype.g=function(){return new XMLHttpRequest},Te.prototype.i=function(){return{}},Ne=new Te;function Ie(u,p,g,E){this.j=u,this.i=p,this.l=g,this.R=E||1,this.U=new wn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ke}function ke(){this.i=null,this.g="",this.h=!1}var wt={},it={};function Jr(u,p,g){u.L=1,u.v=ih(Zr(p)),u.m=g,u.P=!0,ur(u,null)}function ur(u,p){u.F=Date.now(),cr(u),u.A=Zr(u.v);var g=u.A,E=u.R;Array.isArray(E)||(E=[String(E)]),cE(g.i,"t",E),u.C=0,g=u.j.J,u.h=new ke,u.g=AE(u.j,g?p:null,!u.m),0<u.O&&(u.M=new Qp(f(u.Y,u,u.g),u.O)),p=u.U,g=u.g,E=u.ca;var L="readystatechange";Array.isArray(L)||(L&&(Tl[0]=L.toString()),L=Tl);for(var U=0;U<L.length;U++){var q=Ar(g,L[U],E||p.handleEvent,!1,p.h||p);if(!q)break;p.g[q.key]=q}p=u.H?w(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),Nr(),Q(u.i,u.u,u.A,u.l,u.R,u.m)}Ie.prototype.ca=function(u){u=u.target;const p=this.M;p&&ei(u)==3?p.j():this.Y(u)},Ie.prototype.Y=function(u){try{if(u==this.g)e:{const Jt=ei(this.g);var p=this.g.Ba();const zo=this.g.Z();if(!(3>Jt)&&(Jt!=3||this.g&&(this.h.h||this.g.oa()||_E(this.g)))){this.J||Jt!=4||p==7||(p==8||0>=zo?Nr(3):Nr(2)),Vi(this);var g=this.g.Z();this.X=g;t:if(Xr(this)){var E=_E(this.g);u="";var L=E.length,U=ei(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Jn(this),xr(this);var q="";break t}this.h.i=new a.TextDecoder}for(p=0;p<L;p++)this.h.h=!0,u+=this.h.i.decode(E[p],{stream:!(U&&p==L-1)});E.length=0,this.h.g+=u,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=g==200,te(this.i,this.u,this.A,this.l,this.R,Jt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var We,Bt=this.g;if((We=Bt.g?Bt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(We)){var xe=We;break t}}xe=null}if(g=xe)ne(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,fe(this,g);else{this.o=!1,this.s=3,x(12),Jn(this),xr(this);break e}}if(this.P){g=!0;let hr;for(;!this.J&&this.C<q.length;)if(hr=Mi(this,q),hr==it){Jt==4&&(this.s=4,x(14),g=!1),ne(this.i,this.l,null,"[Incomplete Response]");break}else if(hr==wt){this.s=4,x(15),ne(this.i,this.l,q,"[Invalid Chunk]"),g=!1;break}else ne(this.i,this.l,hr,null),fe(this,hr);if(Xr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Jt!=4||q.length!=0||this.h.h||(this.s=1,x(16),g=!1),this.o=this.o&&g,!g)ne(this.i,this.l,q,"[Invalid Chunked Response]"),Jn(this),xr(this);else if(0<q.length&&!this.W){this.W=!0;var Yt=this.j;Yt.g==this&&Yt.ba&&!Yt.M&&(Yt.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),eg(Yt),Yt.M=!0,x(11))}}else ne(this.i,this.l,q,null),fe(this,q);Jt==4&&Jn(this),this.o&&!this.J&&(Jt==4?SE(this.j,this):(this.o=!1,cr(this)))}else TN(this.g),g==400&&0<q.indexOf("Unknown SID")?(this.s=3,x(12)):(this.s=0,x(13)),Jn(this),xr(this)}}}catch{}finally{}};function Xr(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Mi(u,p){var g=u.C,E=p.indexOf(`
`,g);return E==-1?it:(g=Number(p.substring(g,E)),isNaN(g)?wt:(E+=1,E+g>p.length?it:(p=p.slice(E,E+g),u.C=E+g,p)))}Ie.prototype.cancel=function(){this.J=!0,Jn(this)};function cr(u){u.S=Date.now()+u.I,xn(u,u.I)}function xn(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=V(f(u.ba,u),p)}function Vi(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Ie.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(K(this.i,this.A),this.L!=2&&(Nr(),x(17)),Jn(this),this.s=2,xr(this)):xn(this,this.S-u)};function xr(u){u.j.G==0||u.J||SE(u.j,u)}function Jn(u){Vi(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,Il(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function fe(u,p){try{var g=u.j;if(g.G!=0&&(g.g==u||Bo(g.h,u))){if(!u.K&&Bo(g.h,u)&&g.G==3){try{var E=g.Da.g.parse(p)}catch{E=null}if(Array.isArray(E)&&E.length==3){var L=E;if(L[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<u.F)uh(g),ah(g);else break e;Zp(g),x(18)}}else g.za=L[1],0<g.za-g.T&&37500>L[2]&&g.F&&g.v==0&&!g.C&&(g.C=V(f(g.Za,g),6e3));if(1>=Xn(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else xs(g,11)}else if((u.K||g.g==u)&&uh(g),!y(p))for(L=g.Da.g.parse(p),p=0;p<L.length;p++){let xe=L[p];if(g.T=xe[0],xe=xe[1],g.G==2)if(xe[0]=="c"){g.K=xe[1],g.ia=xe[2];const Yt=xe[3];Yt!=null&&(g.la=Yt,g.j.info("VER="+g.la));const Jt=xe[4];Jt!=null&&(g.Aa=Jt,g.j.info("SVER="+g.Aa));const zo=xe[5];zo!=null&&typeof zo=="number"&&0<zo&&(E=1.5*zo,g.L=E,g.j.info("backChannelRequestTimeoutMs_="+E)),E=g;const hr=u.g;if(hr){const hh=hr.g?hr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(hh){var U=E.h;U.g||hh.indexOf("spdy")==-1&&hh.indexOf("quic")==-1&&hh.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(Pl(U,U.h),U.h=null))}if(E.D){const tg=hr.g?hr.g.getResponseHeader("X-HTTP-Session-Id"):null;tg&&(E.ya=tg,Xe(E.I,E.D,tg))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-u.F,g.j.info("Handshake RTT: "+g.R+"ms")),E=g;var q=u;if(E.qa=PE(E,E.J?E.ia:null,E.W),q.K){nE(E.h,q);var We=q,Bt=E.L;Bt&&(We.I=Bt),We.B&&(Vi(We),cr(We)),E.g=q}else TE(E);0<g.i.length&&lh(g)}else xe[0]!="stop"&&xe[0]!="close"||xs(g,7);else g.G==3&&(xe[0]=="stop"||xe[0]=="close"?xe[0]=="stop"?xs(g,7):Xp(g):xe[0]!="noop"&&g.l&&g.l.ta(xe),g.v=0)}}Nr(4)}catch{}}var st=class{constructor(u,p){this.g=u,this.map=p}};function Qt(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ve(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Xn(u){return u.h?1:u.g?u.g.size:0}function Bo(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function Pl(u,p){u.g?u.g.add(p):u.h=p}function nE(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}Qt.prototype.cancel=function(){if(this.i=rE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function rE(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const g of u.g.values())p=p.concat(g.D);return p}return T(u.i)}function aN(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var p=[],g=u.length,E=0;E<g;E++)p.push(u[E]);return p}p=[],g=0;for(E in u)p[g++]=u[E];return p}function lN(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var p=[];u=u.length;for(var g=0;g<u;g++)p.push(g);return p}p=[],g=0;for(const E in u)p[g++]=E;return p}}}function iE(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var g=lN(u),E=aN(u),L=E.length,U=0;U<L;U++)p.call(void 0,E[U],g&&g[U],u)}var sE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function uN(u,p){if(u){u=u.split("&");for(var g=0;g<u.length;g++){var E=u[g].indexOf("="),L=null;if(0<=E){var U=u[g].substring(0,E);L=u[g].substring(E+1)}else U=u[g];p(U,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Ns(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Ns){this.h=u.h,nh(this,u.j),this.o=u.o,this.g=u.g,rh(this,u.s),this.l=u.l;var p=u.i,g=new bl;g.i=p.i,p.g&&(g.g=new Map(p.g),g.h=p.h),oE(this,g),this.m=u.m}else u&&(p=String(u).match(sE))?(this.h=!1,nh(this,p[1]||"",!0),this.o=Al(p[2]||""),this.g=Al(p[3]||"",!0),rh(this,p[4]),this.l=Al(p[5]||"",!0),oE(this,p[6]||"",!0),this.m=Al(p[7]||"")):(this.h=!1,this.i=new bl(null,this.h))}Ns.prototype.toString=function(){var u=[],p=this.j;p&&u.push(kl(p,aE,!0),":");var g=this.g;return(g||p=="file")&&(u.push("//"),(p=this.o)&&u.push(kl(p,aE,!0),"@"),u.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&u.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(kl(g,g.charAt(0)=="/"?dN:hN,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",kl(g,pN)),u.join("")};function Zr(u){return new Ns(u)}function nh(u,p,g){u.j=g?Al(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function rh(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function oE(u,p,g){p instanceof bl?(u.i=p,gN(u.i,u.h)):(g||(p=kl(p,fN)),u.i=new bl(p,u.h))}function Xe(u,p,g){u.i.set(p,g)}function ih(u){return Xe(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Al(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function kl(u,p,g){return typeof u=="string"?(u=encodeURI(u).replace(p,cN),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function cN(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var aE=/[#\/\?@]/g,hN=/[#\?:]/g,dN=/[#\?]/g,fN=/[#\?@]/g,pN=/#/g;function bl(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function Fi(u){u.g||(u.g=new Map,u.h=0,u.i&&uN(u.i,function(p,g){u.add(decodeURIComponent(p.replace(/\+/g," ")),g)}))}t=bl.prototype,t.add=function(u,p){Fi(this),this.i=null,u=jo(this,u);var g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(p),this.h+=1,this};function lE(u,p){Fi(u),p=jo(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function uE(u,p){return Fi(u),p=jo(u,p),u.g.has(p)}t.forEach=function(u,p){Fi(this),this.g.forEach(function(g,E){g.forEach(function(L){u.call(p,L,E,this)},this)},this)},t.na=function(){Fi(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),g=[];for(let E=0;E<p.length;E++){const L=u[E];for(let U=0;U<L.length;U++)g.push(p[E])}return g},t.V=function(u){Fi(this);let p=[];if(typeof u=="string")uE(this,u)&&(p=p.concat(this.g.get(jo(this,u))));else{u=Array.from(this.g.values());for(let g=0;g<u.length;g++)p=p.concat(u[g])}return p},t.set=function(u,p){return Fi(this),this.i=null,u=jo(this,u),uE(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},t.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function cE(u,p,g){lE(u,p),0<g.length&&(u.i=null,u.g.set(jo(u,p),T(g)),u.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var g=0;g<p.length;g++){var E=p[g];const U=encodeURIComponent(String(E)),q=this.V(E);for(E=0;E<q.length;E++){var L=U;q[E]!==""&&(L+="="+encodeURIComponent(String(q[E]))),u.push(L)}}return this.i=u.join("&")};function jo(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function gN(u,p){p&&!u.j&&(Fi(u),u.i=null,u.g.forEach(function(g,E){var L=E.toLowerCase();E!=L&&(lE(this,E),cE(this,L,g))},u)),u.j=p}function mN(u,p){const g=new B;if(a.Image){const E=new Image;E.onload=m(Ui,g,"TestLoadImage: loaded",!0,p,E),E.onerror=m(Ui,g,"TestLoadImage: error",!1,p,E),E.onabort=m(Ui,g,"TestLoadImage: abort",!1,p,E),E.ontimeout=m(Ui,g,"TestLoadImage: timeout",!1,p,E),a.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=u}else p(!1)}function _N(u,p){const g=new B,E=new AbortController,L=setTimeout(()=>{E.abort(),Ui(g,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:E.signal}).then(U=>{clearTimeout(L),U.ok?Ui(g,"TestPingServer: ok",!0,p):Ui(g,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(L),Ui(g,"TestPingServer: error",!1,p)})}function Ui(u,p,g,E,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),E(g)}catch{}}function yN(){this.g=new Zc}function vN(u,p,g){const E=g||"";try{iE(u,function(L,U){let q=L;c(L)&&(q=Fo(L)),p.push(E+U+"="+encodeURIComponent(q))})}catch(L){throw p.push(E+"type="+encodeURIComponent("_badmap")),L}}function Nl(u){this.l=u.Ub||null,this.j=u.eb||!1}_(Nl,Li),Nl.prototype.g=function(){return new sh(this.l,this.j)},Nl.prototype.i=function(u){return function(){return u}}({});function sh(u,p){vt.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(sh,vt),t=sh.prototype,t.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,Dl(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,xl(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Dl(this)),this.g&&(this.readyState=3,Dl(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;hE(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function hE(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?xl(this):Dl(this),this.readyState==3&&hE(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,xl(this))},t.Qa=function(u){this.g&&(this.response=u,xl(this))},t.ga=function(){this.g&&xl(this)};function xl(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Dl(u)}t.setRequestHeader=function(u,p){this.u.append(u,p)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var g=p.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=p.next();return u.join(`\r
`)};function Dl(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(sh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function dE(u){let p="";return k(u,function(g,E){p+=E,p+=":",p+=g,p+=`\r
`}),p}function Jp(u,p,g){e:{for(E in g){var E=!1;break e}E=!0}E||(g=dE(g),typeof u=="string"?g!=null&&encodeURIComponent(String(g)):Xe(u,p,g))}function pt(u){vt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(pt,vt);var wN=/^https?$/i,EN=["POST","PUT"];t=pt.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,p,g,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ne.g(),this.v=this.o?Sl(this.o):Sl(Ne),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(U){fE(this,U);return}if(u=g||"",g=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var L in E)g.set(L,E[L]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const U of E.keys())g.set(U,E.get(U));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(g.keys()).find(U=>U.toLowerCase()=="content-type"),L=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(EN,p,void 0))||E||L||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,q]of g)this.g.setRequestHeader(U,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{mE(this),this.u=!0,this.g.send(u),this.u=!1}catch(U){fE(this,U)}};function fE(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,pE(u),oh(u)}function pE(u){u.A||(u.A=!0,rt(u,"complete"),rt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,rt(this,"complete"),rt(this,"abort"),oh(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),oh(this,!0)),pt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?gE(this):this.bb())},t.bb=function(){gE(this)};function gE(u){if(u.h&&typeof o<"u"&&(!u.v[1]||ei(u)!=4||u.Z()!=2)){if(u.u&&ei(u)==4)El(u.Ea,0,u);else if(rt(u,"readystatechange"),ei(u)==4){u.h=!1;try{const q=u.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var g;if(!(g=p)){var E;if(E=q===0){var L=String(u.D).match(sE)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),E=!wN.test(L?L.toLowerCase():"")}g=E}if(g)rt(u,"complete"),rt(u,"success");else{u.m=6;try{var U=2<ei(u)?u.g.statusText:""}catch{U=""}u.l=U+" ["+u.Z()+"]",pE(u)}}finally{oh(u)}}}}function oh(u,p){if(u.g){mE(u);const g=u.g,E=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||rt(u,"ready");try{g.onreadystatechange=E}catch{}}}function mE(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function ei(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<ei(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),Yp(p)}};function _E(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function TN(u){const p={};u=(u.g&&2<=ei(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<u.length;E++){if(y(u[E]))continue;var g=b(u[E]);const L=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const U=p[L]||[];p[L]=U,U.push(g)}S(p,function(E){return E.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ol(u,p,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||p}function yE(u){this.Aa=0,this.i=[],this.j=new B,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ol("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ol("baseRetryDelayMs",5e3,u),this.cb=Ol("retryDelaySeedMs",1e4,u),this.Wa=Ol("forwardChannelMaxRetries",2,u),this.wa=Ol("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Qt(u&&u.concurrentRequestLimit),this.Da=new yN,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=yE.prototype,t.la=8,t.G=1,t.connect=function(u,p,g,E){x(0),this.W=u,this.H=p||{},g&&E!==void 0&&(this.H.OSID=g,this.H.OAID=E),this.F=this.X,this.I=PE(this,null,this.W),lh(this)};function Xp(u){if(vE(u),u.G==3){var p=u.U++,g=Zr(u.I);if(Xe(g,"SID",u.K),Xe(g,"RID",p),Xe(g,"TYPE","terminate"),Ll(u,g),p=new Ie(u,u.j,p),p.L=2,p.v=ih(Zr(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=p.v,g=!0),g||(p.g=AE(p.j,null),p.g.ea(p.v)),p.F=Date.now(),cr(p)}RE(u)}function ah(u){u.g&&(eg(u),u.g.cancel(),u.g=null)}function vE(u){ah(u),u.u&&(a.clearTimeout(u.u),u.u=null),uh(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function lh(u){if(!Ve(u.h)&&!u.s){u.s=!0;var p=u.Ga;de||se(),$||(de(),$=!0),J.add(p,u),u.B=0}}function IN(u,p){return Xn(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=V(f(u.Ga,u,p),CE(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const L=new Ie(this,this.j,u);let U=this.o;if(this.S&&(U?(U=w(U),A(U,this.S)):U=this.S),this.m!==null||this.O||(L.H=U,U=null),this.P)e:{for(var p=0,g=0;g<this.i.length;g++){t:{var E=this.i[g];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(p+=E,4096<p){p=g;break e}if(p===4096||g===this.i.length-1){p=g+1;break e}}p=1e3}else p=1e3;p=EE(this,L,p),g=Zr(this.I),Xe(g,"RID",u),Xe(g,"CVER",22),this.D&&Xe(g,"X-HTTP-Session-Id",this.D),Ll(this,g),U&&(this.O?p="headers="+encodeURIComponent(String(dE(U)))+"&"+p:this.m&&Jp(g,this.m,U)),Pl(this.h,L),this.Ua&&Xe(g,"TYPE","init"),this.P?(Xe(g,"$req",p),Xe(g,"SID","null"),L.T=!0,Jr(L,g,null)):Jr(L,g,p),this.G=2}}else this.G==3&&(u?wE(this,u):this.i.length==0||Ve(this.h)||wE(this))};function wE(u,p){var g;p?g=p.l:g=u.U++;const E=Zr(u.I);Xe(E,"SID",u.K),Xe(E,"RID",g),Xe(E,"AID",u.T),Ll(u,E),u.m&&u.o&&Jp(E,u.m,u.o),g=new Ie(u,u.j,g,u.B+1),u.m===null&&(g.H=u.o),p&&(u.i=p.D.concat(u.i)),p=EE(u,g,1e3),g.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Pl(u.h,g),Jr(g,E,p)}function Ll(u,p){u.H&&k(u.H,function(g,E){Xe(p,E,g)}),u.l&&iE({},function(g,E){Xe(p,E,g)})}function EE(u,p,g){g=Math.min(u.i.length,g);var E=u.l?f(u.l.Na,u.l,u):null;e:{var L=u.i;let U=-1;for(;;){const q=["count="+g];U==-1?0<g?(U=L[0].g,q.push("ofs="+U)):U=0:q.push("ofs="+U);let We=!0;for(let Bt=0;Bt<g;Bt++){let xe=L[Bt].g;const Yt=L[Bt].map;if(xe-=U,0>xe)U=Math.max(0,L[Bt].g-100),We=!1;else try{vN(Yt,q,"req"+xe+"_")}catch{E&&E(Yt)}}if(We){E=q.join("&");break e}}}return u=u.i.splice(0,g),p.D=u,E}function TE(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;de||se(),$||(de(),$=!0),J.add(p,u),u.v=0}}function Zp(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=V(f(u.Fa,u),CE(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,IE(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=V(f(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,x(10),ah(this),IE(this))};function eg(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function IE(u){u.g=new Ie(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=Zr(u.qa);Xe(p,"RID","rpc"),Xe(p,"SID",u.K),Xe(p,"AID",u.T),Xe(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&Xe(p,"TO",u.ja),Xe(p,"TYPE","xmlhttp"),Ll(u,p),u.m&&u.o&&Jp(p,u.m,u.o),u.L&&(u.g.I=u.L);var g=u.g;u=u.ia,g.L=1,g.v=ih(Zr(p)),g.m=null,g.P=!0,ur(g,u)}t.Za=function(){this.C!=null&&(this.C=null,ah(this),Zp(this),x(19))};function uh(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function SE(u,p){var g=null;if(u.g==p){uh(u),eg(u),u.g=null;var E=2}else if(Bo(u.h,p))g=p.D,nE(u.h,p),E=1;else return;if(u.G!=0){if(p.o)if(E==1){g=p.m?p.m.length:0,p=Date.now()-p.F;var L=u.B;E=bs(),rt(E,new O(E,g)),lh(u)}else TE(u);else if(L=p.s,L==3||L==0&&0<p.X||!(E==1&&IN(u,p)||E==2&&Zp(u)))switch(g&&0<g.length&&(p=u.h,p.i=p.i.concat(g)),L){case 1:xs(u,5);break;case 4:xs(u,10);break;case 3:xs(u,6);break;default:xs(u,2)}}}function CE(u,p){let g=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(g*=2),g*p}function xs(u,p){if(u.j.info("Error code "+p),p==2){var g=f(u.fb,u),E=u.Xa;const L=!E;E=new Ns(E||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||nh(E,"https"),ih(E),L?mN(E.toString(),g):_N(E.toString(),g)}else x(2);u.G=0,u.l&&u.l.sa(p),RE(u),vE(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),x(2)):(this.j.info("Failed to ping google.com"),x(1))};function RE(u){if(u.G=0,u.ka=[],u.l){const p=rE(u.h);(p.length!=0||u.i.length!=0)&&(I(u.ka,p),I(u.ka,u.i),u.h.i.length=0,T(u.i),u.i.length=0),u.l.ra()}}function PE(u,p,g){var E=g instanceof Ns?Zr(g):new Ns(g);if(E.g!="")p&&(E.g=p+"."+E.g),rh(E,E.s);else{var L=a.location;E=L.protocol,p=p?p+"."+L.hostname:L.hostname,L=+L.port;var U=new Ns(null);E&&nh(U,E),p&&(U.g=p),L&&rh(U,L),g&&(U.l=g),E=U}return g=u.D,p=u.ya,g&&p&&Xe(E,g,p),Xe(E,"VER",u.la),Ll(u,E),E}function AE(u,p,g){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new pt(new Nl({eb:g})):new pt(u.pa),p.Ha(u.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function kE(){}t=kE.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ch(){}ch.prototype.g=function(u,p){return new Dn(u,p)};function Dn(u,p){vt.call(this),this.g=new yE(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!y(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!y(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new $o(this)}_(Dn,vt),Dn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Dn.prototype.close=function(){Xp(this.g)},Dn.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.u&&(g={},g.__data__=Fo(u),u=g);p.i.push(new st(p.Ya++,u)),p.G==3&&lh(p)},Dn.prototype.N=function(){this.g.l=null,delete this.j,Xp(this.g),delete this.g,Dn.aa.N.call(this)};function bE(u){ks.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const g in p){u=g;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}_(bE,ks);function NE(){Cl.call(this),this.status=1}_(NE,Cl);function $o(u){this.g=u}_($o,kE),$o.prototype.ua=function(){rt(this.g,"a")},$o.prototype.ta=function(u){rt(this.g,new bE(u))},$o.prototype.sa=function(u){rt(this.g,new NE)},$o.prototype.ra=function(){rt(this.g,"b")},ch.prototype.createWebChannel=ch.prototype.g,Dn.prototype.send=Dn.prototype.o,Dn.prototype.open=Dn.prototype.m,Dn.prototype.close=Dn.prototype.close,YA=function(){return new ch},QA=function(){return bs()},GA=br,H_={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},X.NO_ERROR=0,X.TIMEOUT=8,X.HTTP_ERROR=6,ad=X,ce.COMPLETE="complete",KA=ce,Uo.EventType=kr,kr.OPEN="a",kr.CLOSE="b",kr.ERROR="c",kr.MESSAGE="d",vt.prototype.listen=vt.prototype.K,uu=Uo,qA=Nl,pt.prototype.listenOnce=pt.prototype.L,pt.prototype.getLastError=pt.prototype.Ka,pt.prototype.getLastErrorCode=pt.prototype.Ba,pt.prototype.getStatus=pt.prototype.Z,pt.prototype.getResponseJson=pt.prototype.Oa,pt.prototype.getResponseText=pt.prototype.oa,pt.prototype.send=pt.prototype.ea,pt.prototype.setWithCredentials=pt.prototype.Ha,HA=pt}).apply(typeof Mh<"u"?Mh:typeof self<"u"?self:typeof window<"u"?window:{});const zI="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fl="10.12.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yo=new rp("@firebase/firestore");function Xl(){return yo.logLevel}function Z(t,...e){if(yo.logLevel<=Se.DEBUG){const n=e.map(iw);yo.debug(`Firestore (${fl}): ${t}`,...n)}}function Pi(t,...e){if(yo.logLevel<=Se.ERROR){const n=e.map(iw);yo.error(`Firestore (${fl}): ${t}`,...n)}}function Ga(t,...e){if(yo.logLevel<=Se.WARN){const n=e.map(iw);yo.warn(`Firestore (${fl}): ${t}`,...n)}}function iw(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function le(t="Unexpected state"){const e=`FIRESTORE (${fl}) INTERNAL ASSERTION FAILED: `+t;throw Pi(e),new Error(e)}function Je(t,e){t||le()}function pe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class G extends Cr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class L${getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(nn.UNAUTHENTICATED))}shutdown(){}}class M${constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class V${constructor(e){this.t=e,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new _i;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new _i,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{Z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Z("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new _i)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Je(typeof r.accessToken=="string"),new JA(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Je(e===null||typeof e=="string"),new nn(e)}}class F${constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class U${constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new F$(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(nn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class B${constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class j${constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&Z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Z("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Je(typeof n.token=="string"),this.R=n.token,new B$(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $$(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=$$(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Oe(t,e){return t<e?-1:t>e?1:0}function Qa(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new G(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new G(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new G(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Nt.fromMillis(Date.now())}static fromDate(e){return Nt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Nt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Oe(this.nanoseconds,e.nanoseconds):Oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.timestamp=e}static fromTimestamp(e){return new he(e)}static min(){return new he(new Nt(0,0))}static max(){return new he(new Nt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e,n,r){n===void 0?n=0:n>e.length&&le(),r===void 0?r=e.length-n:r>e.length-n&&le(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return mc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof mc?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Qe extends mc{construct(e,n,r){return new Qe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new G(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Qe(n)}static emptyPath(){return new Qe([])}}const z$=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wt extends mc{construct(e,n,r){return new Wt(e,n,r)}static isValidIdentifier(e){return z$.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Wt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new G(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new G(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new G(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new G(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wt(n)}static emptyPath(){return new Wt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.path=e}static fromPath(e){return new re(Qe.fromString(e))}static fromName(e){return new re(Qe.fromString(e).popFirst(5))}static empty(){return new re(Qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Qe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new re(new Qe(e.slice()))}}function W$(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=he.fromTimestamp(r===1e9?new Nt(n+1,0):new Nt(n,r));return new ys(i,re.empty(),e)}function H$(t){return new ys(t.readTime,t.key,-1)}class ys{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ys(he.min(),re.empty(),-1)}static max(){return new ys(he.max(),re.empty(),-1)}}function q$(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=re.comparator(t.documentKey,e.documentKey),n!==0?n:Oe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K$="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class G${constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jc(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==K$)throw t;Z("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&le(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new z((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof z?n:z.resolve(n)}catch(n){return z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):z.reject(n)}static resolve(e){return new z((n,r)=>{n(e)})}static reject(e){return new z((n,r)=>{r(e)})}static waitFor(e){return new z((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=z.resolve(!1);for(const r of e)n=n.next(i=>i?z.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new z((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new z((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function Q$(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function $c(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}sw.oe=-1;function wp(t){return t==null}function gf(t){return t===0&&1/t==-1/0}function Y$(t){return typeof t=="number"&&Number.isInteger(t)&&!gf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WI(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function bo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ZA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e,n){this.comparator=e,this.root=n||$t.EMPTY}insert(e,n){return new dt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,$t.BLACK,null,null))}remove(e){return new dt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$t.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vh(this.root,e,this.comparator,!0)}}class Vh{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??$t.RED,this.left=i??$t.EMPTY,this.right=s??$t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new $t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return $t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return $t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw le();const e=this.left.check();if(e!==this.right.check())throw le();return e+(this.isRed()?0:1)}}$t.EMPTY=null,$t.RED=!0,$t.BLACK=!1;$t.EMPTY=new class{constructor(){this.size=0}get key(){throw le()}get value(){throw le()}get color(){throw le()}get left(){throw le()}get right(){throw le()}copy(e,n,r,i,s){return this}insert(e,n,r){return new $t(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.comparator=e,this.data=new dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new HI(this.data.getIterator())}getIteratorFrom(e){return new HI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof qt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new qt(this.comparator);return n.data=e,n}}class HI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this.fields=e,e.sort(Wt.comparator)}static empty(){return new Un([])}unionWith(e){let n=new qt(Wt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Un(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Qa(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new ek("Invalid base64 string: "+s):s}}(e);return new hn(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new hn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}hn.EMPTY_BYTE_STRING=new hn("");const J$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vs(t){if(Je(!!t),typeof t=="string"){let e=0;const n=J$.exec(t);if(Je(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:It(t.seconds),nanos:It(t.nanos)}}function It(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function vo(t){return typeof t=="string"?hn.fromBase64String(t):hn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function ow(t){const e=t.mapValue.fields.__previous_value__;return Ep(e)?ow(e):e}function _c(t){const e=vs(t.mapValue.fields.__local_write_time__.timestampValue);return new Nt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X${constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class yc{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new yc("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof yc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function wo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ep(t)?4:Z$(t)?9007199254740991:10:le()}function qr(t,e){if(t===e)return!0;const n=wo(t);if(n!==wo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return _c(t).isEqual(_c(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=vs(i.timestampValue),a=vs(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return vo(i.bytesValue).isEqual(vo(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return It(i.geoPointValue.latitude)===It(s.geoPointValue.latitude)&&It(i.geoPointValue.longitude)===It(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return It(i.integerValue)===It(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=It(i.doubleValue),a=It(s.doubleValue);return o===a?gf(o)===gf(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Qa(t.arrayValue.values||[],e.arrayValue.values||[],qr);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(WI(o)!==WI(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!qr(o[l],a[l])))return!1;return!0}(t,e);default:return le()}}function vc(t,e){return(t.values||[]).find(n=>qr(n,e))!==void 0}function Ya(t,e){if(t===e)return 0;const n=wo(t),r=wo(e);if(n!==r)return Oe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Oe(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=It(s.integerValue||s.doubleValue),l=It(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return qI(t.timestampValue,e.timestampValue);case 4:return qI(_c(t),_c(e));case 5:return Oe(t.stringValue,e.stringValue);case 6:return function(s,o){const a=vo(s),l=vo(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=Oe(a[c],l[c]);if(h!==0)return h}return Oe(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Oe(It(s.latitude),It(o.latitude));return a!==0?a:Oe(It(s.longitude),It(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const h=Ya(a[c],l[c]);if(h)return h}return Oe(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Fh.mapValue&&o===Fh.mapValue)return 0;if(s===Fh.mapValue)return 1;if(o===Fh.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const f=Oe(l[d],h[d]);if(f!==0)return f;const m=Ya(a[l[d]],c[h[d]]);if(m!==0)return m}return Oe(l.length,h.length)}(t.mapValue,e.mapValue);default:throw le()}}function qI(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Oe(t,e);const n=vs(t),r=vs(e),i=Oe(n.seconds,r.seconds);return i!==0?i:Oe(n.nanos,r.nanos)}function Ja(t){return q_(t)}function q_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=vs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return vo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return re.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=q_(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${q_(n.fields[o])}`;return i+"}"}(t.mapValue):le()}function mf(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function K_(t){return!!t&&"integerValue"in t}function aw(t){return!!t&&"arrayValue"in t}function KI(t){return!!t&&"nullValue"in t}function GI(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ld(t){return!!t&&"mapValue"in t}function xu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return bo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=xu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=xu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Z$(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.value=e}static empty(){return new In({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ld(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=xu(n)}setAll(e){let n=Wt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=xu(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());ld(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return qr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];ld(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){bo(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new In(xu(this.value))}}function tk(t){const e=[];return bo(t.fields,(n,r)=>{const i=new Wt([n]);if(ld(r)){const s=tk(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Un(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new sn(e,0,he.min(),he.min(),he.min(),In.empty(),0)}static newFoundDocument(e,n,r,i){return new sn(e,1,n,he.min(),r,i,0)}static newNoDocument(e,n){return new sn(e,2,n,he.min(),he.min(),In.empty(),0)}static newUnknownDocument(e,n){return new sn(e,3,n,he.min(),he.min(),In.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(he.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=In.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=In.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=he.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof sn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new sn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e,n){this.position=e,this.inclusive=n}}function QI(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=re.comparator(re.fromName(o.referenceValue),n.key):r=Ya(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function YI(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!qr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e,n="asc"){this.field=e,this.dir=n}}function e3(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{}class Pt extends nk{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new n3(e,n,r):n==="array-contains"?new s3(e,r):n==="in"?new o3(e,r):n==="not-in"?new a3(e,r):n==="array-contains-any"?new l3(e,r):new Pt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new r3(e,r):new i3(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ya(n,this.value)):n!==null&&wo(this.value)===wo(n)&&this.matchesComparison(Ya(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return le()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Sr extends nk{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Sr(e,n)}matches(e){return rk(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function rk(t){return t.op==="and"}function ik(t){return t3(t)&&rk(t)}function t3(t){for(const e of t.filters)if(e instanceof Sr)return!1;return!0}function G_(t){if(t instanceof Pt)return t.field.canonicalString()+t.op.toString()+Ja(t.value);if(ik(t))return t.filters.map(e=>G_(e)).join(",");{const e=t.filters.map(n=>G_(n)).join(",");return`${t.op}(${e})`}}function sk(t,e){return t instanceof Pt?function(r,i){return i instanceof Pt&&r.op===i.op&&r.field.isEqual(i.field)&&qr(r.value,i.value)}(t,e):t instanceof Sr?function(r,i){return i instanceof Sr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&sk(o,i.filters[a]),!0):!1}(t,e):void le()}function ok(t){return t instanceof Pt?function(n){return`${n.field.canonicalString()} ${n.op} ${Ja(n.value)}`}(t):t instanceof Sr?function(n){return n.op.toString()+" {"+n.getFilters().map(ok).join(" ,")+"}"}(t):"Filter"}class n3 extends Pt{constructor(e,n,r){super(e,n,r),this.key=re.fromName(r.referenceValue)}matches(e){const n=re.comparator(e.key,this.key);return this.matchesComparison(n)}}class r3 extends Pt{constructor(e,n){super(e,"in",n),this.keys=ak("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class i3 extends Pt{constructor(e,n){super(e,"not-in",n),this.keys=ak("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function ak(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>re.fromName(r.referenceValue))}class s3 extends Pt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return aw(n)&&vc(n.arrayValue,this.value)}}class o3 extends Pt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&vc(this.value.arrayValue,n)}}class a3 extends Pt{constructor(e,n){super(e,"not-in",n)}matches(e){if(vc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!vc(this.value.arrayValue,n)}}class l3 extends Pt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!aw(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>vc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function JI(t,e=null,n=[],r=[],i=null,s=null,o=null){return new u3(t,e,n,r,i,s,o)}function lw(t){const e=pe(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>G_(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),wp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ja(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ja(r)).join(",")),e.ue=n}return e.ue}function uw(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!e3(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!sk(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!YI(t.startAt,e.startAt)&&YI(t.endAt,e.endAt)}function Q_(t){return re.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function c3(t,e,n,r,i,s,o,a){return new No(t,e,n,r,i,s,o,a)}function Tp(t){return new No(t)}function XI(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function cw(t){return t.collectionGroup!==null}function Ra(t){const e=pe(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new qt(Wt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new wc(s,r))}),n.has(Wt.keyField().canonicalString())||e.ce.push(new wc(Wt.keyField(),r))}return e.ce}function zr(t){const e=pe(t);return e.le||(e.le=h3(e,Ra(t))),e.le}function h3(t,e){if(t.limitType==="F")return JI(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new wc(i.field,s)});const n=t.endAt?new Xa(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Xa(t.startAt.position,t.startAt.inclusive):null;return JI(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Y_(t,e){const n=t.filters.concat([e]);return new No(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function _f(t,e,n){return new No(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ip(t,e){return uw(zr(t),zr(e))&&t.limitType===e.limitType}function lk(t){return`${lw(zr(t))}|lt:${t.limitType}`}function Yo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>ok(i)).join(", ")}]`),wp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ja(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ja(i)).join(",")),`Target(${r})`}(zr(t))}; limitType=${t.limitType})`}function Sp(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):re.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Ra(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=QI(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Ra(r),i)||r.endAt&&!function(o,a,l){const c=QI(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Ra(r),i))}(t,e)}function d3(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function uk(t){return(e,n)=>{let r=!1;for(const i of Ra(t)){const s=f3(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function f3(t,e,n){const r=t.field.isKeyField()?re.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Ya(l,c):le()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return le()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){bo(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return ZA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p3=new dt(re.comparator);function Ai(){return p3}const ck=new dt(re.comparator);function cu(...t){let e=ck;for(const n of t)e=e.insert(n.key,n);return e}function hk(t){let e=ck;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Qs(){return Du()}function dk(){return Du()}function Du(){return new pl(t=>t.toString(),(t,e)=>t.isEqual(e))}const g3=new dt(re.comparator),m3=new qt(re.comparator);function Ce(...t){let e=m3;for(const n of t)e=e.add(n);return e}const _3=new qt(Oe);function y3(){return _3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fk(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gf(e)?"-0":e}}function pk(t){return{integerValue:""+t}}function v3(t,e){return Y$(e)?pk(e):fk(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(){this._=void 0}}function w3(t,e,n){return t instanceof Ec?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Ep(s)&&(s=ow(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Tc?mk(t,e):t instanceof Ic?_k(t,e):function(i,s){const o=gk(i,s),a=ZI(o)+ZI(i.Pe);return K_(o)&&K_(i.Pe)?pk(a):fk(i.serializer,a)}(t,e)}function E3(t,e,n){return t instanceof Tc?mk(t,e):t instanceof Ic?_k(t,e):n}function gk(t,e){return t instanceof yf?function(r){return K_(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Ec extends Cp{}class Tc extends Cp{constructor(e){super(),this.elements=e}}function mk(t,e){const n=yk(e);for(const r of t.elements)n.some(i=>qr(i,r))||n.push(r);return{arrayValue:{values:n}}}class Ic extends Cp{constructor(e){super(),this.elements=e}}function _k(t,e){let n=yk(e);for(const r of t.elements)n=n.filter(i=>!qr(i,r));return{arrayValue:{values:n}}}class yf extends Cp{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function ZI(t){return It(t.integerValue||t.doubleValue)}function yk(t){return aw(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T3{constructor(e,n){this.field=e,this.transform=n}}function I3(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Tc&&i instanceof Tc||r instanceof Ic&&i instanceof Ic?Qa(r.elements,i.elements,qr):r instanceof yf&&i instanceof yf?qr(r.Pe,i.Pe):r instanceof Ec&&i instanceof Ec}(t.transform,e.transform)}class S3{constructor(e,n){this.version=e,this.transformResults=n}}class sr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new sr}static exists(e){return new sr(void 0,e)}static updateTime(e){return new sr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ud(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Rp{}function vk(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new hw(t.key,sr.none()):new zc(t.key,t.data,sr.none());{const n=t.data,r=In.empty();let i=new qt(Wt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Ps(t.key,r,new Un(i.toArray()),sr.none())}}function C3(t,e,n){t instanceof zc?function(i,s,o){const a=i.value.clone(),l=tS(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ps?function(i,s,o){if(!ud(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=tS(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(wk(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ou(t,e,n,r){return t instanceof zc?function(s,o,a,l){if(!ud(s.precondition,o))return a;const c=s.value.clone(),h=nS(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ps?function(s,o,a,l){if(!ud(s.precondition,o))return a;const c=nS(s.fieldTransforms,l,o),h=o.data;return h.setAll(wk(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return ud(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function R3(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=gk(r.transform,i||null);s!=null&&(n===null&&(n=In.empty()),n.set(r.field,s))}return n||null}function eS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Qa(r,i,(s,o)=>I3(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class zc extends Rp{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ps extends Rp{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function wk(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function tS(t,e,n){const r=new Map;Je(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,E3(o,a,n[i]))}return r}function nS(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,w3(s,o,e))}return r}class hw extends Rp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class P3 extends Rp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A3{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&C3(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ou(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ou(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=dk();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=vk(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(he.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ce())}isEqual(e){return this.batchId===e.batchId&&Qa(this.mutations,e.mutations,(n,r)=>eS(n,r))&&Qa(this.baseMutations,e.baseMutations,(n,r)=>eS(n,r))}}class dw{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Je(e.mutations.length===r.length);let i=function(){return g3}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new dw(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k3{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Et,Ae;function N3(t){switch(t){default:return le();case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0}}function Ek(t){if(t===void 0)return Pi("GRPC error has no .code"),j.UNKNOWN;switch(t){case Et.OK:return j.OK;case Et.CANCELLED:return j.CANCELLED;case Et.UNKNOWN:return j.UNKNOWN;case Et.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case Et.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case Et.INTERNAL:return j.INTERNAL;case Et.UNAVAILABLE:return j.UNAVAILABLE;case Et.UNAUTHENTICATED:return j.UNAUTHENTICATED;case Et.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case Et.NOT_FOUND:return j.NOT_FOUND;case Et.ALREADY_EXISTS:return j.ALREADY_EXISTS;case Et.PERMISSION_DENIED:return j.PERMISSION_DENIED;case Et.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case Et.ABORTED:return j.ABORTED;case Et.OUT_OF_RANGE:return j.OUT_OF_RANGE;case Et.UNIMPLEMENTED:return j.UNIMPLEMENTED;case Et.DATA_LOSS:return j.DATA_LOSS;default:return le()}}(Ae=Et||(Et={}))[Ae.OK=0]="OK",Ae[Ae.CANCELLED=1]="CANCELLED",Ae[Ae.UNKNOWN=2]="UNKNOWN",Ae[Ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ae[Ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ae[Ae.NOT_FOUND=5]="NOT_FOUND",Ae[Ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ae[Ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ae[Ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ae[Ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ae[Ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ae[Ae.ABORTED=10]="ABORTED",Ae[Ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ae[Ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ae[Ae.INTERNAL=13]="INTERNAL",Ae[Ae.UNAVAILABLE=14]="UNAVAILABLE",Ae[Ae.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x3(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D3=new eo([4294967295,4294967295],0);function rS(t){const e=x3().encode(t),n=new WA;return n.update(e),new Uint8Array(n.digest())}function iS(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new eo([n,r],0),new eo([i,s],0)]}class fw{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new hu(`Invalid padding: ${n}`);if(r<0)throw new hu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new hu(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new hu(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=eo.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(eo.fromNumber(r)));return i.compare(D3)===1&&(i=new eo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=rS(e),[r,i]=iS(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new fw(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=rS(e),[r,i]=iS(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class hu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Wc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Pp(he.min(),i,new dt(Oe),Ai(),Ce())}}class Wc{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Wc(r,n,Ce(),Ce(),Ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class Tk{constructor(e,n){this.targetId=e,this.me=n}}class Ik{constructor(e,n,r=hn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class sS{constructor(){this.fe=0,this.ge=aS(),this.pe=hn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=Ce(),n=Ce(),r=Ce();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:le()}}),new Wc(this.pe,this.ye,e,n,r)}ve(){this.we=!1,this.ge=aS()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Je(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class O3{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ai(),this.qe=oS(),this.Qe=new dt(Oe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:le()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(Q_(s))if(r===0){const o=new re(s.path);this.Ue(n,o,sn.newNoDocument(o,he.min()))}else Je(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=vo(r).toUint8Array()}catch(l){if(l instanceof ek)return Ga("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new fw(o,i,s)}catch(l){return Ga(l instanceof hu?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&Q_(a.target)){const l=new re(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,sn.newNoDocument(l,e))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=Ce();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Pp(e,n,this.Qe,this.ke,r);return this.ke=Ai(),this.qe=oS(),this.Qe=new dt(Oe),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new sS,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new qt(Oe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Z("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new sS),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function oS(){return new dt(re.comparator)}function aS(){return new dt(re.comparator)}const L3=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),M3=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),V3=(()=>({and:"AND",or:"OR"}))();class F3{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function J_(t,e){return t.useProto3Json||wp(e)?e:{value:e}}function vf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Sk(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function U3(t,e){return vf(t,e.toTimestamp())}function Wr(t){return Je(!!t),he.fromTimestamp(function(n){const r=vs(n);return new Nt(r.seconds,r.nanos)}(t))}function pw(t,e){return X_(t,e).canonicalString()}function X_(t,e){const n=function(i){return new Qe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Ck(t){const e=Qe.fromString(t);return Je(bk(e)),e}function Z_(t,e){return pw(t.databaseId,e.path)}function tm(t,e){const n=Ck(e);if(n.get(1)!==t.databaseId.projectId)throw new G(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new G(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new re(Pk(n))}function Rk(t,e){return pw(t.databaseId,e)}function B3(t){const e=Ck(t);return e.length===4?Qe.emptyPath():Pk(e)}function ey(t){return new Qe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Pk(t){return Je(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function lS(t,e,n){return{name:Z_(t,e),fields:n.value.mapValue.fields}}function j3(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:le()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(Je(h===void 0||typeof h=="string"),hn.fromBase64String(h||"")):(Je(h===void 0||h instanceof Buffer||h instanceof Uint8Array),hn.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?j.UNKNOWN:Ek(c.code);return new G(h,c.message||"")}(o);n=new Ik(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=tm(t,r.document.name),s=Wr(r.document.updateTime),o=r.document.createTime?Wr(r.document.createTime):he.min(),a=new In({mapValue:{fields:r.document.fields}}),l=sn.newFoundDocument(i,s,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new cd(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=tm(t,r.document),s=r.readTime?Wr(r.readTime):he.min(),o=sn.newNoDocument(i,s),a=r.removedTargetIds||[];n=new cd([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=tm(t,r.document),s=r.removedTargetIds||[];n=new cd([],s,i,null)}else{if(!("filter"in e))return le();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new b3(i,s),a=r.targetId;n=new Tk(a,o)}}return n}function $3(t,e){let n;if(e instanceof zc)n={update:lS(t,e.key,e.value)};else if(e instanceof hw)n={delete:Z_(t,e.key)};else if(e instanceof Ps)n={update:lS(t,e.key,e.data),updateMask:J3(e.fieldMask)};else{if(!(e instanceof P3))return le();n={verify:Z_(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Ec)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Tc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ic)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof yf)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw le()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:U3(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:le()}(t,e.precondition)),n}function z3(t,e){return t&&t.length>0?(Je(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Wr(i.updateTime):Wr(s);return o.isEqual(he.min())&&(o=Wr(s)),new S3(o,i.transformResults||[])}(n,e))):[]}function W3(t,e){return{documents:[Rk(t,e.path)]}}function H3(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Rk(t,i);const s=function(c){if(c.length!==0)return kk(Sr.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(f){return{field:Jo(f.field),direction:G3(f.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=J_(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function q3(t){let e=B3(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Je(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(d){const f=Ak(d);return f instanceof Sr&&ik(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(_){return new wc(Xo(_.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,wp(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,m=d.values||[];return new Xa(m,f)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const f=!d.before,m=d.values||[];return new Xa(m,f)}(n.endAt)),c3(e,i,o,s,a,"F",l,c)}function K3(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return le()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Ak(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Xo(n.unaryFilter.field);return Pt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Xo(n.unaryFilter.field);return Pt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Xo(n.unaryFilter.field);return Pt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Xo(n.unaryFilter.field);return Pt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return le()}}(t):t.fieldFilter!==void 0?function(n){return Pt.create(Xo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return le()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Sr.create(n.compositeFilter.filters.map(r=>Ak(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return le()}}(n.compositeFilter.op))}(t):le()}function G3(t){return L3[t]}function Q3(t){return M3[t]}function Y3(t){return V3[t]}function Jo(t){return{fieldPath:t.canonicalString()}}function Xo(t){return Wt.fromServerFormat(t.fieldPath)}function kk(t){return t instanceof Pt?function(n){if(n.op==="=="){if(GI(n.value))return{unaryFilter:{field:Jo(n.field),op:"IS_NAN"}};if(KI(n.value))return{unaryFilter:{field:Jo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(GI(n.value))return{unaryFilter:{field:Jo(n.field),op:"IS_NOT_NAN"}};if(KI(n.value))return{unaryFilter:{field:Jo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Jo(n.field),op:Q3(n.op),value:n.value}}}(t):t instanceof Sr?function(n){const r=n.getFilters().map(i=>kk(i));return r.length===1?r[0]:{compositeFilter:{op:Y3(n.op),filters:r}}}(t):le()}function J3(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function bk(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e,n,r,i,s=he.min(),o=he.min(),a=hn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ts(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ts(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ts(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ts(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X3{constructor(e){this.ct=e}}function Z3(t){const e=q3({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?_f(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ez{constructor(){this._n=new tz}addToCollectionParentIndex(e,n){return this._n.add(n),z.resolve()}getCollectionParents(e,n){return z.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return z.resolve()}deleteFieldIndex(e,n){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,n){return z.resolve()}getDocumentsMatchingTarget(e,n){return z.resolve(null)}getIndexType(e,n){return z.resolve(0)}getFieldIndexes(e,n){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,n){return z.resolve(ys.min())}getMinOffsetFromCollectionGroup(e,n){return z.resolve(ys.min())}updateCollectionGroup(e,n,r){return z.resolve()}updateIndexEntries(e,n){return z.resolve()}}class tz{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new qt(Qe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new qt(Qe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Za(0)}static Ln(){return new Za(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nz{constructor(){this.changes=new pl(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,sn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?z.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rz{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iz{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Ou(r.mutation,i,Un.empty(),Nt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ce()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ce()){const i=Qs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=cu();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Qs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ce()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Ai();const o=Du(),a=function(){return Du()}();return n.forEach((l,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof Ps)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),Ou(h.mutation,c,h.mutation.getFieldMask(),Nt.now())):o.set(c.key,Un.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var d;return a.set(c,new rz(h,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Du();let i=new dt((o,a)=>o-a),s=Ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=r.get(l)||Un.empty();h=a.applyToLocalView(c,h),r.set(l,h);const d=(i.get(a.batchId)||Ce()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,d=dk();h.forEach(f=>{if(!s.has(f)){const m=vk(n.get(f),r.get(f));m!==null&&d.set(f,m),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return z.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return re.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):cw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):z.resolve(Qs());let a=-1,l=s;return o.next(c=>z.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(h)?z.resolve():this.remoteDocumentCache.getEntry(e,h).next(f=>{l=l.insert(h,f)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,Ce())).next(h=>({batchId:a,changes:hk(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new re(n)).next(r=>{let i=cu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=cu();return this.indexManager.getCollectionParents(e,s).next(a=>z.forEach(a,l=>{const c=function(d,f){return new No(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,sn.newInvalidDocument(h)))});let a=cu();return o.forEach((l,c)=>{const h=s.get(l);h!==void 0&&Ou(h.mutation,c,Un.empty(),Nt.now()),Sp(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sz{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return z.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Wr(i.createTime)}}(n)),z.resolve()}getNamedQuery(e,n){return z.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:Z3(i.bundledQuery),readTime:Wr(i.readTime)}}(n)),z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oz{constructor(){this.overlays=new dt(re.comparator),this.hr=new Map}getOverlay(e,n){return z.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Qs();return z.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),z.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),z.resolve()}getOverlaysForCollection(e,n,r){const i=Qs(),s=n.length+1,o=new re(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return z.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new dt((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=Qs(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Qs(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return z.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new k3(n,r));let s=this.hr.get(n);s===void 0&&(s=Ce(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(){this.Pr=new qt(Ot.Ir),this.Tr=new qt(Ot.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new Ot(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new Ot(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new re(new Qe([])),r=new Ot(n,e),i=new Ot(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new re(new Qe([])),r=new Ot(n,e),i=new Ot(n,e+1);let s=Ce();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Ot(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ot{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return re.comparator(e.key,n.key)||Oe(e.pr,n.pr)}static Er(e,n){return Oe(e.pr,n.pr)||re.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class az{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new qt(Ot.Ir)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new A3(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new Ot(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return z.resolve(o)}lookupMutationBatch(e,n){return z.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.br(r),s=i<0?0:i;return z.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ot(n,0),i=new Ot(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),z.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new qt(Oe);return n.forEach(i=>{const s=new Ot(i,0),o=new Ot(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),z.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;re.isDocumentKey(s)||(s=s.child(""));const o=new Ot(new re(s),0);let a=new qt(Oe);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.pr)),!0)},o),z.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Je(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return z.forEach(n.mutations,i=>{const s=new Ot(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new Ot(n,0),i=this.wr.firstAfterOrEqual(r);return z.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lz{constructor(e){this.vr=e,this.docs=function(){return new dt(re.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return z.resolve(r?r.document.mutableCopy():sn.newInvalidDocument(n))}getEntries(e,n){let r=Ai();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():sn.newInvalidDocument(i))}),z.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Ai();const o=n.path,a=new re(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||q$(H$(h),r)<=0||(i.has(h.key)||Sp(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return z.resolve(s)}getAllFromCollectionGroup(e,n,r,i){le()}Fr(e,n){return z.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new uz(this)}getSize(e){return z.resolve(this.size)}}class uz extends nz{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),z.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cz{constructor(e){this.persistence=e,this.Mr=new pl(n=>lw(n),uw),this.lastRemoteSnapshotVersion=he.min(),this.highestTargetId=0,this.Or=0,this.Nr=new gw,this.targetCount=0,this.Lr=Za.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),z.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Lr=new Za(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,z.resolve()}updateTargetData(e,n){return this.qn(n),z.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),z.waitFor(s).next(()=>i)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return z.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),z.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),z.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),z.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return z.resolve(r)}containsKey(e,n){return z.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hz{constructor(e,n){this.Br={},this.overlays={},this.kr=new sw(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new cz(this),this.indexManager=new ez,this.remoteDocumentCache=function(i){return new lz(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new X3(n),this.$r=new sz(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new oz,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new az(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){Z("MemoryPersistence","Starting transaction:",e);const i=new dz(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return z.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class dz extends G${constructor(e){super(),this.currentSequenceNumber=e}}class mw{constructor(e){this.persistence=e,this.zr=new gw,this.jr=null}static Hr(e){return new mw(e)}get Jr(){if(this.jr)return this.jr;throw le()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),z.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),z.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),z.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.Jr,r=>{const i=re.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,he.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return z.or([()=>z.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=Ce(),i=Ce();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new _w(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fz{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pz{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return j2()?8:Q$(Gt())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new fz;return this.Ji(e,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>s.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(Xl()<=Se.DEBUG&&Z("QueryEngine","SDK will not create cache indexes for query:",Yo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),z.resolve()):(Xl()<=Se.DEBUG&&Z("QueryEngine","Query:",Yo(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Xl()<=Se.DEBUG&&Z("QueryEngine","The SDK decides to create cache indexes for query:",Yo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zr(n))):z.resolve())}ji(e,n){if(XI(n))return z.resolve(null);let r=zr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=_f(n,null,"F"),r=zr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Ce(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Zi(n,a);return this.Xi(n,c,o,l.readTime)?this.ji(e,_f(n,null,"F")):this.es(e,c,n,l)}))})))}Hi(e,n,r,i){return XI(n)||i.isEqual(he.min())?z.resolve(null):this.zi.getDocuments(e,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?z.resolve(null):(Xl()<=Se.DEBUG&&Z("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Yo(n)),this.es(e,o,n,W$(i,-1)).next(a=>a))})}Zi(e,n){let r=new qt(uk(e));return n.forEach((i,s)=>{Sp(e,s)&&(r=r.add(s))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,n,r){return Xl()<=Se.DEBUG&&Z("QueryEngine","Using full collection scan to execute query:",Yo(n)),this.zi.getDocumentsMatchingQuery(e,n,ys.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gz{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new dt(Oe),this.rs=new pl(s=>lw(s),uw),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new iz(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function mz(t,e,n,r){return new gz(t,e,n,r)}async function Nk(t,e){const n=pe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Ce();for(const c of i){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(c=>({us:c,removedBatchIds:o,addedBatchIds:a}))})})}function _z(t,e){const n=pe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const d=c.batch,f=d.keys();let m=z.resolve();return f.forEach(_=>{m=m.next(()=>h.getEntry(l,_)).next(T=>{const I=c.docVersions.get(_);Je(I!==null),T.version.compareTo(I)<0&&(d.applyToRemoteDocument(T,c),T.isValidDocument()&&(T.setReadTime(c.commitVersion),h.addEntry(T)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Ce();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function xk(t){const e=pe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function yz(t,e){const n=pe(t),r=e.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];e.targetChanges.forEach((h,d)=>{const f=i.get(d);if(!f)return;a.push(n.Qr.removeMatchingKeys(s,h.removedDocuments,d).next(()=>n.Qr.addMatchingKeys(s,h.addedDocuments,d)));let m=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?m=m.withResumeToken(hn.EMPTY_BYTE_STRING,he.min()).withLastLimboFreeSnapshotVersion(he.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,r)),i=i.insert(d,m),function(T,I,v){return T.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(f,m,h)&&a.push(n.Qr.updateTargetData(s,m))});let l=Ai(),c=Ce();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(vz(s,o,e.documentUpdates).next(h=>{l=h.cs,c=h.ls})),!r.isEqual(he.min())){const h=n.Qr.getLastRemoteSnapshotVersion(s).next(d=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return z.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.ns=i,s))}function vz(t,e,n){let r=Ce(),i=Ce();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Ai();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(he.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Z("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{cs:o,ls:i}})}function wz(t,e){const n=pe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ez(t,e){const n=pe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,z.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new ts(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}async function ty(t,e,n){const r=pe(t),i=r.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!$c(o))throw o;Z("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)}function uS(t,e,n){const r=pe(t);let i=he.min(),s=Ce();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const d=pe(l),f=d.rs.get(h);return f!==void 0?z.resolve(d.ns.get(f)):d.Qr.getTargetData(c,h)}(r,o,zr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?i:he.min(),n?s:Ce())).next(a=>(Tz(r,d3(e),a),{documents:a,hs:s})))}function Tz(t,e,n){let r=t.ss.get(e)||he.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ss.set(e,r)}class cS{constructor(){this.activeTargetIds=y3()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Iz{constructor(){this.no=new cS,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new cS,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sz{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Z("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){Z("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uh=null;function nm(){return Uh===null?Uh=function(){return 268435456+Math.round(2147483648*Math.random())}():Uh++,"0x"+Uh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cz={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rz{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en="WebChannelConnection";class Pz extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){const a=nm(),l=this.vo(n,r.toUriEncodedString());Z("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(c,s,o),this.Mo(n,l,c,i).then(h=>(Z("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Ga("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+fl}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){const i=Cz[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,n,r,i){const s=nm();return new Promise((o,a)=>{const l=new HA;l.setWithCredentials(!0),l.listenOnce(KA.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case ad.NO_ERROR:const h=l.getResponseJson();Z(en,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case ad.TIMEOUT:Z(en,`RPC '${e}' ${s} timed out`),a(new G(j.DEADLINE_EXCEEDED,"Request time out"));break;case ad.HTTP_ERROR:const d=l.getStatus();if(Z(en,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const m=f==null?void 0:f.error;if(m&&m.status&&m.message){const _=function(I){const v=I.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(v)>=0?v:j.UNKNOWN}(m.status);a(new G(_,m.message))}else a(new G(j.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new G(j.UNAVAILABLE,"Connection failed."));break;default:le()}}finally{Z(en,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);Z(en,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Oo(e,n,r){const i=nm(),s=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=YA(),a=QA(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.xmlHttpFactory=new qA({})),this.Fo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=s.join("");Z(en,`Creating RPC '${e}' stream ${i}: ${h}`,l);const d=o.createWebChannel(h,l);let f=!1,m=!1;const _=new Rz({lo:I=>{m?Z(en,`Not sending because RPC '${e}' stream ${i} is closed:`,I):(f||(Z(en,`Opening RPC '${e}' stream ${i} transport.`),d.open(),f=!0),Z(en,`RPC '${e}' stream ${i} sending:`,I),d.send(I))},ho:()=>d.close()}),T=(I,v,y)=>{I.listen(v,R=>{try{y(R)}catch(N){setTimeout(()=>{throw N},0)}})};return T(d,uu.EventType.OPEN,()=>{m||(Z(en,`RPC '${e}' stream ${i} transport opened.`),_.mo())}),T(d,uu.EventType.CLOSE,()=>{m||(m=!0,Z(en,`RPC '${e}' stream ${i} transport closed`),_.po())}),T(d,uu.EventType.ERROR,I=>{m||(m=!0,Ga(en,`RPC '${e}' stream ${i} transport errored:`,I),_.po(new G(j.UNAVAILABLE,"The operation could not be completed")))}),T(d,uu.EventType.MESSAGE,I=>{var v;if(!m){const y=I.data[0];Je(!!y);const R=y,N=R.error||((v=R[0])===null||v===void 0?void 0:v.error);if(N){Z(en,`RPC '${e}' stream ${i} received error:`,N);const M=N.status;let k=function(C){const A=Et[C];if(A!==void 0)return Ek(A)}(M),S=N.message;k===void 0&&(k=j.INTERNAL,S="Unknown error status: "+M+" with message "+N.message),m=!0,_.po(new G(k,S)),d.close()}else Z(en,`RPC '${e}' stream ${i} received:`,y),_.yo(y)}}),T(a,GA.STAT_EVENT,I=>{I.stat===H_.PROXY?Z(en,`RPC '${e}' stream ${i} detected buffering proxy`):I.stat===H_.NOPROXY&&Z(en,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.fo()},0),_}}function rm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ap(t){return new F3(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&Z("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(e,n,r,i,s,o,a,l){this.oi=e,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new Dk(e,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(e,n){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(Pi(n.toString()),Pi("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ao(n)}__(){}auth(){this.state=1;const e=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{e(()=>{const i=new G(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,n){const r=this.a_(this.jo);this.stream=this.l_(e,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(e){return Z("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return n=>{this.oi.enqueueAndForget(()=>this.jo===e?n():(Z("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Az extends Ok{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(e,n){return this.connection.Oo("Listen",e,n)}onMessage(e){this.Yo.reset();const n=j3(this.serializer,e),r=function(s){if(!("targetChange"in s))return he.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?he.min():o.readTime?Wr(o.readTime):he.min()}(e);return this.listener.h_(n,r)}P_(e){const n={};n.database=ey(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Q_(l)?{documents:W3(s,l)}:{query:H3(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Sk(s,o.resumeToken);const c=J_(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(he.min())>0){a.readTime=vf(s,o.snapshotVersion.toTimestamp());const c=J_(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=K3(this.serializer,e);r&&(n.labels=r),this.i_(n)}I_(e){const n={};n.database=ey(this.serializer),n.removeTarget=e,this.i_(n)}}class kz extends Ok{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,n){return this.connection.Oo("Write",e,n)}onMessage(e){if(Je(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const n=z3(e.writeResults,e.commitTime),r=Wr(e.commitTime);return this.listener.A_(r,n)}return Je(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=ey(this.serializer),this.i_(e)}d_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>$3(this.serializer,r))};this.i_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bz extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new G(j.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,X_(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new G(j.UNKNOWN,s.toString())})}xo(e,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(e,X_(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G(j.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class Nz{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Pi(n),this.y_=!1):Z("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xz{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(async()=>{xo(this)&&(Z("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=pe(l);c.M_.add(4),await Hc(c),c.N_.set("Unknown"),c.M_.delete(4),await kp(c)}(this))})}),this.N_=new Nz(r,i)}}async function kp(t){if(xo(t))for(const e of t.x_)await e(!0)}async function Hc(t){for(const e of t.x_)await e(!1)}function Lk(t,e){const n=pe(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),Ew(n)?ww(n):gl(n).Xo()&&vw(n,e))}function yw(t,e){const n=pe(t),r=gl(n);n.F_.delete(e),r.Xo()&&Mk(n,e),n.F_.size===0&&(r.Xo()?r.n_():xo(n)&&n.N_.set("Unknown"))}function vw(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(he.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}gl(t).P_(e)}function Mk(t,e){t.L_.xe(e),gl(t).I_(e)}function ww(t){t.L_=new O3({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),gl(t).start(),t.N_.w_()}function Ew(t){return xo(t)&&!gl(t).Zo()&&t.F_.size>0}function xo(t){return pe(t).M_.size===0}function Vk(t){t.L_=void 0}async function Dz(t){t.N_.set("Online")}async function Oz(t){t.F_.forEach((e,n)=>{vw(t,e)})}async function Lz(t,e){Vk(t),Ew(t)?(t.N_.D_(e),ww(t)):t.N_.set("Unknown")}async function Mz(t,e,n){if(t.N_.set("Online"),e instanceof Ik&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.F_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))}(t,e)}catch(r){Z("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await wf(t,r)}else if(e instanceof cd?t.L_.Ke(e):e instanceof Tk?t.L_.He(e):t.L_.We(e),!n.isEqual(he.min()))try{const r=await xk(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.F_.get(c);h&&s.F_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=s.F_.get(l);if(!h)return;s.F_.set(l,h.withResumeToken(hn.EMPTY_BYTE_STRING,h.snapshotVersion)),Mk(s,l);const d=new ts(h.target,l,c,h.sequenceNumber);vw(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Z("RemoteStore","Failed to raise snapshot:",r),await wf(t,r)}}async function wf(t,e,n){if(!$c(e))throw e;t.M_.add(1),await Hc(t),t.N_.set("Offline"),n||(n=()=>xk(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Z("RemoteStore","Retrying IndexedDB access"),await n(),t.M_.delete(1),await kp(t)})}function Fk(t,e){return e().catch(n=>wf(t,n,e))}async function bp(t){const e=pe(t),n=ws(e);let r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;Vz(e);)try{const i=await wz(e.localStore,r);if(i===null){e.v_.length===0&&n.n_();break}r=i.batchId,Fz(e,i)}catch(i){await wf(e,i)}Uk(e)&&Bk(e)}function Vz(t){return xo(t)&&t.v_.length<10}function Fz(t,e){t.v_.push(e);const n=ws(t);n.Xo()&&n.E_&&n.d_(e.mutations)}function Uk(t){return xo(t)&&!ws(t).Zo()&&t.v_.length>0}function Bk(t){ws(t).start()}async function Uz(t){ws(t).V_()}async function Bz(t){const e=ws(t);for(const n of t.v_)e.d_(n.mutations)}async function jz(t,e,n){const r=t.v_.shift(),i=dw.from(r,e,n);await Fk(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await bp(t)}async function $z(t,e){e&&ws(t).E_&&await async function(r,i){if(function(o){return N3(o)&&o!==j.ABORTED}(i.code)){const s=r.v_.shift();ws(r).t_(),await Fk(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await bp(r)}}(t,e),Uk(t)&&Bk(t)}async function dS(t,e){const n=pe(t);n.asyncQueue.verifyOperationInProgress(),Z("RemoteStore","RemoteStore received new credentials");const r=xo(n);n.M_.add(3),await Hc(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),await kp(n)}async function zz(t,e){const n=pe(t);e?(n.M_.delete(2),await kp(n)):e||(n.M_.add(2),await Hc(n),n.N_.set("Unknown"))}function gl(t){return t.B_||(t.B_=function(n,r,i){const s=pe(n);return s.f_(),new Az(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:Dz.bind(null,t),To:Oz.bind(null,t),Ao:Lz.bind(null,t),h_:Mz.bind(null,t)}),t.x_.push(async e=>{e?(t.B_.t_(),Ew(t)?ww(t):t.N_.set("Unknown")):(await t.B_.stop(),Vk(t))})),t.B_}function ws(t){return t.k_||(t.k_=function(n,r,i){const s=pe(n);return s.f_(),new kz(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:()=>Promise.resolve(),To:Uz.bind(null,t),Ao:$z.bind(null,t),R_:Bz.bind(null,t),A_:jz.bind(null,t)}),t.x_.push(async e=>{e?(t.k_.t_(),await bp(t)):(await t.k_.stop(),t.v_.length>0&&(Z("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))})),t.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new _i,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Tw(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Iw(t,e){if(Pi("AsyncQueue",`${e}: ${t}`),$c(t))return new G(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e){this.comparator=e?(n,r)=>e(n,r)||re.comparator(n.key,r.key):(n,r)=>re.comparator(n.key,r.key),this.keyedMap=cu(),this.sortedSet=new dt(this.comparator)}static emptySet(e){return new Pa(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Pa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Pa;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(){this.q_=new dt(re.comparator)}track(e){const n=e.doc.key,r=this.q_.get(n);r?e.type!==0&&r.type===3?this.q_=this.q_.insert(n,e):e.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.q_=this.q_.remove(n):e.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):le():this.q_=this.q_.insert(n,e)}Q_(){const e=[];return this.q_.inorderTraversal((n,r)=>{e.push(r)}),e}}class el{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new el(e,n,Pa.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ip(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wz{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}}class Hz{constructor(){this.queries=new pl(e=>lk(e),Ip),this.onlineState="Unknown",this.z_=new Set}}async function Sw(t,e){const n=pe(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.W_()&&e.G_()&&(r=2):(s=new Wz,r=e.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Iw(o,`Initialization of query '${Yo(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.U_.push(e),e.j_(n.onlineState),s.K_&&e.H_(s.K_)&&Rw(n)}async function Cw(t,e){const n=pe(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=e.G_()?0:1:!s.W_()&&e.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function qz(t,e){const n=pe(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&Rw(n)}function Kz(t,e,n){const r=pe(t),i=r.queries.get(e);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(e)}function Rw(t){t.z_.forEach(e=>{e.next()})}var ny,pS;(pS=ny||(ny={})).J_="default",pS.Cache="cache";class Pw{constructor(e,n,r){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new el(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;const r=n!=="Offline";return(!this.options.ra||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=el.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==ny.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(e){this.key=e}}class $k{constructor(e){this.key=e}}class Gz{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Ce(),this.mutatedKeys=Ce(),this.Ia=uk(e),this.Ta=new Pa(this.Ia)}get Ea(){return this.la}da(e,n){const r=n?n.Aa:new fS,i=n?n.Ta:this.Ta;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,d)=>{const f=i.get(h),m=Sp(this.query,d)?d:null,_=!!f&&this.mutatedKeys.has(f.key),T=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let I=!1;f&&m?f.data.isEqual(m.data)?_!==T&&(r.track({type:3,doc:m}),I=!0):this.Ra(f,m)||(r.track({type:2,doc:m}),I=!0,(l&&this.Ia(m,l)>0||c&&this.Ia(m,c)<0)&&(a=!0)):!f&&m?(r.track({type:0,doc:m}),I=!0):f&&!m&&(r.track({type:1,doc:f}),I=!0,(l||c)&&(a=!0)),I&&(m?(o=o.add(m),s=T?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const o=e.Aa.Q_();o.sort((h,d)=>function(m,_){const T=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return le()}};return T(m)-T(_)}(h.type,d.type)||this.Ia(h.doc,d.doc)),this.Va(r),i=i!=null&&i;const a=n&&!i?this.ma():[],l=this.Pa.size===0&&this.current&&!i?1:0,c=l!==this.ha;return this.ha=l,o.length!==0||c?{snapshot:new el(this.query,e.Ta,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new fS,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=Ce(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const n=[];return e.forEach(r=>{this.Pa.has(r)||n.push(new $k(r))}),this.Pa.forEach(r=>{e.has(r)||n.push(new jk(r))}),n}pa(e){this.la=e.hs,this.Pa=Ce();const n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return el.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class Qz{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Yz{constructor(e){this.key=e,this.wa=!1}}class Jz{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new pl(a=>lk(a),Ip),this.Da=new Map,this.Ca=new Set,this.va=new dt(re.comparator),this.Fa=new Map,this.Ma=new gw,this.xa={},this.Oa=new Map,this.Na=Za.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function Xz(t,e,n=!0){const r=Gk(t);let i;const s=r.ba.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await zk(r,e,n,!0),i}async function Zz(t,e){const n=Gk(t);await zk(n,e,!0,!1)}async function zk(t,e,n,r){const i=await Ez(t.localStore,zr(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await e6(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Lk(t.remoteStore,i),a}async function e6(t,e,n,r,i){t.Ba=(d,f,m)=>async function(T,I,v,y){let R=I.view.da(v);R.Xi&&(R=await uS(T.localStore,I.query,!1).then(({documents:S})=>I.view.da(S,R)));const N=y&&y.targetChanges.get(I.targetId),M=y&&y.targetMismatches.get(I.targetId)!=null,k=I.view.applyChanges(R,T.isPrimaryClient,N,M);return mS(T,I.targetId,k.fa),k.snapshot}(t,d,f,m);const s=await uS(t.localStore,e,!0),o=new Gz(e,s.hs),a=o.da(s.documents),l=Wc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);mS(t,n,c.fa);const h=new Qz(e,n,o);return t.ba.set(e,h),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),c.snapshot}async function t6(t,e,n){const r=pe(t),i=r.ba.get(e),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!Ip(o,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await ty(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&yw(r.remoteStore,i.targetId),ry(r,i.targetId)}).catch(jc)):(ry(r,i.targetId),await ty(r.localStore,i.targetId,!0))}async function n6(t,e){const n=pe(t),r=n.ba.get(e),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),yw(n.remoteStore,r.targetId))}async function r6(t,e,n){const r=c6(t);try{const i=await function(o,a){const l=pe(o),c=Nt.now(),h=a.reduce((m,_)=>m.add(_.key),Ce());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let _=Ai(),T=Ce();return l.os.getEntries(m,h).next(I=>{_=I,_.forEach((v,y)=>{y.isValidDocument()||(T=T.add(v))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,_)).next(I=>{d=I;const v=[];for(const y of a){const R=R3(y,d.get(y.key).overlayedDocument);R!=null&&v.push(new Ps(y.key,R,tk(R.value.mapValue),sr.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,v,a)}).next(I=>{f=I;const v=I.applyToLocalDocumentSet(d,T);return l.documentOverlayCache.saveOverlays(m,I.batchId,v)})}).then(()=>({batchId:f.batchId,changes:hk(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.xa[o.currentUser.toKey()];c||(c=new dt(Oe)),c=c.insert(a,l),o.xa[o.currentUser.toKey()]=c}(r,i.batchId,n),await qc(r,i.changes),await bp(r.remoteStore)}catch(i){const s=Iw(i,"Failed to persist write");n.reject(s)}}async function Wk(t,e){const n=pe(t);try{const r=await yz(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Fa.get(s);o&&(Je(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?Je(o.wa):i.removedDocuments.size>0&&(Je(o.wa),o.wa=!1))}),await qc(n,r,e)}catch(r){await jc(r)}}function gS(t,e,n){const r=pe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=pe(o);l.onlineState=a;let c=!1;l.queries.forEach((h,d)=>{for(const f of d.U_)f.j_(a)&&(c=!0)}),c&&Rw(l)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function i6(t,e,n){const r=pe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Fa.get(e),s=i&&i.key;if(s){let o=new dt(re.comparator);o=o.insert(s,sn.newNoDocument(s,he.min()));const a=Ce().add(s),l=new Pp(he.min(),new Map,new dt(Oe),o,a);await Wk(r,l),r.va=r.va.remove(s),r.Fa.delete(e),Aw(r)}else await ty(r.localStore,e,!1).then(()=>ry(r,e,n)).catch(jc)}async function s6(t,e){const n=pe(t),r=e.batch.batchId;try{const i=await _z(n.localStore,e);qk(n,r,null),Hk(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await qc(n,i)}catch(i){await jc(i)}}async function o6(t,e,n){const r=pe(t);try{const i=await function(o,a){const l=pe(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(Je(d!==null),h=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);qk(r,e,n),Hk(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await qc(r,i)}catch(i){await jc(i)}}function Hk(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function qk(t,e,n){const r=pe(t);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function ry(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Da.get(e))t.ba.delete(r),n&&t.Sa.ka(r,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Vr(e).forEach(r=>{t.Ma.containsKey(r)||Kk(t,r)})}function Kk(t,e){t.Ca.delete(e.path.canonicalString());const n=t.va.get(e);n!==null&&(yw(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),Aw(t))}function mS(t,e,n){for(const r of n)r instanceof jk?(t.Ma.addReference(r.key,e),a6(t,r)):r instanceof $k?(Z("SyncEngine","Document no longer in limbo: "+r.key),t.Ma.removeReference(r.key,e),t.Ma.containsKey(r.key)||Kk(t,r.key)):le()}function a6(t,e){const n=e.key,r=n.path.canonicalString();t.va.get(n)||t.Ca.has(r)||(Z("SyncEngine","New document in limbo: "+n),t.Ca.add(r),Aw(t))}function Aw(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){const e=t.Ca.values().next().value;t.Ca.delete(e);const n=new re(Qe.fromString(e)),r=t.Na.next();t.Fa.set(r,new Yz(n)),t.va=t.va.insert(n,r),Lk(t.remoteStore,new ts(zr(Tp(n.path)),r,"TargetPurposeLimboResolution",sw.oe))}}async function qc(t,e,n){const r=pe(t),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,l)=>{o.push(r.Ba(l,e,n).then(c=>{if((c||n)&&r.isPrimaryClient){const h=c&&!c.fromCache;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){i.push(c);const h=_w.Ki(l.targetId,c);s.push(h)}}))}),await Promise.all(o),r.Sa.h_(i),await async function(l,c){const h=pe(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>z.forEach(c,f=>z.forEach(f.qi,m=>h.persistence.referenceDelegate.addReference(d,f.targetId,m)).next(()=>z.forEach(f.Qi,m=>h.persistence.referenceDelegate.removeReference(d,f.targetId,m)))))}catch(d){if(!$c(d))throw d;Z("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const m=h.ns.get(f),_=m.snapshotVersion,T=m.withLastLimboFreeSnapshotVersion(_);h.ns=h.ns.insert(f,T)}}}(r.localStore,s))}async function l6(t,e){const n=pe(t);if(!n.currentUser.isEqual(e)){Z("SyncEngine","User change. New user:",e.toKey());const r=await Nk(n.localStore,e);n.currentUser=e,function(s,o){s.Oa.forEach(a=>{a.forEach(l=>{l.reject(new G(j.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await qc(n,r.us)}}function u6(t,e){const n=pe(t),r=n.Fa.get(e);if(r&&r.wa)return Ce().add(r.key);{let i=Ce();const s=n.Da.get(e);if(!s)return i;for(const o of s){const a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function Gk(t){const e=pe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Wk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=u6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=i6.bind(null,e),e.Sa.h_=qz.bind(null,e.eventManager),e.Sa.ka=Kz.bind(null,e.eventManager),e}function c6(t){const e=pe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=s6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=o6.bind(null,e),e}class _S{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Ap(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return mz(this.persistence,new pz,e.initialUser,this.serializer)}createPersistence(e){return new hz(mw.Hr,this.serializer)}createSharedClientState(e){return new Iz}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class h6{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>gS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=l6.bind(null,this.syncEngine),await zz(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Hz}()}createDatastore(e){const n=Ap(e.databaseInfo.databaseId),r=function(s){return new Pz(s)}(e.databaseInfo);return function(s,o,a,l){return new bz(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new xz(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>gS(this.syncEngine,n,0),function(){return hS.D()?new hS:new Sz}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,h){const d=new Jz(i,s,o,a,l,c);return h&&(d.La=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e;await async function(r){const i=pe(r);Z("RemoteStore","RemoteStore shutting down."),i.M_.add(5),await Hc(i),i.O_.shutdown(),i.N_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Pi("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d6{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=nn.UNAUTHENTICATED,this.clientId=XA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{Z("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(Z("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new G(j.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _i;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Iw(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function im(t,e){t.asyncQueue.verifyOperationInProgress(),Z("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Nk(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function yS(t,e){t.asyncQueue.verifyOperationInProgress();const n=await p6(t);Z("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>dS(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>dS(e.remoteStore,i)),t._onlineComponents=e}function f6(t){return t.name==="FirebaseError"?t.code===j.FAILED_PRECONDITION||t.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function p6(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Z("FirestoreClient","Using user provided OfflineComponentProvider");try{await im(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!f6(n))throw n;Ga("Error using user provided cache. Falling back to memory cache: "+n),await im(t,new _S)}}else Z("FirestoreClient","Using default OfflineComponentProvider"),await im(t,new _S);return t._offlineComponents}async function Qk(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Z("FirestoreClient","Using user provided OnlineComponentProvider"),await yS(t,t._uninitializedComponentsProvider._online)):(Z("FirestoreClient","Using default OnlineComponentProvider"),await yS(t,new h6))),t._onlineComponents}function g6(t){return Qk(t).then(e=>e.syncEngine)}async function Ef(t){const e=await Qk(t),n=e.eventManager;return n.onListen=Xz.bind(null,e.syncEngine),n.onUnlisten=t6.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Zz.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=n6.bind(null,e.syncEngine),n}function m6(t,e,n={}){const r=new _i;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new kw({next:f=>{o.enqueueAndForget(()=>Cw(s,d));const m=f.docs.has(a);!m&&f.fromCache?c.reject(new G(j.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&f.fromCache&&l&&l.source==="server"?c.reject(new G(j.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new Pw(Tp(a.path),h,{includeMetadataChanges:!0,ra:!0});return Sw(s,d)}(await Ef(t),t.asyncQueue,e,n,r)),r.promise}function _6(t,e,n={}){const r=new _i;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new kw({next:f=>{o.enqueueAndForget(()=>Cw(s,d)),f.fromCache&&l.source==="server"?c.reject(new G(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new Pw(a,h,{includeMetadataChanges:!0,ra:!0});return Sw(s,d)}(await Ef(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yk(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jk(t,e,n){if(!n)throw new G(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function y6(t,e,n,r){if(e===!0&&r===!0)throw new G(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function wS(t){if(!re.isDocumentKey(t))throw new G(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function ES(t){if(re.isDocumentKey(t))throw new G(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Np(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":le()}function Nn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new G(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Np(t);throw new G(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function v6(t,e){if(e<=0)throw new G(j.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new G(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new G(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}y6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Yk((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new G(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new G(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new G(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xp{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new TS({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new G(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new G(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new TS(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new L$;switch(r.type){case"firstParty":return new U$(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=vS.get(n);r&&(Z("ComponentProvider","Removing Datastore"),vS.delete(n),r.terminate())}(this),Promise.resolve()}}function w6(t,e,n,r={}){var i;const s=(t=Nn(t,xp))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Ga("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=nn.MOCK_USER;else{a=hv(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new G(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new nn(c)}t._authCredentials=new M$(new JA(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Gr(this.firestore,e,this._query)}}class an{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new an(this.firestore,e,this._key)}}class fs extends Gr{constructor(e,n,r){super(e,n,Tp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new an(this.firestore,null,new re(e))}withConverter(e){return new fs(this.firestore,e,this._path)}}function iH(t,e,...n){if(t=Re(t),Jk("collection","path",e),t instanceof xp){const r=Qe.fromString(e,...n);return ES(r),new fs(t,null,r)}{if(!(t instanceof an||t instanceof fs))throw new G(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Qe.fromString(e,...n));return ES(r),new fs(t.firestore,null,r)}}function E6(t,e,...n){if(t=Re(t),arguments.length===1&&(e=XA.newId()),Jk("doc","path",e),t instanceof xp){const r=Qe.fromString(e,...n);return wS(r),new an(t,null,new re(r))}{if(!(t instanceof an||t instanceof fs))throw new G(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Qe.fromString(e,...n));return wS(r),new an(t.firestore,t instanceof fs?t.converter:null,new re(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T6{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new Dk(this,"async_queue_retry"),this.hu=()=>{const n=rm();n&&Z("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const e=rm();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const n=rm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new _i;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!$c(e))throw e;Z("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(e){const n=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Pi("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(e,n,r){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);const i=Tw.createAndSchedule(this,e,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&le()}verifyOperationInProgress(){}async du(){let e;do e=this.iu,await e;while(e!==this.iu)}Au(e){for(const n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){const n=this._u.indexOf(e);this._u.splice(n,1)}}function IS(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class ki extends xp{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new T6}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Xk(this),this._firestoreClient.terminate()}}function I6(t,e){const n=typeof t=="object"?t:xc(),r=typeof t=="string"?t:e||"(default)",i=Cs(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=cv("firestore");s&&w6(i,...s)}return i}function Dp(t){return t._firestoreClient||Xk(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Xk(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,h){return new X$(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Yk(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new d6(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new tl(hn.fromBase64String(e))}catch(n){throw new G(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new tl(hn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new G(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new G(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new G(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Oe(this._lat,e._lat)||Oe(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S6=/^__.*__$/;class C6{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ps(e,this.data,this.fieldMask,n,this.fieldTransforms):new zc(e,this.data,n,this.fieldTransforms)}}class Zk{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ps(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function eb(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw le()}}class Nw{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new Nw(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return Tf(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(eb(this.fu)&&S6.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class R6{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ap(e)}Fu(e,n,r,i=!1){return new Nw({fu:e,methodName:n,vu:r,path:Wt.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Kc(t){const e=t._freezeSettings(),n=Ap(t._databaseId);return new R6(t._databaseId,!!e.ignoreUndefinedProperties,n)}function tb(t,e,n,r,i,s={}){const o=t.Fu(s.merge||s.mergeFields?2:0,e,n,i);Dw("Data must be an object, but it was:",o,r);const a=rb(r,o);let l,c;if(s.merge)l=new Un(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const f=iy(e,d,n);if(!o.contains(f))throw new G(j.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);sb(h,f)||h.push(f)}l=new Un(h),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new C6(new In(a),l,c)}class Mp extends Lp{_toFieldTransform(e){if(e.fu!==2)throw e.fu===1?e.Du(`${this._methodName}() can only appear at the top level of your update data`):e.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Mp}}class xw extends Lp{_toFieldTransform(e){return new T3(e.path,new Ec)}isEqual(e){return e instanceof xw}}function P6(t,e,n,r){const i=t.Fu(1,e,n);Dw("Data must be an object, but it was:",i,r);const s=[],o=In.empty();bo(r,(l,c)=>{const h=Ow(e,l,n);c=Re(c);const d=i.Su(h);if(c instanceof Mp)s.push(h);else{const f=Gc(c,d);f!=null&&(s.push(h),o.set(h,f))}});const a=new Un(s);return new Zk(o,a,i.fieldTransforms)}function A6(t,e,n,r,i,s){const o=t.Fu(1,e,n),a=[iy(e,r,n)],l=[i];if(s.length%2!=0)throw new G(j.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(iy(e,s[f])),l.push(s[f+1]);const c=[],h=In.empty();for(let f=a.length-1;f>=0;--f)if(!sb(c,a[f])){const m=a[f];let _=l[f];_=Re(_);const T=o.Su(m);if(_ instanceof Mp)c.push(m);else{const I=Gc(_,T);I!=null&&(c.push(m),h.set(m,I))}}const d=new Un(c);return new Zk(h,d,o.fieldTransforms)}function nb(t,e,n,r=!1){return Gc(n,t.Fu(r?4:3,e))}function Gc(t,e){if(ib(t=Re(t)))return Dw("Unsupported field value:",e,t),rb(t,e);if(t instanceof Lp)return function(r,i){if(!eb(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Gc(a,i.bu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Re(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return v3(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Nt.fromDate(r);return{timestampValue:vf(i.serializer,s)}}if(r instanceof Nt){const s=new Nt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:vf(i.serializer,s)}}if(r instanceof bw)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof tl)return{bytesValue:Sk(i.serializer,r._byteString)};if(r instanceof an){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:pw(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${Np(r)}`)}(t,e)}function rb(t,e){const n={};return ZA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):bo(t,(r,i)=>{const s=Gc(i,e.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function ib(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Nt||t instanceof bw||t instanceof tl||t instanceof an||t instanceof Lp)}function Dw(t,e,n){if(!ib(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Np(n);throw r==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+r)}}function iy(t,e,n){if((e=Re(e))instanceof Op)return e._internalPath;if(typeof e=="string")return Ow(t,e);throw Tf("Field path arguments must be of type string or ",t,!1,void 0,n)}const k6=new RegExp("[~\\*/\\[\\]]");function Ow(t,e,n){if(e.search(k6)>=0)throw Tf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Op(...e.split("."))._internalPath}catch{throw Tf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Tf(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new G(j.INVALID_ARGUMENT,a+t+l)}function sb(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new an(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new b6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Vp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class b6 extends Lw{data(){return super.data()}}function Vp(t,e){return typeof e=="string"?Ow(t,e):e instanceof Op?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ob(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new G(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Mw{}class Fp extends Mw{}function sH(t,e,...n){let r=[];e instanceof Mw&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof Vw).length,a=s.filter(l=>l instanceof Up).length;if(o>1||o>0&&a>0)throw new G(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Up extends Fp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Up(e,n,r)}_apply(e){const n=this._parse(e);return ab(e._query,n),new Gr(e.firestore,e.converter,Y_(e._query,n))}_parse(e){const n=Kc(e.firestore);return function(s,o,a,l,c,h,d){let f;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new G(j.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){CS(d,h);const m=[];for(const _ of d)m.push(SS(l,s,_));f={arrayValue:{values:m}}}else f=SS(l,s,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||CS(d,h),f=nb(a,o,d,h==="in"||h==="not-in");return Pt.create(c,h,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function oH(t,e,n){const r=e,i=Vp("where",t);return Up._create(i,r,n)}class Vw extends Mw{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Vw(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Sr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)ab(o,l),o=Y_(o,l)}(e._query,n),new Gr(e.firestore,e.converter,Y_(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Fw extends Fp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Fw(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new G(j.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new G(j.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new wc(s,o)}(e._query,this._field,this._direction);return new Gr(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new No(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function aH(t,e="asc"){const n=e,r=Vp("orderBy",t);return Fw._create(r,n)}class Uw extends Fp{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Uw(e,n,r)}_apply(e){return new Gr(e.firestore,e.converter,_f(e._query,this._limit,this._limitType))}}function lH(t){return v6("limit",t),Uw._create("limit",t,"F")}class Bw extends Fp{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Bw(e,n,r)}_apply(e){const n=N6(e,this.type,this._docOrFields,this._inclusive);return new Gr(e.firestore,e.converter,function(i,s){return new No(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,n))}}function uH(...t){return Bw._create("startAfter",t,!1)}function N6(t,e,n,r){if(n[0]=Re(n[0]),n[0]instanceof Lw)return function(s,o,a,l,c){if(!l)throw new G(j.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const h=[];for(const d of Ra(s))if(d.field.isKeyField())h.push(mf(o,l.key));else{const f=l.data.field(d.field);if(Ep(f))throw new G(j.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(f===null){const m=d.field.canonicalString();throw new G(j.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}h.push(f)}return new Xa(h,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Kc(t.firestore);return function(o,a,l,c,h,d){const f=o.explicitOrderBy;if(h.length>f.length)throw new G(j.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const m=[];for(let _=0;_<h.length;_++){const T=h[_];if(f[_].field.isKeyField()){if(typeof T!="string")throw new G(j.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof T}`);if(!cw(o)&&T.indexOf("/")!==-1)throw new G(j.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${T}' contains a slash.`);const I=o.path.child(Qe.fromString(T));if(!re.isDocumentKey(I))throw new G(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${I}' is not because it contains an odd number of segments.`);const v=new re(I);m.push(mf(a,v))}else{const I=nb(l,c,T);m.push(I)}}return new Xa(m,d)}(t._query,t.firestore._databaseId,i,e,n,r)}}function SS(t,e,n){if(typeof(n=Re(n))=="string"){if(n==="")throw new G(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cw(e)&&n.indexOf("/")!==-1)throw new G(j.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Qe.fromString(n));if(!re.isDocumentKey(r))throw new G(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return mf(t,new re(r))}if(n instanceof an)return mf(t,n._key);throw new G(j.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Np(n)}.`)}function CS(t,e){if(!Array.isArray(t)||t.length===0)throw new G(j.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ab(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new G(j.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new G(j.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class x6{convertValue(e,n="none"){switch(wo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return It(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(vo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw le()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return bo(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new bw(It(e.latitude),It(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=ow(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(_c(e));default:return null}}convertTimestamp(e){const n=vs(e);return new Nt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Qe.fromString(e);Je(bk(r));const i=new yc(r.get(1),r.get(3)),s=new re(r.popFirst(5));return i.isEqual(n)||Pi(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lb(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ub extends Lw{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new hd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Vp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class hd extends ub{data(e={}){return super.data(e)}}class cb{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new du(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new hd(this._firestore,this._userDataWriter,r.key,r,new du(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new G(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new hd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new du(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new hd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new du(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:D6(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function D6(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return le()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cH(t){t=Nn(t,an);const e=Nn(t.firestore,ki);return m6(Dp(e),t._key).then(n=>hb(e,t,n))}class jw extends x6{constructor(e){super(),this.firestore=e}convertBytes(e){return new tl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new an(this.firestore,null,n)}}function hH(t){t=Nn(t,Gr);const e=Nn(t.firestore,ki),n=Dp(e),r=new jw(e);return ob(t._query),_6(n,t._query).then(i=>new cb(e,r,t,i))}function dH(t,e,n){t=Nn(t,an);const r=Nn(t.firestore,ki),i=lb(t.converter,e,n);return Bp(r,[tb(Kc(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,sr.none())])}function fH(t,e,n,...r){t=Nn(t,an);const i=Nn(t.firestore,ki),s=Kc(i);let o;return o=typeof(e=Re(e))=="string"||e instanceof Op?A6(s,"updateDoc",t._key,e,n,r):P6(s,"updateDoc",t._key,e),Bp(i,[o.toMutation(t._key,sr.exists(!0))])}function pH(t){return Bp(Nn(t.firestore,ki),[new hw(t._key,sr.none())])}function gH(t,e){const n=Nn(t.firestore,ki),r=E6(t),i=lb(t.converter,e);return Bp(n,[tb(Kc(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,sr.exists(!1))]).then(()=>r)}function mH(t,...e){var n,r,i;t=Re(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||IS(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(IS(e[o])){const d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let l,c,h;if(t instanceof an)c=Nn(t.firestore,ki),h=Tp(t._key.path),l={next:d=>{e[o]&&e[o](hb(c,t,d))},error:e[o+1],complete:e[o+2]};else{const d=Nn(t,Gr);c=Nn(d.firestore,ki),h=d._query;const f=new jw(c);l={next:m=>{e[o]&&e[o](new cb(c,f,d,m))},error:e[o+1],complete:e[o+2]},ob(t._query)}return function(f,m,_,T){const I=new kw(T),v=new Pw(m,I,_);return f.asyncQueue.enqueueAndForget(async()=>Sw(await Ef(f),v)),()=>{I.$a(),f.asyncQueue.enqueueAndForget(async()=>Cw(await Ef(f),v))}}(Dp(c),h,a,l)}function Bp(t,e){return function(r,i){const s=new _i;return r.asyncQueue.enqueueAndForget(async()=>r6(await g6(r),i,s)),s.promise}(Dp(t),e)}function hb(t,e,n){const r=n.docs.get(e._key),i=new jw(t);return new ub(t,i,e._key,r,new du(n.hasPendingWrites,n.fromCache),e.converter)}function _H(){return new xw("serverTimestamp")}(function(e,n=!0){(function(i){fl=i})(Rs),lr(new Kn("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new ki(new V$(r.getProvider("auth-internal")),new j$(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new G(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yc(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),on(zI,"4.6.3",e),on(zI,"4.6.3","esm2017")})();const db="@firebase/installations",$w="0.6.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fb=1e4,pb=`w:${$w}`,gb="FIS_v2",O6="https://firebaseinstallations.googleapis.com/v1",L6=60*60*1e3,M6="installations",V6="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F6={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Eo=new Ro(M6,V6,F6);function mb(t){return t instanceof Cr&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _b({projectId:t}){return`${O6}/projects/${t}/installations`}function yb(t){return{token:t.token,requestStatus:2,expiresIn:B6(t.expiresIn),creationTime:Date.now()}}async function vb(t,e){const r=(await e.json()).error;return Eo.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function wb({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function U6(t,{refreshToken:e}){const n=wb(t);return n.append("Authorization",j6(e)),n}async function Eb(t){const e=await t();return e.status>=500&&e.status<600?t():e}function B6(t){return Number(t.replace("s","000"))}function j6(t){return`${gb} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $6({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=_b(t),i=wb(t),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={fid:n,authVersion:gb,appId:t.appId,sdkVersion:pb},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await Eb(()=>fetch(r,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:yb(c.authToken)}}else throw await vb("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tb(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z6(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W6=/^[cdef][\w-]{21}$/,sy="";function H6(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=q6(t);return W6.test(n)?n:sy}catch{return sy}}function q6(t){return z6(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jp(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib=new Map;function Sb(t,e){const n=jp(t);Cb(n,e),K6(n,e)}function Cb(t,e){const n=Ib.get(t);if(n)for(const r of n)r(e)}function K6(t,e){const n=G6();n&&n.postMessage({key:t,fid:e}),Q6()}let Ys=null;function G6(){return!Ys&&"BroadcastChannel"in self&&(Ys=new BroadcastChannel("[Firebase] FID Change"),Ys.onmessage=t=>{Cb(t.data.key,t.data.fid)}),Ys}function Q6(){Ib.size===0&&Ys&&(Ys.close(),Ys=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y6="firebase-installations-database",J6=1,To="firebase-installations-store";let sm=null;function zw(){return sm||(sm=ip(Y6,J6,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(To)}}})),sm}async function If(t,e){const n=jp(t),i=(await zw()).transaction(To,"readwrite"),s=i.objectStore(To),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&Sb(t,e.fid),e}async function Rb(t){const e=jp(t),r=(await zw()).transaction(To,"readwrite");await r.objectStore(To).delete(e),await r.done}async function $p(t,e){const n=jp(t),i=(await zw()).transaction(To,"readwrite"),s=i.objectStore(To),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await i.done,a&&(!o||o.fid!==a.fid)&&Sb(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ww(t){let e;const n=await $p(t.appConfig,r=>{const i=X6(r),s=Z6(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===sy?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function X6(t){const e=t||{fid:H6(),registrationStatus:0};return Pb(e)}function Z6(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Eo.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=e9(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:t9(t)}:{installationEntry:e}}async function e9(t,e){try{const n=await $6(t,e);return If(t.appConfig,n)}catch(n){throw mb(n)&&n.customData.serverCode===409?await Rb(t.appConfig):await If(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function t9(t){let e=await RS(t.appConfig);for(;e.registrationStatus===1;)await Tb(100),e=await RS(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Ww(t);return r||n}return e}function RS(t){return $p(t,e=>{if(!e)throw Eo.create("installation-not-found");return Pb(e)})}function Pb(t){return n9(t)?{fid:t.fid,registrationStatus:0}:t}function n9(t){return t.registrationStatus===1&&t.registrationTime+fb<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r9({appConfig:t,heartbeatServiceProvider:e},n){const r=i9(t,n),i=U6(t,n),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={installation:{sdkVersion:pb,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await Eb(()=>fetch(r,a));if(l.ok){const c=await l.json();return yb(c)}else throw await vb("Generate Auth Token",l)}function i9(t,{fid:e}){return`${_b(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hw(t,e=!1){let n;const r=await $p(t.appConfig,s=>{if(!Ab(s))throw Eo.create("not-registered");const o=s.authToken;if(!e&&a9(o))return s;if(o.requestStatus===1)return n=s9(t,e),s;{if(!navigator.onLine)throw Eo.create("app-offline");const a=u9(s);return n=o9(t,a),a}});return n?await n:r.authToken}async function s9(t,e){let n=await PS(t.appConfig);for(;n.authToken.requestStatus===1;)await Tb(100),n=await PS(t.appConfig);const r=n.authToken;return r.requestStatus===0?Hw(t,e):r}function PS(t){return $p(t,e=>{if(!Ab(e))throw Eo.create("not-registered");const n=e.authToken;return c9(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function o9(t,e){try{const n=await r9(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await If(t.appConfig,r),n}catch(n){if(mb(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await Rb(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await If(t.appConfig,r)}throw n}}function Ab(t){return t!==void 0&&t.registrationStatus===2}function a9(t){return t.requestStatus===2&&!l9(t)}function l9(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+L6}function u9(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function c9(t){return t.requestStatus===1&&t.requestTime+fb<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h9(t){const e=t,{installationEntry:n,registrationPromise:r}=await Ww(e);return r?r.catch(console.error):Hw(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d9(t,e=!1){const n=t;return await f9(n),(await Hw(n,e)).token}async function f9(t){const{registrationPromise:e}=await Ww(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p9(t){if(!t||!t.options)throw om("App Configuration");if(!t.name)throw om("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw om(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function om(t){return Eo.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kb="installations",g9="installations-internal",m9=t=>{const e=t.getProvider("app").getImmediate(),n=p9(e),r=Cs(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},_9=t=>{const e=t.getProvider("app").getImmediate(),n=Cs(e,kb).getImmediate();return{getId:()=>h9(n),getToken:i=>d9(n,i)}};function y9(){lr(new Kn(kb,m9,"PUBLIC")),lr(new Kn(g9,_9,"PRIVATE"))}y9();on(db,$w);on(db,$w,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v9="/firebase-messaging-sw.js",w9="/firebase-cloud-messaging-push-scope",bb="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",E9="https://fcmregistrations.googleapis.com/v1",Nb="google.c.a.c_id",T9="google.c.a.c_l",I9="google.c.a.ts",S9="google.c.a.e";var AS;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(AS||(AS={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var Sc;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(Sc||(Sc={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ni(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function C9(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const am="fcm_token_details_db",R9=5,kS="fcm_token_object_Store";async function P9(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(s=>s.name).includes(am))return null;let e=null;return(await ip(am,R9,{upgrade:async(r,i,s,o)=>{var a;if(i<2||!r.objectStoreNames.contains(kS))return;const l=o.objectStore(kS),c=await l.index("fcmSenderId").get(t);if(await l.clear(),!!c){if(i===2){const h=c;if(!h.auth||!h.p256dh||!h.endpoint)return;e={token:h.fcmToken,createTime:(a=h.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:h.auth,p256dh:h.p256dh,endpoint:h.endpoint,swScope:h.swScope,vapidKey:typeof h.vapidKey=="string"?h.vapidKey:ni(h.vapidKey)}}}else if(i===3){const h=c;e={token:h.fcmToken,createTime:h.createTime,subscriptionOptions:{auth:ni(h.auth),p256dh:ni(h.p256dh),endpoint:h.endpoint,swScope:h.swScope,vapidKey:ni(h.vapidKey)}}}else if(i===4){const h=c;e={token:h.fcmToken,createTime:h.createTime,subscriptionOptions:{auth:ni(h.auth),p256dh:ni(h.p256dh),endpoint:h.endpoint,swScope:h.swScope,vapidKey:ni(h.vapidKey)}}}}}})).close(),await $g(am),await $g("fcm_vapid_details_db"),await $g("undefined"),A9(e)?e:null}function A9(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k9="firebase-messaging-database",b9=1,Cc="firebase-messaging-store";let lm=null;function xb(){return lm||(lm=ip(k9,b9,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Cc)}}})),lm}async function N9(t){const e=Db(t),r=await(await xb()).transaction(Cc).objectStore(Cc).get(e);if(r)return r;{const i=await P9(t.appConfig.senderId);if(i)return await qw(t,i),i}}async function qw(t,e){const n=Db(t),i=(await xb()).transaction(Cc,"readwrite");return await i.objectStore(Cc).put(e,n),await i.done,e}function Db({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x9={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},ln=new Ro("messaging","Messaging",x9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D9(t,e){const n=await Gw(t),r=Ob(e),i={method:"POST",headers:n,body:JSON.stringify(r)};let s;try{s=await(await fetch(Kw(t.appConfig),i)).json()}catch(o){throw ln.create("token-subscribe-failed",{errorInfo:o==null?void 0:o.toString()})}if(s.error){const o=s.error.message;throw ln.create("token-subscribe-failed",{errorInfo:o})}if(!s.token)throw ln.create("token-subscribe-no-token");return s.token}async function O9(t,e){const n=await Gw(t),r=Ob(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let s;try{s=await(await fetch(`${Kw(t.appConfig)}/${e.token}`,i)).json()}catch(o){throw ln.create("token-update-failed",{errorInfo:o==null?void 0:o.toString()})}if(s.error){const o=s.error.message;throw ln.create("token-update-failed",{errorInfo:o})}if(!s.token)throw ln.create("token-update-no-token");return s.token}async function L9(t,e){const r={method:"DELETE",headers:await Gw(t)};try{const s=await(await fetch(`${Kw(t.appConfig)}/${e}`,r)).json();if(s.error){const o=s.error.message;throw ln.create("token-unsubscribe-failed",{errorInfo:o})}}catch(i){throw ln.create("token-unsubscribe-failed",{errorInfo:i==null?void 0:i.toString()})}}function Kw({projectId:t}){return`${E9}/projects/${t}/registrations`}async function Gw({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function Ob({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:e,p256dh:t}};return r!==bb&&(i.web.applicationPubKey=r),i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M9=7*24*60*60*1e3;async function V9(t){const e=await U9(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:ni(e.getKey("auth")),p256dh:ni(e.getKey("p256dh"))},r=await N9(t.firebaseDependencies);if(r){if(B9(r.subscriptionOptions,n))return Date.now()>=r.createTime+M9?F9(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await L9(t.firebaseDependencies,r.token)}catch(i){console.warn(i)}return bS(t.firebaseDependencies,n)}else return bS(t.firebaseDependencies,n)}async function F9(t,e){try{const n=await O9(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await qw(t.firebaseDependencies,r),n}catch(n){throw n}}async function bS(t,e){const r={token:await D9(t,e),createTime:Date.now(),subscriptionOptions:e};return await qw(t,r),r.token}async function U9(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:C9(e)})}function B9(t,e){const n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,i=e.auth===t.auth,s=e.p256dh===t.p256dh;return n&&r&&i&&s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NS(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return j9(e,t),$9(e,t),z9(e,t),e}function j9(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const i=e.notification.image;i&&(t.notification.image=i);const s=e.notification.icon;s&&(t.notification.icon=s)}function $9(t,e){e.data&&(t.data=e.data)}function z9(t,e){var n,r,i,s,o;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};const a=(i=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&i!==void 0?i:(s=e.notification)===null||s===void 0?void 0:s.click_action;a&&(t.fcmOptions.link=a);const l=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;l&&(t.fcmOptions.analyticsLabel=l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W9(t){return typeof t=="object"&&!!t&&Nb in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Lb("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o");Lb("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");function Lb(t,e){const n=[];for(let r=0;r<t.length;r++)n.push(t.charAt(r)),r<e.length&&n.push(e.charAt(r));return n.join("")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H9(t){if(!t||!t.options)throw um("App Configuration Object");if(!t.name)throw um("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw um(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function um(t){return ln.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q9{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=H9(e);this.firebaseDependencies={app:e,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K9(t){try{t.swRegistration=await navigator.serviceWorker.register(v9,{scope:w9}),t.swRegistration.update().catch(()=>{})}catch(e){throw ln.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G9(t,e){if(!e&&!t.swRegistration&&await K9(t),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw ln.create("invalid-sw-registration");t.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q9(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=bb)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mb(t,e){if(!navigator)throw ln.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw ln.create("permission-blocked");return await Q9(t,e==null?void 0:e.vapidKey),await G9(t,e==null?void 0:e.serviceWorkerRegistration),V9(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y9(t,e,n){const r=J9(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[Nb],message_name:n[T9],message_time:n[I9],message_device_time:Math.floor(Date.now()/1e3)})}function J9(t){switch(t){case Sc.NOTIFICATION_CLICKED:return"notification_open";case Sc.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X9(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===Sc.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(NS(n)):t.onMessageHandler.next(NS(n)));const r=n.data;W9(r)&&r[S9]==="1"&&await Y9(t,n.messageType,r)}const xS="@firebase/messaging",DS="0.12.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z9=t=>{const e=new q9(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>X9(e,n)),e},e5=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>Mb(e,r)}};function t5(){lr(new Kn("messaging",Z9,"PUBLIC")),lr(new Kn("messaging-internal",e5,"PRIVATE")),on(xS,DS),on(xS,DS,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n5(){try{await HR()}catch{return!1}return typeof window<"u"&&WR()&&$2()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r5(t,e){if(!navigator)throw ln.create("only-available-in-window");return t.onMessageHandler=e,()=>{t.onMessageHandler=null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i5(t=xc()){return n5().then(e=>{if(!e)throw ln.create("unsupported-browser")},e=>{throw ln.create("indexed-db-unsupported")}),Cs(Re(t),"messaging").getImmediate()}async function s5(t,e){return t=Re(t),Mb(t,e)}function yH(t,e){return t=Re(t),r5(t,e)}t5();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vb="firebasestorage.googleapis.com",Fb="storageBucket",o5=2*60*1e3,a5=10*60*1e3,l5=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft extends Cr{constructor(e,n,r=0){super(cm(e),`Firebase Storage: ${n} (${cm(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ft.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return cm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var nt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(nt||(nt={}));function cm(t){return"storage/"+t}function Qw(){const t="An unknown error occurred, please check the error payload for server response.";return new ft(nt.UNKNOWN,t)}function u5(t){return new ft(nt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function c5(t){return new ft(nt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function h5(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ft(nt.UNAUTHENTICATED,t)}function d5(){return new ft(nt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function f5(t){return new ft(nt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function Ub(){return new ft(nt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Bb(){return new ft(nt.CANCELED,"User canceled the upload/download.")}function p5(t){return new ft(nt.INVALID_URL,"Invalid URL '"+t+"'.")}function g5(t){return new ft(nt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function m5(){return new ft(nt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Fb+"' property when initializing the app?")}function jb(){return new ft(nt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function _5(){return new ft(nt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function y5(){return new ft(nt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function v5(t){return new ft(nt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function oy(t){return new ft(nt.INVALID_ARGUMENT,t)}function $b(){return new ft(nt.APP_DELETED,"The Firebase app was deleted.")}function w5(t){return new ft(nt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Lu(t,e){return new ft(nt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Zl(t){throw new ft(nt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Bn.makeFromUrl(e,n)}catch{return new Bn(e,"")}if(r.path==="")return r;throw g5(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(N){N.path.charAt(N.path.length-1)==="/"&&(N.path_=N.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function c(N){N.path_=decodeURIComponent(N.path)}const h="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",m=new RegExp(`^https?://${d}/${h}/b/${i}/o${f}`,"i"),_={bucket:1,path:3},T=n===Vb?"(?:storage.googleapis.com|storage.cloud.google.com)":n,I="([^?#]*)",v=new RegExp(`^https?://${T}/${i}/${I}`,"i"),R=[{regex:a,indices:l,postModify:s},{regex:m,indices:_,postModify:c},{regex:v,indices:{bucket:1,path:2},postModify:c}];for(let N=0;N<R.length;N++){const M=R[N],k=M.regex.exec(e);if(k){const S=k[M.indices.bucket];let w=k[M.indices.path];w||(w=""),r=new Bn(S,w),M.postModify(r);break}}if(r==null)throw p5(e);return r}}class E5{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T5(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function h(...I){c||(c=!0,e.apply(null,I))}function d(I){i=setTimeout(()=>{i=null,t(m,l())},I)}function f(){s&&clearTimeout(s)}function m(I,...v){if(c){f();return}if(I){f(),h.call(null,I,...v);return}if(l()||o){f(),h.call(null,I,...v);return}r<64&&(r*=2);let R;a===1?(a=2,R=0):R=(r+Math.random())*1e3,d(R)}let _=!1;function T(I){_||(_=!0,f(),!c&&(i!==null?(I||(a=2),clearTimeout(i),d(0)):I||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,T(!0)},n),T}function I5(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S5(t){return t!==void 0}function C5(t){return typeof t=="function"}function R5(t){return typeof t=="object"&&!Array.isArray(t)}function zp(t){return typeof t=="string"||t instanceof String}function OS(t){return Yw()&&t instanceof Blob}function Yw(){return typeof Blob<"u"}function LS(t,e,n,r){if(r<e)throw oy(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw oy(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ml(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function zb(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var to;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(to||(to={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wb(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P5{constructor(e,n,r,i,s,o,a,l,c,h,d,f=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=h,this.connectionFactory_=d,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,_)=>{this.resolve_=m,this.reject_=_,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Bh(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===to.NO_ERROR,l=s.getStatus();if(!a||Wb(l,this.additionalRetryCodes_)&&this.retry){const h=s.getErrorCode()===to.ABORT;r(!1,new Bh(!1,null,h));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new Bh(c,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());S5(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=Qw();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?$b():Bb();o(l)}else{const l=Ub();o(l)}};this.canceled_?n(!1,new Bh(!1,null,!0)):this.backoffId_=T5(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&I5(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Bh{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function A5(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function k5(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function b5(t,e){e&&(t["X-Firebase-GMPID"]=e)}function N5(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function x5(t,e,n,r,i,s,o=!0){const a=zb(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return b5(c,e),A5(c,n),k5(c,s),N5(c,r),new P5(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D5(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function O5(...t){const e=D5();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Yw())return new Blob(t);throw new ft(nt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function L5(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M5(t){if(typeof atob>"u")throw v5("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class hm{constructor(e,n){this.data=e,this.contentType=n||null}}function V5(t,e){switch(t){case Br.RAW:return new hm(Hb(e));case Br.BASE64:case Br.BASE64URL:return new hm(qb(t,e));case Br.DATA_URL:return new hm(U5(e),B5(e))}throw Qw()}function Hb(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function F5(t){let e;try{e=decodeURIComponent(t)}catch{throw Lu(Br.DATA_URL,"Malformed data URL.")}return Hb(e)}function qb(t,e){switch(t){case Br.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Lu(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Br.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Lu(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=M5(e)}catch(i){throw i.message.includes("polyfill")?i:Lu(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class Kb{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Lu(Br.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=j5(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function U5(t){const e=new Kb(t);return e.base64?qb(Br.BASE64,e.rest):F5(e.rest)}function B5(t){return new Kb(t).contentType}function j5(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e,n){let r=0,i="";OS(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(OS(this.data_)){const r=this.data_,i=L5(r,e,n);return i===null?null:new si(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new si(r,!0)}}static getBlob(...e){if(Yw()){const n=e.map(r=>r instanceof si?r.data_:r);return new si(O5.apply(null,n))}else{const n=e.map(o=>zp(o)?V5(Br.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new si(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gb(t){let e;try{e=JSON.parse(t)}catch{return null}return R5(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $5(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function z5(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function Qb(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W5(t,e){return e}class fn{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||W5}}let jh=null;function H5(t){return!zp(t)||t.length<2?t:Qb(t)}function Jw(){if(jh)return jh;const t=[];t.push(new fn("bucket")),t.push(new fn("generation")),t.push(new fn("metageneration")),t.push(new fn("name","fullPath",!0));function e(s,o){return H5(o)}const n=new fn("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new fn("size");return i.xform=r,t.push(i),t.push(new fn("timeCreated")),t.push(new fn("updated")),t.push(new fn("md5Hash",null,!0)),t.push(new fn("cacheControl",null,!0)),t.push(new fn("contentDisposition",null,!0)),t.push(new fn("contentEncoding",null,!0)),t.push(new fn("contentLanguage",null,!0)),t.push(new fn("contentType",null,!0)),t.push(new fn("metadata","customMetadata",!0)),jh=t,jh}function q5(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new Bn(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function K5(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return q5(r,t),r}function Yb(t,e,n){const r=Gb(e);return r===null?null:K5(t,r,n)}function G5(t,e,n,r){const i=Gb(e);if(i===null||!zp(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(c=>{const h=t.bucket,d=t.fullPath,f="/b/"+o(h)+"/o/"+o(d),m=ml(f,n,r),_=zb({alt:"media",token:c});return m+_})[0]}function Jb(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class Do{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yi(t){if(!t)throw Qw()}function Xw(t,e){function n(r,i){const s=Yb(t,i,e);return yi(s!==null),s}return n}function Q5(t,e){function n(r,i){const s=Yb(t,i,e);return yi(s!==null),G5(s,i,t.host,t._protocol)}return n}function Qc(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=d5():i=h5():n.getStatus()===402?i=c5(t.bucket):n.getStatus()===403?i=f5(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function Zw(t){const e=Qc(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=u5(t.path)),s.serverResponse=i.serverResponse,s}return n}function Y5(t,e,n){const r=e.fullServerUrl(),i=ml(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new Do(i,s,Xw(t,n),o);return a.errorHandler=Zw(e),a}function J5(t,e,n){const r=e.fullServerUrl(),i=ml(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new Do(i,s,Q5(t,n),o);return a.errorHandler=Zw(e),a}function X5(t,e){const n=e.fullServerUrl(),r=ml(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function o(l,c){}const a=new Do(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=Zw(e),a}function Z5(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function Xb(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=Z5(null,e)),r}function Zb(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let R="";for(let N=0;N<2;N++)R=R+Math.random().toString().slice(2);return R}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=Xb(e,r,i),h=Jb(c,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+l+"--",m=si.getBlob(d,r,f);if(m===null)throw jb();const _={name:c.fullPath},T=ml(s,t.host,t._protocol),I="POST",v=t.maxUploadRetryTime,y=new Do(T,I,Xw(t,n),v);return y.urlParams=_,y.headers=o,y.body=m.uploadData(),y.errorHandler=Qc(e),y}class Sf{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}}function eE(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{yi(!1)}return yi(!!n&&(e||["active"]).indexOf(n)!==-1),n}function eW(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o=Xb(e,r,i),a={name:o.fullPath},l=ml(s,t.host,t._protocol),c="POST",h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},d=Jb(o,n),f=t.maxUploadRetryTime;function m(T){eE(T);let I;try{I=T.getResponseHeader("X-Goog-Upload-URL")}catch{yi(!1)}return yi(zp(I)),I}const _=new Do(l,c,m,f);return _.urlParams=a,_.headers=h,_.body=d,_.errorHandler=Qc(e),_}function tW(t,e,n,r){const i={"X-Goog-Upload-Command":"query"};function s(c){const h=eE(c,["active","final"]);let d=null;try{d=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{yi(!1)}d||yi(!1);const f=Number(d);return yi(!isNaN(f)),new Sf(f,r.size(),h==="final")}const o="POST",a=t.maxUploadRetryTime,l=new Do(n,o,s,a);return l.headers=i,l.errorHandler=Qc(e),l}const MS=256*1024;function nW(t,e,n,r,i,s,o,a){const l=new Sf(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw _5();const c=l.total-l.current;let h=c;i>0&&(h=Math.min(h,i));const d=l.current,f=d+h;let m="";h===0?m="finalize":c===h?m="upload, finalize":m="upload";const _={"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":`${l.current}`},T=r.slice(d,f);if(T===null)throw jb();function I(N,M){const k=eE(N,["active","final"]),S=l.current+h,w=r.size();let C;return k==="final"?C=Xw(e,s)(N,M):C=null,new Sf(S,w,k==="final",C)}const v="POST",y=e.maxUploadRetryTime,R=new Do(n,v,I,y);return R.headers=_,R.body=T.uploadData(),R.progressCallback=a||null,R.errorHandler=Qc(t),R}const En={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function dm(t){switch(t){case"running":case"pausing":case"canceling":return En.RUNNING;case"paused":return En.PAUSED;case"success":return En.SUCCESS;case"canceled":return En.CANCELED;case"error":return En.ERROR;default:return En.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rW{constructor(e,n,r){if(C5(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qo(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class iW{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=to.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=to.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=to.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw Zl("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Zl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Zl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Zl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Zl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class sW extends iW{initXhr(){this.xhr_.responseType="text"}}function Ji(){return new sW}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oW{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=Jw(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(nt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(Wb(i.status,[]))if(s)i=Ub();else{this.sleepTime=Math.max(this.sleepTime*2,l5),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(nt.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=eW(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Ji,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const i=tW(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,Ji,n,r);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=MS*this._chunkMultiplier,n=new Sf(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=nW(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,Ji,i,s,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){MS*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=Y5(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Ji,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=Zb(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Ji,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=Bb(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=dm(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){const s=new rW(n||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(dm(this._state)){case En.SUCCESS:Qo(this._resolve.bind(null,this.snapshot))();break;case En.CANCELED:case En.ERROR:const n=this._reject;Qo(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(dm(this._state)){case En.RUNNING:case En.PAUSED:e.next&&Qo(e.next.bind(e,this.snapshot))();break;case En.SUCCESS:e.complete&&Qo(e.complete.bind(e))();break;case En.CANCELED:case En.ERROR:e.error&&Qo(e.error.bind(e,this._error))();break;default:e.error&&Qo(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e,n){this._service=e,n instanceof Bn?this._location=n:this._location=Bn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Io(e,n)}get root(){const e=new Bn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Qb(this._location.path)}get storage(){return this._service}get parent(){const e=$5(this._location.path);if(e===null)return null;const n=new Bn(this._location.bucket,e);return new Io(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw w5(e)}}function aW(t,e,n){t._throwIfRoot("uploadBytes");const r=Zb(t.storage,t._location,Jw(),new si(e,!0),n);return t.storage.makeRequestWithTokens(r,Ji).then(i=>({metadata:i,ref:t}))}function lW(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new oW(t,new si(e),n)}function uW(t){t._throwIfRoot("getDownloadURL");const e=J5(t.storage,t._location,Jw());return t.storage.makeRequestWithTokens(e,Ji).then(n=>{if(n===null)throw y5();return n})}function cW(t){t._throwIfRoot("deleteObject");const e=X5(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Ji)}function hW(t,e){const n=z5(t._location.path,e),r=new Bn(t._location.bucket,n);return new Io(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dW(t){return/^[A-Za-z]+:\/\//.test(t)}function fW(t,e){return new Io(t,e)}function eN(t,e){if(t instanceof tE){const n=t;if(n._bucket==null)throw m5();const r=new Io(n,n._bucket);return e!=null?eN(r,e):r}else return e!==void 0?hW(t,e):t}function pW(t,e){if(e&&dW(e)){if(t instanceof tE)return fW(t,e);throw oy("To use ref(service, url), the first argument must be a Storage instance.")}else return eN(t,e)}function VS(t,e){const n=e==null?void 0:e[Fb];return n==null?null:Bn.makeFromBucketSpec(n,t)}function gW(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:hv(i,t.app.options.projectId))}class tE{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=Vb,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=o5,this._maxUploadRetryTime=a5,this._requests=new Set,i!=null?this._bucket=Bn.makeFromBucketSpec(i,this._host):this._bucket=VS(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Bn.makeFromBucketSpec(this._url,e):this._bucket=VS(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){LS("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){LS("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Io(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new E5($b());{const o=x5(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const FS="@firebase/storage",US="0.12.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN="storage";function vH(t,e,n){return t=Re(t),aW(t,e,n)}function wH(t,e,n){return t=Re(t),lW(t,e,n)}function EH(t){return t=Re(t),uW(t)}function TH(t){return t=Re(t),cW(t)}function IH(t,e){return t=Re(t),pW(t,e)}function mW(t=xc(),e){t=Re(t);const r=Cs(t,tN).getImmediate({identifier:e}),i=cv("storage");return i&&_W(r,...i),r}function _W(t,e,n,r={}){gW(t,e,n,r)}function yW(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new tE(n,r,i,e,Rs)}function vW(){lr(new Kn(tN,yW,"PUBLIC").setMultipleInstances(!0)),on(FS,US,""),on(FS,US,"esm2017")}vW();const wW={apiKey:"AIzaSyAu4WmCTBZ0obZ6HKTfHTBkM2O_GKrTFj0",authDomain:"react-web-messenger-bac57.firebaseapp.com",projectId:"react-web-messenger-bac57",storageBucket:"react-web-messenger-bac57.appspot.com",messagingSenderId:"766198178472",appId:"1:766198178472:web:b277f56e4a8e1d1111589d",measurementId:"G-QK2DTSM4YB",databaseURL:"https://react-web-messenger-bac57-default-rtdb.europe-west1.firebasedatabase.app"},Wp=QR(wW),nN=T4(Wp),SH=I6(Wp),CH=x$(Wp),RH=mW(Wp,"gs://react-web-messenger-bac57.appspot.com"),EW=i5(),TW="BJz-dOYx4BSd3Zp_8c_y1h0m29jgWgk8NUeB6_nclQKonF-cFNstfUNj0BmbidFR2Rwfzi2eiSH-2LBTIV0q70A",PH=async()=>{try{return await s5(EW,{vapidKey:TW})}catch(t){console.log("No registration token available. Request permission to generate one.",t)}};GF(nN,SP);const IW=()=>{const t=Ua(e=>e.updateCurrentUser);F.useEffect(()=>{const e=nN.onAuthStateChanged(n=>{t(n||null)});return()=>e()},[t])},SW=()=>{F.useEffect(()=>{"serviceWorker"in navigator?window.addEventListener("load",function(){navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"}).catch(function(t){He.warn(t)})}):He.warn("Service Worker is not supported by browser."),"PushManager"in window?Notification.permission!=="denied"&&Notification.requestPermission():He.warn("No Push API Support!")},[])},CW=()=>(IW(),A2(),k2(),SW(),Ct.jsx(UM,{}));const RW=!!(window.location.hostname==="localhost"||window.location.hostname==="[::1]"||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function PW(t){if("serviceWorker"in navigator){if(new URL({}.PUBLIC_URL,window.location.href).origin!==window.location.origin)return;window.addEventListener("load",()=>{const n="/worker.js";RW?(AW(n,t),navigator.serviceWorker.ready.then(()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):rN(n,t);let r=!1;navigator.serviceWorker.addEventListener("controllerchange",()=>{r||(window.location.reload(),r=!0)})})}}function BS(t){var e=require("../../package.json");He.info(`Application services improved ${e.version} `,{toastId:"appUpdateAvailable",onClick:()=>{t.waiting&&t.waiting.postMessage("SKIP_WAITING")},autoClose:!1})}function rN(t,e){navigator.serviceWorker.register(t).then(n=>{n.update(),setInterval(()=>{n.update()},1e3*60),n.waiting&&BS(n),n.onupdatefound=()=>{const r=n.installing;r!=null&&(r.onstatechange=()=>{n.waiting&&(navigator.serviceWorker.controller?(BS(n),console.log("New assets is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA"),e&&e.onUpdate&&e.onUpdate(n)):(console.log("Index is cached for offline use."),e&&e.onSuccess&&e.onSuccess(n)))})}}).catch(n=>{console.error("Error during service worker registration:",n)})}function AW(t,e){fetch(t,{headers:{"Service-Worker":"script"}}).then(n=>{const r=n.headers.get("content-type");n.status===404||r!=null&&r.indexOf("javascript")===-1?navigator.serviceWorker.ready.then(i=>{i.unregister().then(()=>{window.location.reload()})}):rN(t,e)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}function AH(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(t=>{t.unregister()}).catch(t=>{console.error(t.message)})}var iN={},nl={};Object.defineProperty(nl,"__esModule",{value:!0});nl.cssValue=nl.parseLengthAndUnit=void 0;var kW={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function sN(t){if(typeof t=="number")return{value:t,unit:"px"};var e,n=(t.match(/^[0-9.]*/)||"").toString();n.includes(".")?e=parseFloat(n):e=parseInt(n,10);var r=(t.match(/[^0-9]*$/)||"").toString();return kW[r]?{value:e,unit:r}:(console.warn("React Spinners: ".concat(t," is not a valid css value. Defaulting to ").concat(e,"px.")),{value:e,unit:"px"})}nl.parseLengthAndUnit=sN;function bW(t){var e=sN(t);return"".concat(e.value).concat(e.unit)}nl.cssValue=bW;var Hp={};Object.defineProperty(Hp,"__esModule",{value:!0});Hp.createAnimation=void 0;var NW=function(t,e,n){var r="react-spinners-".concat(t,"-").concat(n);if(typeof window>"u"||!window.document)return r;var i=document.createElement("style");document.head.appendChild(i);var s=i.sheet,o=`
    @keyframes `.concat(r,` {
      `).concat(e,`
    }
  `);return s&&s.insertRule(o,0),r};Hp.createAnimation=NW;var Cf=Hr&&Hr.__assign||function(){return Cf=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Cf.apply(this,arguments)},xW=Hr&&Hr.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),DW=Hr&&Hr.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),OW=Hr&&Hr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&xW(e,t,n);return DW(e,t),e},LW=Hr&&Hr.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};Object.defineProperty(iN,"__esModule",{value:!0});var fm=OW(F),pm=nl,oN=Hp,MW=(0,oN.createAnimation)("RingLoader","0% {transform: rotateX(0deg) rotateY(0deg) rotateZ(0deg)} 100% {transform: rotateX(180deg) rotateY(360deg) rotateZ(360deg)}","right"),VW=(0,oN.createAnimation)("RingLoader","0% {transform: rotateX(0deg) rotateY(0deg) rotateZ(0deg)} 100% {transform: rotateX(360deg) rotateY(180deg) rotateZ(360deg)}","left");function FW(t){var e=t.loading,n=e===void 0?!0:e,r=t.color,i=r===void 0?"#000000":r,s=t.speedMultiplier,o=s===void 0?1:s,a=t.cssOverride,l=a===void 0?{}:a,c=t.size,h=c===void 0?60:c,d=LW(t,["loading","color","speedMultiplier","cssOverride","size"]),f=(0,pm.parseLengthAndUnit)(h),m=f.value,_=f.unit,T=Cf({display:"inherit",width:(0,pm.cssValue)(h),height:(0,pm.cssValue)(h),position:"relative"},l),I=function(v){return{position:"absolute",top:"0",left:"0",width:"".concat(m).concat(_),height:"".concat(m).concat(_),border:"".concat(m/10).concat(_," solid ").concat(i),opacity:"0.4",borderRadius:"100%",animationFillMode:"forwards",perspective:"800px",animation:"".concat(v===1?MW:VW," ").concat(2/o,"s 0s infinite linear")}};return n?fm.createElement("span",Cf({style:T},d),fm.createElement("span",{style:I(1)}),fm.createElement("span",{style:I(2)})):null}var UW=iN.default=FW;const BW=()=>Ua(e=>e.isLoggedIn)===null&&Ct.jsxs("div",{className:"flex h-screen w-full flex-col items-center justify-center bg-loader-bcg bg-cover bg-bottom",children:[Ct.jsx(UW,{color:"rgb(180 83 9)",size:250,"aria-label":"Loading Spinner","data-testid":"loader"}),Ct.jsx("h1",{className:"font-bold text-veryLightZinc",children:"Waiting messenger is loading..."})]});gm.createRoot(document.getElementById("root")).render(Ct.jsxs(Ct.Fragment,{children:[Ct.jsx(CW,{}),Ct.jsx(l_,{}),Ct.jsx(BW,{})]}));PW();export{XW as A,CH as B,yH as C,PH as D,EW as E,gH as F,Hr as G,jW as H,IH as I,RH as J,EH as K,WW as L,uH as M,eH as N,$W as O,KW as P,He as Q,qe as R,AH as S,Nt as T,vH as U,TH as V,pH as W,YD as X,wH as Y,nv as Z,rv as _,Ua as a,nN as b,qW as c,E6 as d,SH as e,QW as f,ay as g,GW as h,iH as i,Ct as j,aH as k,lH as l,Nc as m,hH as n,mH as o,cH as p,sH as q,F as r,dH as s,fH as t,t2 as u,_H as v,oH as w,mR as x,JW as y,ZW as z};
