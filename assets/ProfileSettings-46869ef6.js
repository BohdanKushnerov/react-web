import{b as r,c as S,t as U,d as T,e as I,Q as b,r as n,_ as R,u as D,a as u,j as e}from"./index-1dbf5670.js";import{c as E,B as _,A}from"./useResizeWindow-7f7b4e96.js";import B from"./ButtonArrow-17349a12.js";import{F as L}from"./FileInput-5d4d35cc.js";import{s as F,L as M}from"./sprite-f89b8981.js";import{u as O}from"./useStartTransition-8aa2caca.js";import{T as z}from"./Transition-435573db.js";import"./objectWithoutPropertiesLoose-68193569.js";const Z=async(a,o,l,i)=>{if(r.currentUser&&o)try{if(a.trim()==="")throw new Error("Empty name");await S(r.currentUser,{displayName:a}),r.currentUser&&l(r.currentUser),await U(T(I,"users",o),{displayName:a}),b.success(i("ChangeNameToastSuccess"))}catch(c){b.error(i("ChangeNameToastError")),console.log("handleClickChangeDisplayName error",c)}},$=n.lazy(()=>R(()=>import("./ProfileSettingsModal-0ca5f337.js"),["assets/ProfileSettingsModal-0ca5f337.js","assets/index-1dbf5670.js","assets/index-9c0f48c4.css","assets/Line-98bfbd96.js","assets/useResizeWindow-7f7b4e96.js","assets/objectWithoutPropertiesLoose-68193569.js","assets/ModalWindow-8020d4f8.js","assets/useCloseModal-32ba7e76.js","assets/ButtonClose-abd96f0a.js","assets/sprite-f89b8981.js","assets/v4-4a60fe23.js"])),X=()=>{var m;const[a,o]=n.useState(()=>{var t;return(t=r.currentUser)==null?void 0:t.displayName}),[l,i]=n.useState(!1),c=n.useRef(null),s=n.useRef(null),{t:d}=D("translation",{keyPrefix:"ProfileSettings"}),{uid:h,displayName:f}=u(t=>t.currentUser),y=u(t=>t.updateCurrentUser),j=u(t=>t.updateSidebarScreen),N=O(),k=E(((m=r.currentUser)==null?void 0:m.photoURL)??null),w=()=>{j("default")},C=t=>{o(t.target.value)},p=()=>{i(t=>!t),l&&s.current&&(s.current.value="")},P=t=>{t.target.files&&t.target.files.length!==0&&p()},v=()=>{s.current&&s.current.click()};return e.jsx(z,{nodeRef:c,in:N,timeout:300,unmountOnExit:!0,children:t=>{var x,g;return e.jsxs("div",{ref:c,className:`absolute left-0 top-0 h-full w-full origin-top-left transform transition-transform ${t==="exited"?"hidden":""} ${t==="entered"?"translate-x-0 rotate-0":"-translate-x-1/2 rotate-180 duration-300"} `,children:[e.jsx(B,{handleClickButtonArrow:w}),e.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[e.jsx(L,{handleChangeFileInput:P,ref:s}),e.jsx("button",{className:"group relative cursor-pointer rounded-full",type:"button",onClick:v,"aria-label":"Avatar profile",children:r.currentUser&&e.jsxs(e.Fragment,{children:[e.jsx(_,{loading:k,children:e.jsx(A,{photoURL:r.currentUser.photoURL,displayName:r.currentUser.displayName,size:"200"})}),e.jsx("svg",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 fill-white group-hover:scale-105",width:48,height:48,children:e.jsx("use",{href:F+"#icon-photo-focus"})})]})}),e.jsxs("div",{className:"flex items-center justify-center gap-1 text-white",children:[e.jsx("p",{className:"text-black dark:text-white",children:d("Phone")}),e.jsx("p",{className:"h-10 cursor-default rounded-3xl px-4 py-2 text-center text-black dark:text-white",children:(g=(x=r)==null?void 0:x.currentUser)==null?void 0:g.phoneNumber})]}),typeof a=="string"&&e.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 text-white",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("input",{className:"h-10 w-full rounded-3xl border-2 border-transparent bg-darkBackground px-8 py-2 text-center text-white outline-none focus:border-solid focus:border-mediumDarkCyan sm:w-260px md:w-full",type:"text",value:a,onChange:C}),e.jsxs("p",{className:"text-center text-xs text-black dark:text-white",children:["⮴ ",d("ChangeNameNotify"),"⮵"]})]}),e.jsx("button",{className:`w-48 rounded-3xl border-2 ${f===a?"border-darkZinc bg-transparent text-darkZinc":"cursor-pointer border-black bg-transparent text-black hover:bg-mediumZinc dark:border-white dark:text-white hover:dark:bg-extraDarkGray"} transition-all duration-300 hover:shadow-mainShadow`,type:"button",onClick:()=>h!==null&&Z(a,h,y,d),"aria-label":"Change display name",disabled:f===a,children:d("ChangeName")})]})]}),l&&e.jsx(n.Suspense,{fallback:e.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:e.jsx(M,{size:200})}),children:e.jsx($,{photoProfileInputRef:s,handleToggleProfilePhotoModal:p})})]})}})};export{X as default};
