import{r as u,a as d,q as f,w as m,i as p,o as j,e as S,u as M,j as e}from"./index-4696ae0f.js";import{b as y,A as k}from"./useResizeWindow-95586f27.js";import{S as N}from"./SearchInput-14372a96.js";import{s as b}from"./sprite-94821839.js";const v=()=>{const[r,n]=u.useState(""),[t,o]=u.useState(null),{chatUID:l}=d(s=>s.currentChatInfo);return u.useEffect(()=>{if(!r){o(null);return}const s=f(p(S,`chats/${l}/messages`),m("message",">=",r),m("message","<=",r+"ï£¿")),c=j(s,i=>{o(i.docs)});return()=>{c()}},[l,r]),{searchMessages:t,searchMessageValue:r,setSearchMessageValue:n}},w=r=>{const n=localStorage.getItem("language");if(n){const t=new Date(r),o=t.getDate(),l=t.toLocaleString(n==="ua"?"uk":n,{month:"short"}),s=t.getFullYear(),c=t.getHours(),i=t.getMinutes();return`${o} ${l} ${s}, ${c}:${i<10?"0":""}${i}`}},$=({setIsShowSearchMessages:r})=>{const{t:n}=M("translation",{keyPrefix:"General"}),{userUID:t}=d(a=>a.currentChatInfo),{photoURL:o,displayName:l}=d(a=>a.currentUser),s=y(t),{searchMessages:c,searchMessageValue:i,setSearchMessageValue:h}=v(),g=a=>{h(a.target.value)},x=()=>{r(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-around gap-1",children:[e.jsx("button",{className:"flex h-9 w-10 cursor-pointer items-center justify-center rounded-full bg-transparent transition-all duration-300 hover:bg-mediumZinc hover:dark:bg-veryLightZincOpacity10",type:"button",onClick:x,"aria-label":"Close",children:e.jsx("svg",{className:"fill-darkZinc dark:fill-mediumZinc",width:16,height:16,children:e.jsx("use",{href:b+"#icon-cross-close"})})}),e.jsx(N,{value:i,handleChange:g,placeholderText:n("SearchMsgPlaceholder"),autoFocus:!0})]}),c&&e.jsxs("ul",{className:"flex flex-col justify-center gap-2",children:[c.length===0&&e.jsx("p",{className:"text-darkZinc dark:text-white",children:n("NotFoundMsg")}),c.map(a=>e.jsxs("li",{className:"flex items-center justify-start gap-2",children:[e.jsx(k,{photoURL:a.data().senderUserID===t?s==null?void 0:s.photoURL:o,displayName:a.data().senderUserID===t?s==null?void 0:s.displayName:l,size:"50"}),e.jsxs("div",{children:[e.jsx("p",{className:"max-w-xs break-all text-darkZinc dark:text-mediumZinc",children:a.data().message}),e.jsx("p",{className:"text-darkZinc dark:text-white",children:a.data().date&&w(a.data().date.toDate().toString())})]})]},a.id))]})]})};export{$ as default};
