import{r as I,g as U,u as D,a as p,j as u,Q as g,I as A,J as N,V as $,W as F,d as B,e as L}from"./index-fe10a68b.js";import{s as S}from"./sprite-f03adbee.js";import{m as W,r as q}from"./ChatPage-9b6ff7d5.js";var h={},z=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,r=[],n=0;n<e.rangeCount;n++)r.push(e.getRangeAt(n));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null;break}return e.removeAllRanges(),function(){e.type==="Caret"&&e.removeAllRanges(),e.rangeCount||r.forEach(function(o){e.addRange(o)}),t&&t.focus()}},K=z,x={"text/plain":"Text","text/html":"Url",default:"Text"},Z="Copy to clipboard: #{key}, Enter";function H(e){var t=(/mac os x/i.test(navigator.userAgent)?"âŒ˜":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}function J(e,t){var r,n,o,i,s,a,c=!1;t||(t={}),r=t.debug||!1;try{o=K(),i=document.createRange(),s=document.getSelection(),a=document.createElement("span"),a.textContent=e,a.ariaHidden="true",a.style.all="unset",a.style.position="fixed",a.style.top=0,a.style.clip="rect(0, 0, 0, 0)",a.style.whiteSpace="pre",a.style.webkitUserSelect="text",a.style.MozUserSelect="text",a.style.msUserSelect="text",a.style.userSelect="text",a.addEventListener("copy",function(l){if(l.stopPropagation(),t.format)if(l.preventDefault(),typeof l.clipboardData>"u"){r&&console.warn("unable to use e.clipboardData"),r&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var d=x[t.format]||x.default;window.clipboardData.setData(d,e)}else l.clipboardData.clearData(),l.clipboardData.setData(t.format,e);t.onCopy&&(l.preventDefault(),t.onCopy(l.clipboardData))}),document.body.appendChild(a),i.selectNodeContents(a),s.addRange(i);var f=document.execCommand("copy");if(!f)throw new Error("copy command was unsuccessful");c=!0}catch(l){r&&console.error("unable to copy using execCommand: ",l),r&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),c=!0}catch(d){r&&console.error("unable to copy using clipboardData: ",d),r&&console.error("falling back to prompt"),n=H("message"in t?t.message:Z),window.prompt(n,e)}}finally{s&&(typeof s.removeRange=="function"?s.removeRange(i):s.removeAllRanges()),a&&document.body.removeChild(a),o()}return c}var Q=J;function v(e){"@babel/helpers - typeof";return v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(e)}Object.defineProperty(h,"__esModule",{value:!0});h.CopyToClipboard=void 0;var m=T(I),V=T(Q),X=["text","onCopy","options","children"];function T(e){return e&&e.__esModule?e:{default:e}}function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?j(Object(r),!0).forEach(function(n){O(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function G(e,t){if(e==null)return{};var r=Y(e,t),n,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Y(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,i;for(i=0;i<n.length;i++)o=n[i],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}function ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function te(e,t,r){return t&&_(e.prototype,t),r&&_(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function re(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C(e,t)}function C(e,t){return C=Object.setPrototypeOf||function(n,o){return n.__proto__=o,n},C(e,t)}function ne(e){var t=ae();return function(){var n=b(e),o;if(t){var i=b(this).constructor;o=Reflect.construct(n,arguments,i)}else o=n.apply(this,arguments);return oe(this,o)}}function oe(e,t){if(t&&(v(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return E(e)}function E(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ae(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},b(e)}function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var R=function(e){re(r,e);var t=ne(r);function r(){var n;ee(this,r);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=t.call.apply(t,[this].concat(i)),O(E(n),"onClick",function(a){var c=n.props,f=c.text,l=c.onCopy,d=c.children,k=c.options,y=m.default.Children.only(d),M=(0,V.default)(f,k);l&&l(f,M),y&&y.props&&typeof y.props.onClick=="function"&&y.props.onClick(a)}),n}return te(r,[{key:"render",value:function(){var o=this.props;o.text,o.onCopy,o.options;var i=o.children,s=G(o,X),a=m.default.Children.only(i);return m.default.cloneElement(a,P(P({},s),{},{onClick:this.onClick}))}}]),r}(m.default.PureComponent);h.CopyToClipboard=R;O(R,"defaultProps",{onCopy:void 0,options:void 0});var ie=h,w=ie.CopyToClipboard;w.CopyToClipboard=w;var se=w;const ce=U(se),le=e=>{if(e!=null&&e.length)return e.map(t=>t.data().message).join(" ")},me=({textContent:e=!0,white:t="white",dark:r="white"})=>{const{t:n}=D(),o=p(a=>a.selectedDocDataMessage),i=p(a=>a.resetSelectedMessages),s=()=>{g.success(n("Toasts.CopyToClipboard")),i()};return u.jsx(u.Fragment,{children:o&&u.jsx(ce,{text:le(o)??"",onCopy:s,children:u.jsxs("div",{className:`flex items-center ${e?"justify-between":"justify-center"} w-full px-8 py-2 text-white transition-all duration-150 hover:cursor-pointer hover:rounded-md hover:bg-darkZincOpacity90`,children:[u.jsx("svg",{width:20,height:20,className:`flex fill-${t} dark:fill-${r}`,children:u.jsx("use",{href:S+"#icon-copy"})}),e&&u.jsx("span",{className:"text-base",children:n("ContextMenu.Copy")})]})})})},ue=async(e,t,r)=>{const n=e.map(async o=>{var s;const i=(s=o.data())==null?void 0:s.file;if(i){const a=i.map(c=>{const f=A(N,c.url);return $(f)});await Promise.all(a)}await F(B(t,"chats",r,"messages",o.id))});await Promise.all(n)},fe=async(e,t,r,n,o,i)=>{if(!(!t||!e||!r||!n))try{W(),i(),await ue(e,L,t),g.success(o("Toasts.DeleteMessageSuccess"))}catch(s){g.error(o("Toasts.DeleteMessageError")),console.log("handleDeleteMessage error",s)}finally{q()}},be=({textContent:e=!0,color:t})=>{const{t:r}=D(),n=p(c=>c.currentUser.uid),{chatUID:o,userUID:i}=p(c=>c.currentChatInfo),s=p(c=>c.selectedDocDataMessage),a=p(c=>c.resetSelectedMessages);return u.jsxs("button",{className:"flex w-full items-center justify-between px-8 py-2 text-white transition-all duration-150 hover:cursor-pointer hover:rounded-md hover:bg-darkZincOpacity90",type:"button",onClick:()=>fe(s,o,n,i,r,a),"aria-label":"Delete message",children:[u.jsx("svg",{width:20,height:20,children:u.jsx("use",{href:S+"#icon-delete-button",fill:t})}),e&&u.jsx("span",{className:"text-base",children:r("ContextMenu.Delete")})]})};export{me as C,be as D};
